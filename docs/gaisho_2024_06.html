<!DOCTYPE html>
<html lang="ja"><head>
<script src="gaisho_2024_06_files/libs/clipboard/clipboard.min.js"></script>
<script src="gaisho_2024_06_files/libs/quarto-html/tabby.min.js"></script>
<script src="gaisho_2024_06_files/libs/quarto-html/popper.min.js"></script>
<script src="gaisho_2024_06_files/libs/quarto-html/tippy.umd.min.js"></script>
<link href="gaisho_2024_06_files/libs/quarto-html/tippy.css" rel="stylesheet">
<link href="gaisho_2024_06_files/libs/quarto-html/light-border.css" rel="stylesheet">
<link href="gaisho_2024_06_files/libs/quarto-html/quarto-syntax-highlighting-2486e1f0a3ee9ee1fc393803a1361cdb.css" rel="stylesheet" id="quarto-text-highlighting-styles"><meta charset="utf-8">
  <meta name="generator" content="quarto-1.6.32">

  <meta name="author" content="Soichi Matsuura">
  <meta name="dcterms.date" content="2024-11-13">
  <title>外国書購読 Day6   Chapter 5.   Analytical Review: Technical Analysis </title>
  <meta name="apple-mobile-web-app-capable" content="yes">
  <meta name="apple-mobile-web-app-status-bar-style" content="black-translucent">
  <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no, minimal-ui">
  <link rel="stylesheet" href="gaisho_2024_06_files/libs/revealjs/dist/reset.css">
  <link rel="stylesheet" href="gaisho_2024_06_files/libs/revealjs/dist/reveal.css">
  <style>
    code{white-space: pre-wrap;}
    span.smallcaps{font-variant: small-caps;}
    div.columns{display: flex; gap: min(4vw, 1.5em);}
    div.column{flex: auto; overflow-x: auto;}
    div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
    ul.task-list{list-style: none;}
    ul.task-list li input[type="checkbox"] {
      width: 0.8em;
      margin: 0 0.8em 0.2em -1em; /* quarto-specific, see https://github.com/quarto-dev/quarto-cli/issues/4556 */ 
      vertical-align: middle;
    }
    /* CSS for syntax highlighting */
    pre > code.sourceCode { white-space: pre; position: relative; }
    pre > code.sourceCode > span { line-height: 1.25; }
    pre > code.sourceCode > span:empty { height: 1.2em; }
    .sourceCode { overflow: visible; }
    code.sourceCode > span { color: inherit; text-decoration: inherit; }
    div.sourceCode { margin: 1em 0; }
    pre.sourceCode { margin: 0; }
    @media screen {
    div.sourceCode { overflow: auto; }
    }
    @media print {
    pre > code.sourceCode { white-space: pre-wrap; }
    pre > code.sourceCode > span { display: inline-block; text-indent: -5em; padding-left: 5em; }
    }
    pre.numberSource code
      { counter-reset: source-line 0; }
    pre.numberSource code > span
      { position: relative; left: -4em; counter-increment: source-line; }
    pre.numberSource code > span > a:first-child::before
      { content: counter(source-line);
        position: relative; left: -1em; text-align: right; vertical-align: baseline;
        border: none; display: inline-block;
        -webkit-touch-callout: none; -webkit-user-select: none;
        -khtml-user-select: none; -moz-user-select: none;
        -ms-user-select: none; user-select: none;
        padding: 0 4px; width: 4em;
        color: #aaaaaa;
      }
    pre.numberSource { margin-left: 3em; border-left: 1px solid #aaaaaa;  padding-left: 4px; }
    div.sourceCode
      { color: #003b4f; background-color: #f1f3f5; }
    @media screen {
    pre > code.sourceCode > span > a:first-child::before { text-decoration: underline; }
    }
    code span { color: #003b4f; } /* Normal */
    code span.al { color: #ad0000; } /* Alert */
    code span.an { color: #5e5e5e; } /* Annotation */
    code span.at { color: #657422; } /* Attribute */
    code span.bn { color: #ad0000; } /* BaseN */
    code span.bu { } /* BuiltIn */
    code span.cf { color: #003b4f; font-weight: bold; } /* ControlFlow */
    code span.ch { color: #20794d; } /* Char */
    code span.cn { color: #8f5902; } /* Constant */
    code span.co { color: #5e5e5e; } /* Comment */
    code span.cv { color: #5e5e5e; font-style: italic; } /* CommentVar */
    code span.do { color: #5e5e5e; font-style: italic; } /* Documentation */
    code span.dt { color: #ad0000; } /* DataType */
    code span.dv { color: #ad0000; } /* DecVal */
    code span.er { color: #ad0000; } /* Error */
    code span.ex { } /* Extension */
    code span.fl { color: #ad0000; } /* Float */
    code span.fu { color: #4758ab; } /* Function */
    code span.im { color: #00769e; } /* Import */
    code span.in { color: #5e5e5e; } /* Information */
    code span.kw { color: #003b4f; font-weight: bold; } /* Keyword */
    code span.op { color: #5e5e5e; } /* Operator */
    code span.ot { color: #003b4f; } /* Other */
    code span.pp { color: #ad0000; } /* Preprocessor */
    code span.sc { color: #5e5e5e; } /* SpecialChar */
    code span.ss { color: #20794d; } /* SpecialString */
    code span.st { color: #20794d; } /* String */
    code span.va { color: #111111; } /* Variable */
    code span.vs { color: #20794d; } /* VerbatimString */
    code span.wa { color: #5e5e5e; font-style: italic; } /* Warning */
  </style>
  <link rel="stylesheet" href="gaisho_2024_06_files/libs/revealjs/dist/theme/quarto-c3f8326322c1af3e281abcb81ab64f0a.css">
  <link rel="stylesheet" href="mystyle.css">
  <script>window.backupDefine = window.define; window.define = undefined;</script><script src="https://cdn.jsdelivr.net/npm/katex@latest/dist/katex.min.js"></script>
  <script>document.addEventListener("DOMContentLoaded", function () {
 var mathElements = document.getElementsByClassName("math");
 var macros = [];
 for (var i = 0; i < mathElements.length; i++) {
  var texText = mathElements[i].firstChild;
  if (mathElements[i].tagName == "SPAN") {
   katex.render(texText.data, mathElements[i], {
    displayMode: mathElements[i].classList.contains('display'),
    throwOnError: false,
    macros: macros,
    fleqn: false
   });
}}});
  </script>
  <script>window.define = window.backupDefine; window.backupDefine = undefined;</script><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/katex@latest/dist/katex.min.css">
  <link href="gaisho_2024_06_files/libs/revealjs/plugin/quarto-line-highlight/line-highlight.css" rel="stylesheet">
  <link href="gaisho_2024_06_files/libs/revealjs/plugin/reveal-menu/menu.css" rel="stylesheet">
  <link href="gaisho_2024_06_files/libs/revealjs/plugin/reveal-menu/quarto-menu.css" rel="stylesheet">
  <link href="gaisho_2024_06_files/libs/revealjs/plugin/reveal-chalkboard/font-awesome/css/all.css" rel="stylesheet">
  <link href="gaisho_2024_06_files/libs/revealjs/plugin/reveal-chalkboard/style.css" rel="stylesheet">
  <link href="gaisho_2024_06_files/libs/revealjs/plugin/quarto-support/footer.css" rel="stylesheet">
  <style type="text/css">

  .callout {
    margin-top: 1em;
    margin-bottom: 1em;  
    border-radius: .25rem;
  }

  .callout.callout-style-simple { 
    padding: 0em 0.5em;
    border-left: solid #acacac .3rem;
    border-right: solid 1px silver;
    border-top: solid 1px silver;
    border-bottom: solid 1px silver;
    display: flex;
  }

  .callout.callout-style-default {
    border-left: solid #acacac .3rem;
    border-right: solid 1px silver;
    border-top: solid 1px silver;
    border-bottom: solid 1px silver;
  }

  .callout .callout-body-container {
    flex-grow: 1;
  }

  .callout.callout-style-simple .callout-body {
    font-size: 1rem;
    font-weight: 400;
  }

  .callout.callout-style-default .callout-body {
    font-size: 0.9rem;
    font-weight: 400;
  }

  .callout.callout-titled.callout-style-simple .callout-body {
    margin-top: 0.2em;
  }

  .callout:not(.callout-titled) .callout-body {
      display: flex;
  }

  .callout:not(.no-icon).callout-titled.callout-style-simple .callout-content {
    padding-left: 1.6em;
  }

  .callout.callout-titled .callout-header {
    padding-top: 0.2em;
    margin-bottom: -0.2em;
  }

  .callout.callout-titled .callout-title  p {
    margin-top: 0.5em;
    margin-bottom: 0.5em;
  }
    
  .callout.callout-titled.callout-style-simple .callout-content  p {
    margin-top: 0;
  }

  .callout.callout-titled.callout-style-default .callout-content  p {
    margin-top: 0.7em;
  }

  .callout.callout-style-simple div.callout-title {
    border-bottom: none;
    font-size: .9rem;
    font-weight: 600;
    opacity: 75%;
  }

  .callout.callout-style-default  div.callout-title {
    border-bottom: none;
    font-weight: 600;
    opacity: 85%;
    font-size: 0.9rem;
    padding-left: 0.5em;
    padding-right: 0.5em;
  }

  .callout.callout-style-default div.callout-content {
    padding-left: 0.5em;
    padding-right: 0.5em;
  }

  .callout.callout-style-simple .callout-icon::before {
    height: 1rem;
    width: 1rem;
    display: inline-block;
    content: "";
    background-repeat: no-repeat;
    background-size: 1rem 1rem;
  }

  .callout.callout-style-default .callout-icon::before {
    height: 0.9rem;
    width: 0.9rem;
    display: inline-block;
    content: "";
    background-repeat: no-repeat;
    background-size: 0.9rem 0.9rem;
  }

  .callout-title {
    display: flex
  }
    
  .callout-icon::before {
    margin-top: 1rem;
    padding-right: .5rem;
  }

  .callout.no-icon::before {
    display: none !important;
  }

  .callout.callout-titled .callout-body > .callout-content > :last-child {
    padding-bottom: 0.5rem;
    margin-bottom: 0;
  }

  .callout.callout-titled .callout-icon::before {
    margin-top: .5rem;
    padding-right: .5rem;
  }

  .callout:not(.callout-titled) .callout-icon::before {
    margin-top: 1rem;
    padding-right: .5rem;
  }

  /* Callout Types */

  div.callout-note {
    border-left-color: #4582ec !important;
  }

  div.callout-note .callout-icon::before {
    background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAAgCAYAAABzenr0AAAAAXNSR0IArs4c6QAAAERlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAA6ABAAMAAAABAAEAAKACAAQAAAABAAAAIKADAAQAAAABAAAAIAAAAACshmLzAAAEU0lEQVRYCcVXTWhcVRQ+586kSUMMxkyaElstCto2SIhitS5Ek8xUKV2poatCcVHtUlFQk8mbaaziwpWgglJwVaquitBOfhQXFlqlzSJpFSpIYyXNjBNiTCck7x2/8/LeNDOZxDuEkgOXe++553zfefee+/OYLOXFk3+1LLrRdiO81yNqZ6K9cG0P3MeFaMIQjXssE8Z1JzLO9ls20MBZX7oG8w9GxB0goaPrW5aNMp1yOZIa7Wv6o2ykpLtmAPs/vrG14Z+6d4jpbSKuhdcSyq9wGMPXjonwmESXrriLzFGOdDBLB8Y6MNYBu0dRokSygMA/mrun8MGFN3behm6VVAwg4WR3i6FvYK1T7MHo9BK7ydH+1uurECoouk5MPRyVSBrBHMYwVobG2aOXM07sWrn5qgB60rc6mcwIDJtQrnrEr44kmy+UO9r0u9O5/YbkS9juQckLed3DyW2XV/qWBBB3ptvI8EUY3I9p/67OW+g967TNr3Sotn3IuVlfMLVnsBwH4fsnebJvyGm5GeIUA3jljERmrv49SizPYuq+z7c2H/jlGC+Ghhupn/hcapqmcudB9jwJ/3jvnvu6vu5lVzF1fXyZuZZ7U8nRmVzytvT+H3kilYvH09mLWrQdwFSsFEsxFVs5fK7A0g8gMZjbif4ACpKbjv7gNGaD8bUrlk8x+KRflttr22JEMRUbTUwwDQScyzPgedQHZT0xnx7ujw2jfVfExwYHwOsDTjLdJ2ebmeQIlJ7neo41s/DrsL3kl+W2lWvAga0tR3zueGr6GL78M3ifH0rGXrBC2aAR8uYcIA5gwV8zIE8onoh8u0Fca/ciF7j1uOzEnqcIm59sEXoGc0+z6+H45V1CvAvHcD7THztu669cnp+L0okAeIc6zjbM/24LgGM1gZk7jnRu1aQWoU9sfUOuhrmtaPIO3YY1KLLWZaEO5TKUbMY5zx8W9UJ6elpLwKXbsaZ4EFl7B4bMtDv0iRipKoDQT2sNQI9b1utXFdYisi+wzZ/ri/1m7QfDgEuvgUUEIJPq3DhX/5DWNqIXDOweC2wvIR90Oq3lDpdMIgD2r0dXvGdsEW5H6x6HLRJYU7C69VefO1x8Gde1ZFSJLfWS1jbCnhtOPxmpfv2LXOA2Xk2tvnwKKPFuZ/oRmwBwqRQDcKNeVQkYcOjtWVBuM/JuYw5b6isojIkYxyYAFn5K7ZBF10fea52y8QltAg6jnMqNHFBmGkQ1j+U43HMi2xMar1Nv0zGsf1s8nUsmUtPOOrbFIR8bHFDMB5zL13Gmr/kGlCkUzedTzzmzsaJXhYawnA3UmARpiYj5ooJZiUoxFRtK3X6pgNPv+IZVPcnwbOl6f+aBaO1CNvPW9n9LmCp01nuSaTRF2YxHqZ8DYQT6WsXT+RD6eUztwYLZ8rM+rcPxamv1VQzFUkzFXvkiVrySGQgJNvXHJAxiU3/NwiC03rSf05VBaPtu/Z7/B8Yn/w7eguloAAAAAElFTkSuQmCC');
  }

  div.callout-note.callout-style-default .callout-title {
    background-color: #dae6fb
  }

  div.callout-important {
    border-left-color: #d9534f !important;
  }

  div.callout-important .callout-icon::before {
    background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAAgCAYAAABzenr0AAAAAXNSR0IArs4c6QAAAERlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAA6ABAAMAAAABAAEAAKACAAQAAAABAAAAIKADAAQAAAABAAAAIAAAAACshmLzAAAEKklEQVRYCcVXTWhcVRS+575MJym48A+hSRFr00ySRQhURRfd2HYjk2SSTokuBCkU2o0LoSKKraKIBTcuFCoidGFD08nkBzdREbpQ1EDNIv8qSGMFUboImMSZd4/f9zJv8ibJMC8xJQfO3HPPPef7zrvvvnvviIkpC9nsw0UttFunbUhpFzFtarSd6WJkStVMw5xyVqYTvkwfzuf/5FgtkVoB0729j1rjXwThS7Vio+Mo6DNnvLfahoZ+i/o32lULuJ3NNiz7q6+pyAUkJaFF6JwaM2lUJlV0MlnQn5aTRbEu0SEqHUa0A4AdiGuB1kFXRfVyg5d87+Dg4DL6m2TLAub60ilj7A1Ec4odSAc8X95sHh7+ZRPCFo6Fnp7HfU/fBng/hi10CjCnWnJjsxvDNxWw0NfV6Rv5GgP3I3jGWXumdTD/3cbEOP2ZbOZp69yniG3FQ9z1jD7bnBu9Fc2tKGC2q+uAJOQHBDRiZX1x36o7fWBs7J9ownbtO+n0/qWkvW7UPIfc37WgT6ZGR++EOJyeQDSb9UB+DZ1G6DdLDzyS+b/kBCYGsYgJbSQHuThGKRcw5xdeQf8YdNHsc6ePXrlSYMBuSIAFTGAtQo+VuALo4BX83N190NWZWbynBjhOHsmNfFWLeL6v+ynsA58zDvvAC8j5PkbOcXCMg2PZFk3q8MjI7WAG/Dp9AwP7jdGBOOQkAvlFUB+irtm16I1Zw9YBcpGTGXYmk3kQIC/Cds55l+iMI3jqhjAuaoe+am2Jw5GT3Nbz3CkE12NavmzN5+erJW7046n/CH1RO/RVa8lBLozXk9uqykkGAyRXLWlLv5jyp4RFsG5vGVzpDLnIjTWgnRy2Rr+tDKvRc7Y8AyZq10jj8DqXdnIRNtFZb+t/ZRtXcDiVnzpqx8mPcDWxgARUqx0W1QB9MeUZiNrV4qP+Ehc+BpNgATsTX8ozYKL2NtFYAHc84fG7ndxUPr+AR/iQSns7uSUufAymwDOb2+NjK27lEFocm/EE2WpyIy/Hi66MWuMKJn8RvxIcj87IM5Vh9663ziW36kR0HNenXuxmfaD8JC7tfKbrhFr7LiZCrMjrzTeGx+PmkosrkNzW94ObzwocJ7A1HokLolY+AvkTiD/q1H0cN48c5EL8Crkttsa/AXQVDmutfyku0E7jShx49XqV3MFK8IryDhYVbj7Sj2P2eBxwcXoe8T8idsKKPRcnZw1b+slFTubwUwhktrfnAt7J++jwQtLZcm3sr9LQrjRzz6cfMv9aLvgmnAGvpoaGLxM4mAEaLV7iAzQ3oU0IvD5x9ix3yF2RAAuYAOO2f7PEFWCXZ4C9Pb2UsgDeVnFSpbFK7/IWu7TPTvBqzbGdCHOJQSxiEjt6IyZmxQyEJHv6xyQsYk//moVFsN2zP6fRImjfq7/n/wFDguUQFNEwugAAAABJRU5ErkJggg==');
  }

  div.callout-important.callout-style-default .callout-title {
    background-color: #f7dddc
  }

  div.callout-warning {
    border-left-color: #f0ad4e !important;
  }

  div.callout-warning .callout-icon::before {
    background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAAgCAYAAABzenr0AAAAAXNSR0IArs4c6QAAAERlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAA6ABAAMAAAABAAEAAKACAAQAAAABAAAAIKADAAQAAAABAAAAIAAAAACshmLzAAAETklEQVRYCeVWW2gcVRg+58yaTUnizqbipZeX4uWhBEniBaoUX1Ioze52t7sRq6APio9V9MEaoWlVsFasRq0gltaAPuxms8lu0gcviE/FFOstVbSIxgcv6SU7EZqmdc7v9+9mJtNks51NTUH84ed889/PP+cmxP+d5FIbMJmNbpREu4WUkiTtCicKny0l1pIKmBzovF2S+hIJHX8iEu3hZJ5lNZGqyRrGSIQpq15AzF28jgpeY6yk6GVdrfFqdrD6Iw+QlB8g0YS2g7dyQmXM/IDhBhT0UCiRf59lfqmmDvzRt6kByV/m4JjtzuaujMUM2c5Z2d6JdKrRb3K2q6mA+oYVz8JnDdKPmmNthzkAk/lN63sYPgevrguc72aZX/L9C6x09GYyxBgCX4NlvyGUHOKELlm5rXeR1kchuChJt4SSwyddZRXgvwMGvYo4QSlk3/zkHD8UHxwVJA6zjZZqP8v8kK8OWLnIZtLyCAJagYC4rTGW/9Pqj92N/c+LUaAj27movwbi19tk/whRCIE7Q9vyI6yvRpftAKVTdUjOW40X3h5OXsKCdmFcx0xlLJoSuQngnrJe7Kcjm4OMq9FlC7CMmScQANuNvjfP3PjGXDBaUQmbp296S5L4DrpbrHN1T87ZVEZVCzg1FF0Ft+dKrlLukI+/c9ENo+TvlTDbYFvuKPtQ9+l052rXrgKoWkDAFnvh0wTOmYn8R5f4k/jN/fZiCM1tQx9jQQ4ANhqG4hiL0qIFTGViG9DKB7GYzgubnpofgYRwO+DFjh0Zin2m4b/97EDkXkc+f6xYAPX0KK2I/7fUQuwzuwo/L3AkcjugPNixC8cHf0FyPjWlItmLxWw4Ou9YsQCr5fijMGoD/zpdRy95HRysyXA74MWOnscpO4j2y3HAVisw85hX5+AFBRSHt4ShfLFkIMXTqyKFc46xdzQM6XbAi702a7sy04J0+feReMFKp5q9esYLCqAZYw/k14E/xcLLsFElaornTuJB0svMuJINy8xkIYuL+xPAlWRceH6+HX7THJ0djLUom46zREu7tTkxwmf/FdOZ/sh6Q8qvEAiHpm4PJ4a/doJe0gH1t+aHRgCzOvBvJedEK5OFE5jpm4AGP2a8Dxe3gGJ/pAutug9Gp6he92CsSsWBaEcxGx0FHytmIpuqGkOpldqNYQK8cSoXvd+xLxXADw0kf6UkJNFtdo5MOgaLjiQOQHcn+A6h5NuL2s0qsC2LOM75PcF3yr5STuBSAcGG+meA14K/CI21HcS4LBT6tv0QAh8Dr5l93AhZzG5ZJ4VxAqdZUEl9z7WJ4aN+svMvwHHL21UKTd1mqvChH7/Za5xzXBBKrUcB0TQ+Ulgkfbi/H/YT5EptrGzsEK7tR1B7ln9BBwckYfMiuSqklSznIuoIIOM42MQO+QnduCoFCI0bpkzjCjddHPN/F+2Yu+sd9bKNpVwHhbS3LluK/0zgfwD0xYI5dXuzlQAAAABJRU5ErkJggg==');
  }

  div.callout-warning.callout-style-default .callout-title {
    background-color: #fcefdc
  }

  div.callout-tip {
    border-left-color: #02b875 !important;
  }

  div.callout-tip .callout-icon::before {
    background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAAgCAYAAABzenr0AAAAAXNSR0IArs4c6QAAAERlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAA6ABAAMAAAABAAEAAKACAAQAAAABAAAAIKADAAQAAAABAAAAIAAAAACshmLzAAADr0lEQVRYCe1XTWgTQRj9ZjZV8a9SPIkKgj8I1bMHsUWrqYLVg4Ue6v9BwZOxSYsIerFao7UiUryIqJcqgtpimhbBXoSCVxUFe9CTiogUrUp2Pt+3aUI2u5vdNh4dmMzOzHvvezuz8xNFM0mjnbXaNu1MvFWRXkXEyE6aYOYJpdW4IXuA4r0fo8qqSMDBU0v1HJUgVieAXxzCsdE/YJTdFcVIZQNMyhruOMJKXYFoLfIfIvVIMWdsrd+Rpd86ZmyzzjJmLStqRn0v8lzkb4rVIXvnpScOJuAn2ACC65FkPzEdEy4TPWRLJ2h7z4cArXzzaOdKlbOvKKX25Wl00jSnrwVxAg3o4dRxhO13RBSdNvH0xSARv3adTXbBdTf64IWO2vH0LT+cv4GR1DJt+DUItaQogeBX/chhbTBxEiZ6gftlDNXTrvT7co4ub5A6gp9HIcHvzTa46OS5fBeP87Qm0fQkr4FsYgVQ7Qg+ZayaDg9jhg1GkWj8RG6lkeSacrrHgDaxdoBiZPg+NXV/KifMuB6//JmYH4CntVEHy/keA6x4h4CU5oFy8GzrBS18cLJMXcljAKB6INjWsRcuZBWVaS3GDrqB7rdapVIeA+isQ57Eev9eCqzqOa81CY05VLd6SamW2wA2H3SiTbnbSxmzfp7WtKZkqy4mdyAlGx7ennghYf8voqp9cLSgKdqNfa6RdRsAAkPwRuJZNbpByn+RrJi1RXTwdi8RQF6ymDwGMAtZ6TVE+4uoKh+MYkcLsT0Hk8eAienbiGdjJHZTpmNjlbFJNKDVAp2fJlYju6IreQxQ08UJDNYdoLSl6AadO+fFuCQqVMB1NJwPm69T04Wv5WhfcWyfXQB+wXRs1pt+nCknRa0LVzSA/2B+a9+zQJadb7IyyV24YAxKp2Jqs3emZTuNnKxsah+uabKbMk7CbTgJx/zIgQYErIeTKRQ9yD9wxVof5YolPHqaWo7TD6tJlh7jQnK5z2n3+fGdggIOx2kaa2YI9QWarc5Ce1ipNWMKeSG4DysFF52KBmTNMmn5HqCFkwy34rDg05gDwgH3bBi+sgFhN/e8QvRn8kbamCOhgrZ9GJhFDgfcMHzFb6BAtjKpFhzTjwv1KCVuxHvCbsSiEz4CANnj84cwHdFXAbAOJ4LTSAawGWFn5tDhLMYz6nWeU2wJfIhmIJBefcd/A5FWQWGgrWzyORZ3Q6HuV+Jf0Bj+BTX69fm1zWgK7By1YTXchFDORywnfQ7GpzOo6S+qECrsx2ifVQAAAABJRU5ErkJggg==');
  }

  div.callout-tip.callout-style-default .callout-title {
    background-color: #ccf1e3
  }

  div.callout-caution {
    border-left-color: #fd7e14 !important;
  }

  div.callout-caution .callout-icon::before {
    background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAAgCAYAAABzenr0AAAAAXNSR0IArs4c6QAAAERlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAA6ABAAMAAAABAAEAAKACAAQAAAABAAAAIKADAAQAAAABAAAAIAAAAACshmLzAAACV0lEQVRYCdVWzWoUQRCuqp2ICBLJXgITZL1EfQDBW/bkzUMUD7klD+ATSHBEfAIfQO+iXsWDxJsHL96EHAwhgzlkg8nBg25XWb0zIb0zs9muYYWkoKeru+vn664fBqElyZNuyh167NXJ8Ut8McjbmEraKHkd7uAnAFku+VWdb3reSmRV8PKSLfZ0Gjn3a6Xlcq9YGb6tADjn+lUfTXtVmaZ1KwBIvFI11rRXlWlatwIAAv2asaa9mlB9wwygiDX26qaw1yYPzFXg2N1GgG0FMF8Oj+VIx7E/03lHx8UhvYyNZLN7BwSPgekXXLribw7w5/c8EF+DBK5idvDVYtEEwMeYefjjLAdEyQ3M9nfOkgnPTEkYU+sxMq0BxNR6jExrAI31H1rzvLEfRIdgcv1XEdj6QTQAS2wtstEALLG1yEZ3QhH6oDX7ExBSFEkFINXH98NTrme5IOaaA7kIfiu2L8A3qhH9zRbukdCqdsA98TdElyeMe5BI8Rs2xHRIsoTSSVFfCFCWGPn9XHb4cdobRIWABNf0add9jakDjQJpJ1bTXOJXnnRXHRf+dNL1ZV1MBRCXhMbaHqGI1JkKIL7+i8uffuP6wVQAzO7+qVEbF6NbS0LJureYcWXUUhH66nLR5rYmva+2tjRFtojkM2aD76HEGAD3tPtKM309FJg5j/K682ywcWJ3PASCcycH/22u+Bh7Aa0ehM2Fu4z0SAE81HF9RkB21c5bEn4Dzw+/qNOyXr3DCTQDMBOdhi4nAgiFDGCinIa2owCEChUwD8qzd03PG+qdW/4fDzjUMcE1ZpIAAAAASUVORK5CYII=');
  }

  div.callout-caution.callout-style-default .callout-title {
    background-color: #ffe5d0
  }

  </style>
  <style type="text/css">
    .reveal div.sourceCode {
      margin: 0;
      overflow: auto;
    }
    .reveal div.hanging-indent {
      margin-left: 1em;
      text-indent: -1em;
    }
    .reveal .slide:not(.center) {
      height: 100%;
    }
    .reveal .slide.scrollable {
      overflow-y: auto;
    }
    .reveal .footnotes {
      height: 100%;
      overflow-y: auto;
    }
    .reveal .slide .absolute {
      position: absolute;
      display: block;
    }
    .reveal .footnotes ol {
      counter-reset: ol;
      list-style-type: none; 
      margin-left: 0;
    }
    .reveal .footnotes ol li:before {
      counter-increment: ol;
      content: counter(ol) ". "; 
    }
    .reveal .footnotes ol li > p:first-child {
      display: inline-block;
    }
    .reveal .slide ul,
    .reveal .slide ol {
      margin-bottom: 0.5em;
    }
    .reveal .slide ul li,
    .reveal .slide ol li {
      margin-top: 0.4em;
      margin-bottom: 0.2em;
    }
    .reveal .slide ul[role="tablist"] li {
      margin-bottom: 0;
    }
    .reveal .slide ul li > *:first-child,
    .reveal .slide ol li > *:first-child {
      margin-block-start: 0;
    }
    .reveal .slide ul li > *:last-child,
    .reveal .slide ol li > *:last-child {
      margin-block-end: 0;
    }
    .reveal .slide .columns:nth-child(3) {
      margin-block-start: 0.8em;
    }
    .reveal blockquote {
      box-shadow: none;
    }
    .reveal .tippy-content>* {
      margin-top: 0.2em;
      margin-bottom: 0.7em;
    }
    .reveal .tippy-content>*:last-child {
      margin-bottom: 0.2em;
    }
    .reveal .slide > img.stretch.quarto-figure-center,
    .reveal .slide > img.r-stretch.quarto-figure-center {
      display: block;
      margin-left: auto;
      margin-right: auto; 
    }
    .reveal .slide > img.stretch.quarto-figure-left,
    .reveal .slide > img.r-stretch.quarto-figure-left  {
      display: block;
      margin-left: 0;
      margin-right: auto; 
    }
    .reveal .slide > img.stretch.quarto-figure-right,
    .reveal .slide > img.r-stretch.quarto-figure-right  {
      display: block;
      margin-left: auto;
      margin-right: 0; 
    }
  </style>
  <style>
  .v-center-container {
    display: flex;
    justify-content: center;
    align-items: center;
  }
  </style>
</head>
<body class="quarto-light">
  <div class="reveal">
    <div class="slides">

<section id="title-slide" class="quarto-title-block center">
  <h1 class="title"><p><b>外国書購読 Day6</b> <br> <span style="color: #282A36; "> Chapter 5. <br> Analytical Review: Technical Analysis </span></p></h1>

<div class="quarto-title-authors">
<div class="quarto-title-author">
<div class="quarto-title-author-name">
Soichi Matsuura 
</div>
</div>
</div>

  <p class="date">2024-11-13</p>
</section>
<section>
<section id="analytical-review" class="title-slide slide level1 center">
<h1>Analytical Review</h1>
<!-- ## 分析的手続 -->
</section>
<section id="analytical-procedures" class="slide level2">
<h2>Analytical Procedures</h2>
<ul>
<li><strong>Analytical procedures</strong> (分析的手続) <sup>1</sup> are evaluations of financial information made by a study of plausible relationships between both financial and non-financial data.</li>
<li>Analytical procedures are used in all stages of the audit including planning, <em>substantive testing</em> (実証手続) <sup>2</sup>, and final review.</li>
<li>It serves as a vital planning function in the entirety of the audit procedures.</li>
</ul>
<aside class="notes">
<p>分析的手続は、財務データと非財務データの両者間の関係を調べることによって行われる財務情報の評価である。 分析的手続は、監査計画、実証的手続、最終的なレビューなど、監査のすべての段階で使用される。 それは監査手続全体の重要な計画機能として機能する。</p>
<p>分析的手続は，監査人が財務データ相互間（売上総利益率分析など）又は財務データ以外のデータと財務データとの間（一人当たりの人件費分析など）に存在すると推定される関係を分析・検討することによって，財務情報を評価する監査手続である。また，分析的手続には，他の関連情報と矛盾する，又は監査人の推定値と大きく乖離する変動や関係についての追加的な調査も含まれる(CPAテキスト)。</p>
<p>関連する財務または非財務データに基づいて、帳簿金額に対する期待値を算出する。 期待値の算出に使用するデータは、例えば公表された統計資料などのように、監査対象金額から独立し、合理的に妥当と認められるデータでなければならない。そうでない場合にはそのデータを別途検証することが必要となる。 期待値と帳簿金額の差異で理由の説明なしに受け入れてよい最大値、すなわち「許容金額」を決定する。</p>
<style type="text/css">
        span.MJX_Assistive_MathML {
          position:absolute!important;
          clip: rect(1px, 1px, 1px, 1px);
          padding: 1px 0 0 0!important;
          border: 0!important;
          height: 1px!important;
          width: 1px!important;
          overflow: hidden!important;
          display:block!important;
      }</style></aside>
<aside><ol class="aside-footnotes"><li id="fn1"><p>財務データ相互間又は財務データと非財務データとの間に存在すると推定される関係を分析・検討することによって、財務情報を評価することをいう。</p></li><li id="fn2"><p>勘定科目における重要な虚偽記載を検出する目的で行う検証のことをいう。</p></li></ol></aside></section>
<section id="analytical-review-procedures" class="slide level2">
<h2>Analytical Review Procedures</h2>
<ul>
<li><strong>Analytical review procedures</strong> are applied at several points in a firm’s audit to establish “<mark class="mark">plausible relationships among both financial and non-financial data</mark>” as a cost-effective test of the conclusions derived from fieldwork.</li>
<li>These procedures compare financial and organization information of an audit client such as budgets, industry news, forecasts, market information, non-financial information, bank and tax information.</li>
<li>Their goal is to <mark class="mark">flag “exceptional” situations</mark> that would require more extensive auditing, and commensurately expand the scope of auditing for these accounts.</li>
</ul>
<aside class="notes">
<p>分析的レビュー手続は、現場調査から導かれた結論の費用対効果のテストとして、「財務データと非財務データの両者間の妥当な関係」を確立するために、会社の監査のいくつかのポイントで適用される。 これらの手続きは、予算、業界ニュース、会社のガイダンスとニュースリリース、予測、市場情報、議事録や契約などの非財務情報、および銀行や税金の情報など、監査クライアントの財務情報と組織情報を比較する。 その目的は、より広範囲な監査を必要とする「例外的な」状況をフラグ付けし、それらの勘定科目の監査範囲を相応に拡大することである。</p>
<style type="text/css">
        span.MJX_Assistive_MathML {
          position:absolute!important;
          clip: rect(1px, 1px, 1px, 1px);
          padding: 1px 0 0 0!important;
          border: 0!important;
          height: 1px!important;
          width: 1px!important;
          overflow: hidden!important;
          display:block!important;
      }</style></aside>
</section>
<section id="assisting-in-audit-planning" class="slide level2">
<h2>Assisting in Audit Planning</h2>
<ul>
<li>Prior to interim and substantive fieldwork, they play an essential role in assisting the auditor to “adequately plan work” and “obtain a sufficient understanding of the entity and its environment.”</li>
<li>Prior to fieldwork, <mark class="mark">auditors have very little access to client transactions</mark> (which may not have yet occurred) and analytical procedures based on industry and economy-wide news offer cost-effective tools for audit planning.</li>
</ul>
<aside class="notes">
<p>中間期間と実質的な現場調査の前に、それらは監査人が「適切に仕事を計画する」ことと「企業とその環境を十分に理解する」ことを支援する上で重要な役割を果たす。 フィールドワークの前に、監査人はクライアントの取引にほとんどアクセスできず（まだ発生していないかもしれない）、業界や経済全体のニュースに基づく分析手続きは、監査計画のための費用対効果の高いツールを提供する。</p>
<style type="text/css">
        span.MJX_Assistive_MathML {
          position:absolute!important;
          clip: rect(1px, 1px, 1px, 1px);
          padding: 1px 0 0 0!important;
          border: 0!important;
          height: 1px!important;
          width: 1px!important;
          overflow: hidden!important;
          display:block!important;
      }</style></aside>
</section>
<section id="audit-engagement" class="slide level2">
<h2>Audit engagement</h2>
<ul>
<li>The auditor’s “<mark class="mark">analytical review of significant ratios and trends</mark>” relies on historical ratios which provide the basis for assessing risk and planning the audit (AICPA, 1988).</li>
<li>AICPA statement <strong>AU Section 329 </strong> states that <em>analytical procedures are used throughout the audit engagement</em> - in audit planning, execution, and review - and specifically at three times during the audit:</li>
</ul>
<aside class="notes">
<p>監査人の「重要な比率とトレンドの分析的レビュー」は、リスクの評価と監査の計画の基礎となる過去の財務比率に依存している(AICPA、1988)。 AICPAの声明AUセクション329<sup>1</sup>は、分析的手続が監査計画、実行、レビューのすべての段階で使用され、特に監査の3回の時点で使用されることを述べている。</p>
<style type="text/css">
        span.MJX_Assistive_MathML {
          position:absolute!important;
          clip: rect(1px, 1px, 1px, 1px);
          padding: 1px 0 0 0!important;
          border: 0!important;
          height: 1px!important;
          width: 1px!important;
          overflow: hidden!important;
          display:block!important;
      }</style></aside>
<aside><ol class="aside-footnotes"><li id="fn3"><p>PCAOBの監査基準の1つで、AU section 329 「Substantive Analytical Procedures」のこと。</p></li></ol></aside></section>
<section id="three-times-during-the-audit" class="slide level2">
<h2>Three Times During the Audit</h2>
<ol type="1">
<li>To assist in planning the nature, timing, and extent of other auditing procedures;</li>
<li>As a substantive test to obtain <strong>audit evidence</strong> about assertions related to account balances or classes of transactions</li>
<li>As an overall review of the financial information in the final review stage of the audit.</li>
</ol>
<p>The AICPA couches its pronouncements on analytical procedures in the language of statistics, borrowing statistical terms such as “<em>precision</em>” (精度), “<em>likelihood</em>” (尤度), and “<em>expectation</em>” (期待値) in describing analytical tests.</p>
<aside class="notes">
<p>1.その他の監査手続きの性質、タイミング、範囲を計画するのに役立つ 2.勘定残高や取引のクラスに関連する主張についての監査証拠を取得するための実証的なテストとして 3.監査の最終レビュー段階での財務情報の総合的なレビューとして</p>
<p>AICPAは、分析手続きに関するその声明を統計学の言葉で表現し、分析的テストを説明する際に「精度」「尤度」「期待値」といった統計学用語を借用している。</p>
<style type="text/css">
        span.MJX_Assistive_MathML {
          position:absolute!important;
          clip: rect(1px, 1px, 1px, 1px);
          padding: 1px 0 0 0!important;
          border: 0!important;
          height: 1px!important;
          width: 1px!important;
          overflow: hidden!important;
          display:block!important;
      }</style></aside>
</section>
<section id="audit-technologies" class="slide level2">
<h2>Audit Technologies</h2>
<ul>
<li>Audit technologies now use <strong>objective statistical methods</strong> to support or replace auditor judgment, making audits more cost-effective and reducing the risk of errors.</li>
<li>The modern audit approach relies on <strong>assumptions about data distributions</strong> to guide audit decisions.</li>
<li>Audits may not fully use statistical methods because financial data distributions can be complex.</li>
<li><mark class="mark">Empirical Research shows that financial data distributions vary widely between different firms and accounts</mark>.</li>
</ul>
<!-- - As audit technologies evolve, auditor judgment has been augmented or superseded by **objective statistical methods** that aim to make auditing more cost-effective, and control the risk of audit error.
- Central to the modern audit’s quasi-statistical framework are the **assumptions made about data distributions** in framing and implementing audit decisions.
- A likely reason that audits have not embraced statistical approaches more completely is the complexity of financial data distributions. -->
<!-- - Seldom is it possible to make the standard Gaussian assumption underlying commonly used parametric statistical tests and estimators. -->
<!-- 標準的なガウス分布の仮定を行うことができることはめったになく、一般的に使用されるパラメトリックな統計的検定や推定量の背後にある仮定を行うことができることはめったにない。 -->
<!-- - Empirical research suggests that *financial data distributions vary* considerably from firm to firm and account to account. -->
<!-- , and may be multimodal, fat tailed, or otherwise difficult to use. -->
<aside class="notes">
<p>監査技術の進化に伴い、監査人の判断は、監査をより費用対効果の高いものにし、監査エラーのリスクをコントロールすることを目指す客観的な統計的手法によって着実に補完または置き換えられてきた。 近代監査の準統計的枠組みの中心には、監査決定の策定と実施においてデータ分布についての仮定がある。 統計的アプローチを完全に採用していない理由の1つは、財務データの分布の複雑さである。 実証研究は、財務データの分布が企業ごと、勘定科目ごとに大きく異なり、多峰性、ファットテール、またはその他の使用が困難なものである可能性があることを示唆している。</p>
<style type="text/css">
        span.MJX_Assistive_MathML {
          position:absolute!important;
          clip: rect(1px, 1px, 1px, 1px);
          padding: 1px 0 0 0!important;
          border: 0!important;
          height: 1px!important;
          width: 1px!important;
          overflow: hidden!important;
          display:block!important;
      }</style></aside>
</section></section>
<section>
<section id="institutional-context-of-analytical-review" class="title-slide slide level1 center">
<h1>Institutional Context of Analytical Review</h1>

</section>
<section id="aicpa-definition" class="slide level2">
<h2>AICPA Definition</h2>
<ul>
<li>The AICPA defines <strong>analytical review procedures</strong> to “…consist of <em>evaluations</em> of financial information made by a study of plausible relationships among both financial and non-financial data.”</li>
<li>Analytical procedures are used in planning the audit; as a substantive test to obtain audit evidence about assertions related to account balances or classes of transactions. <!-- and as an overall review of the financial information in the final review stage of the audit. --></li>
<li>The AICPA emphasizes that “… in some cases, <mark class="mark">analytical procedures can be more effective or efficient</mark> than tests of details for achieving particular substantive testing objectives”.</li>
</ul>
<aside class="notes">
<p>AICPAは、分析的レビュー手続を「…財務情報の評価であり、財務データと非財務データの両方の間の妥当な関係を調査することによって行われる」と定義している。 分析手続きは、監査計画に使用され、勘定残高や取引のクラスに関連する主張についての監査証拠を取得するための実証的なテストとして使用される。 AICPAは、「…いくつかの場合には、特定の実証的テスト目標を達成するために、分析手続きが詳細テストよりも効果的または効率的であることがある」と強調している。</p>
<style type="text/css">
        span.MJX_Assistive_MathML {
          position:absolute!important;
          clip: rect(1px, 1px, 1px, 1px);
          padding: 1px 0 0 0!important;
          border: 0!important;
          height: 1px!important;
          width: 1px!important;
          overflow: hidden!important;
          display:block!important;
      }</style></aside>
</section>
<section id="aicpa-guidelines" class="slide level2">
<h2>AICPA Guidelines</h2>
<ul>
<li>The AICPA’s guidelines on <em>analytical review</em> aim to help audits identify major errors in financial statements.</li>
<li>Analytical review procedures use <em>external information available</em> during audit planning. <!-- - They often rely on non-transaction data and require assumptions about the statistical traits and relevance of this data to the financial statements. --></li>
<li><strong>Analytical review</strong> includes any audit methods, qualitative or quantitative, that aren’t directly related to testing the client’s transactions or balances during control and substantive testing.</li>
<li><strong>Analytical procedures</strong> compare recorded amounts or ratios with expectations set by the auditor.</li>
</ul>
<aside class="notes">
<p>AICPAのガイドラインは、監査が財務諸表の主要な誤りを特定するのを助けることを目的としている。 分析的レビュー手続は、監査計画中に利用可能な外部情報を使用する。これらはしばしば非取引データに依存し、このデータの統計的特性と財務諸表への関連性についての仮定が必要とされる。 分析的レビューには、監査人の取引や残高のテストと直接関連しない、定性的または定量的な監査方法が含まれ，分析手続きは、監査人が設定した期待値と記録された金額または比率を比較する。</p>
<style type="text/css">
        span.MJX_Assistive_MathML {
          position:absolute!important;
          clip: rect(1px, 1px, 1px, 1px);
          padding: 1px 0 0 0!important;
          border: 0!important;
          height: 1px!important;
          width: 1px!important;
          overflow: hidden!important;
          display:block!important;
      }</style></aside>
</section>
<section id="the-nature-of-analytical-review" class="slide level2">
<h2>The nature of analytical review</h2>
<ul>
<li>Official pronouncements of the AICPA on <strong>the nature and objectives of analytical review</strong> support theoverall objectives of an audit: discovery of material errors in the financial statements.</li>
<li>Analytical review procedures flexibly and opportunistically rely on external information available at the time of planning the audit; they depend heavily on non-transaction data sources, and typically need to make explicit or implicit assumptions about the underlying statistical characteristics of such data and its relevance to the financial statements to be audited. <!-- - Analytical review procedures generally refer to any qualitative or quantitative audit methods that do not directly relate to tests of the client’s own transactions and balances during the control and substantive testing of the financial system. --> <!-- - Analytical procedures involve comparisons of recorded amounts, or ratios developed from recorded amounts, to expectations developed by the auditor. --></li>
</ul>
<aside class="notes">
<p>AICPAの公式声明は、分析的レビューの性質と目的について、監査の全体的な目的を支持しており、財務諸表の重大な誤りを発見することを目的としている。 分析的レビュー手続は、監査計画時に利用可能な外部情報に柔軟かつ機会主義的に依存し、非取引データソースに大きく依存し、通常はそのようなデータの基礎となる統計的特性と財務諸表への関連性について明示的または暗黙の仮定を行う必要がある。 分析的レビュー手続は、一般的に、財務システムのコントロールと実証的テスト中に、クライアント自身の取引や残高のテストと直接関連しない、定性的または定量的な監査方法を指す。 分析手続きには、監査人が開発した記録された金額または比率と、監査人が開発した期待値との比較が含まれる。</p>
<style type="text/css">
        span.MJX_Assistive_MathML {
          position:absolute!important;
          clip: rect(1px, 1px, 1px, 1px);
          padding: 1px 0 0 0!important;
          border: 0!important;
          height: 1px!important;
          width: 1px!important;
          overflow: hidden!important;
          display:block!important;
      }</style></aside>
</section>
<section id="aicpa" class="slide level2">
<h2>AICPA</h2>
<p>According to the AICPA:</p>
<blockquote>
<p>“The auditor develops such expectations by identifying and using plausible relationships that are reasonably expected to exist based on the auditor’s understanding of the client. The expected effectiveness and efficiency of an analytical procedure in identifying potential misstatements depends on, among other things, the precision of the expectation. The expectation should be precise enough to provide the desired level of assurance that differences that may be potential material misstatements, individually or when aggregated with other misstatements, would be identified for the auditor to investigate. As expectations become more precise, the range of expected differences becomes narrower and, accordingly, the likelihood increases that significant differences from the expectations are due to misstatements. Expectations developed at a detailed level generally have a greater chance of detecting misstatement of a given amount than do broad comparisons. Monthly amounts will generally be more effective than annual amounts and comparisons by location or line of business usually will be more effective than company-wide comparisons.”</p>
</blockquote>
<aside class="notes">
<p>監査人は，クライアントに関する理解に基づいて合理的に存在すると予想される関係を特定し，使用することによって，そのような期待値を開発する。 分析手続きが潜在的な誤記載を特定する際の期待される効果と効率は，期待値の精度に依存する。 期待値は，監査人が調査するために潜在的な重大な誤記載として個別にまたは他の誤記載と集計された場合に特定される可能性がある差異を提供するための所望の保証レベルを提供するために十分に精密であるべきである。 期待値がより精密になるにつれて，期待される差異の範囲は狭くなり，その結果，期待値からの重大な差異が誤記載に起因する可能性が高まる。 詳細レベルで開発された期待値は，広範な比較よりも特定の金額の誤記載を検出する可能性が高い。 月次金額は一般的に年次金額よりも効果的であり，地域や事業部門ごとの比較は通常，企業全体の比較よりも効果的である。</p>
<style type="text/css">
        span.MJX_Assistive_MathML {
          position:absolute!important;
          clip: rect(1px, 1px, 1px, 1px);
          padding: 1px 0 0 0!important;
          border: 0!important;
          height: 1px!important;
          width: 1px!important;
          overflow: hidden!important;
          display:block!important;
      }</style></aside>
</section>
<section id="sufficiency-competent-evidence" class="slide level2">
<h2>Sufficiency Competent Evidence</h2>
<ul>
<li>Analytical review procedures have been in use at least since the 1940s, and were introduced into the authoritative auditing literature in 1970 with the <em>promulgation</em> (公布) of Statement on Auditing Procedures (SAP) No.&nbsp;54 (AU section 320.70).</li>
<li>This Statement specified that <strong>sufficient competent evidential matter</strong> (十分にして適格な証拠) “is obtained through two general classes of auditing procedures:</li>
</ul>
<ol type="1">
<li><strong>Tests of details</strong> of transactions and balances (詳細テスト)</li>
<li><strong>Analytical review</strong> of significant ratios and trends. (分析的実証手続)”</li>
</ol>
<aside class="notes">
<p>分析的レビュー手続は、少なくとも1940年代以来使用されており、1970年に監査手続声明（SAP）第54号（AUセクション320.70）の公布によって権威ある監査文献に導入された。 この声明は、「十分で適格な証拠は、2つの一般的な監査手続きを通じて取得される」と規定している。</p>
<ol type="1">
<li>取引と残高の詳細テスト</li>
<li>重要な比率とトレンドの分析的レビュー</li>
</ol>
<style type="text/css">
        span.MJX_Assistive_MathML {
          position:absolute!important;
          clip: rect(1px, 1px, 1px, 1px);
          padding: 1px 0 0 0!important;
          border: 0!important;
          height: 1px!important;
          width: 1px!important;
          overflow: hidden!important;
          display:block!important;
      }</style></aside>
</section>
<section class="slide level2">

<ul>
<li>Statistical terms such as “<em>precision</em>,” “<em>likelihood</em>,” and “<em>expectation</em>” in the audit context are presented but not further defined in the AICPA’s pronouncements.</li>
<li>But statistical tests commonly used by auditors do provide specific and practical definitions of these terms.</li>
<li>Additionally, “<strong>assurance</strong>” as used in the context of analytical review for substantive tests has been linked in SAS 56 to the “<strong>statistical confidence</strong>” that the auditor has in his or her tests. <!-- - SAS No. 56 required auditors to use analytical procedures to assist in planning the nature, timing, and extent of other auditing rocedures and as an overall review of the financial statements in the final review of the audit. --> <!-- - The Statement also recommended that analytical procedures be used "as a substantive test to obtain evidence." --></li>
</ul>
<aside class="notes">
<p>監査における制度や尤度、期待値のような統計用語は、AICPAの声明には提示されているが、さらに定義されていない。 しかし、監査人が一般的に使用する統計的検定は、これらの用語の具体的で実用的な定義を提供している。 さらに、実証的テストの文脈で使用される「保証」という用語は、監査人がテストに対して持つ「統計的信頼性」と関連付けられている。 この声明は、分析手続きを「証拠を得るための実証的なテストとして使用することを推奨している。」 SAS No.&nbsp;56は、監査人に対して、他の監査手続きの性質、タイミング、範囲を計画するのに分析手続きを使用するよう求め、監査の最終レビューでの財務諸表の総合的なレビューとして使用するよう求めた。 このステートメントもまた，分析的手続きを「証拠を得るための実証的なテストとして使用することを推奨している。」</p>
<style type="text/css">
        span.MJX_Assistive_MathML {
          position:absolute!important;
          clip: rect(1px, 1px, 1px, 1px);
          padding: 1px 0 0 0!important;
          border: 0!important;
          height: 1px!important;
          width: 1px!important;
          overflow: hidden!important;
          display:block!important;
      }</style></aside>
</section>
<section id="related-research" class="slide level2">
<h2>Related Research</h2>
<ul>
<li>Over the last half century, research in many areas has expanded the statistical toolset available to auditors for analytical procedures.</li>
<li>Research assessing account values and transaction flows using statistical time-series methods appear. <!-- in, e.g., Asare and Wright (1997a,b), Kinney and Uecker (1982), Kinney (1979), Loebbecke and Steinbart (1987), Mueller and Anderson (2002), Nelson (1994), Stringer (1975). --></li>
<li>The practical application of various judgmental or hybrid approaches has been investigated through an equally rich stream of behavioral audit decision research. <!-- , which has appeared in, e.g., Ameen and Strawser (1994), Anderson et al. (1995), Anderson et al. (1994), Biggs et al. (1988), Kogan et al. (2010), Libby (1985).  --></li>
<li><mark class="mark">Statistical approaches have been augmented with computationally intensive machine learning approaches</mark> and this is currently an active area of development in the audit industry. <!-- ; e.g., see, Wilson and Colbert (1989), Coakley (1995), Koskivaara (2004a), Koskivaara (2006), Coakley and Brown (1993), Knechel (1988), Coakley and Brown (1993), Koskivaara and Back (2007), Koskivaara (2004b). --></li>
</ul>
<aside class="notes">
<p>過去半世紀にわたり、多くの分野での研究が、監査人が分析手続きに使用できる統計ツールセットを拡大してきた。 統計的時系列法を用いた勘定価値や取引フローの評価を行った研究が登場している。 さまざまな判断的またはハイブリッドアプローチの実用的な適用は、同様に豊富な行動監査意思決定研究の流れを通じて調査されてきた。 統計的アプローチは、計算量の多い機械学習アプローチで補完され、現在は監査業界での開発の活発な分野となっている。</p>
<style type="text/css">
        span.MJX_Assistive_MathML {
          position:absolute!important;
          clip: rect(1px, 1px, 1px, 1px);
          padding: 1px 0 0 0!important;
          border: 0!important;
          height: 1px!important;
          width: 1px!important;
          overflow: hidden!important;
          display:block!important;
      }</style></aside>
</section>
<section class="slide level2">

<ul>
<li>During the planning stage, the analytical review procedure enhances the auditor’s understanding of the client’s business and helps in identifying significant transactions and events that have occurred since the last audit date.</li>
<li>It also identifies unusual transactions and events, amounts, ratios, or trends that might be significant to the financial statements and may represent specific risks relevant to the audit.</li>
<li>Risk assessment procedures require understanding the entity and its environment.</li>
</ul>
<aside class="notes">
<p>計画段階では、分析的レビュー手続は、監査人がクライアントのビジネスを理解し、前回の監査日から発生した重要な取引やイベントを特定するのに役立ちます。 また、財務諸表に重要であり、監査に関連する特定のリスクを表す可能性のある異常な取引やイベント、金額、比率、トレンドを特定します。 リスク評価手続きには、企業とその環境を理解することが必要です。</p>
<style type="text/css">
        span.MJX_Assistive_MathML {
          position:absolute!important;
          clip: rect(1px, 1px, 1px, 1px);
          padding: 1px 0 0 0!important;
          border: 0!important;
          height: 1px!important;
          width: 1px!important;
          overflow: hidden!important;
          display:block!important;
      }</style></aside>
</section>
<section id="planning-stage" class="slide level2">
<h2>Planning Stage</h2>
<ul>
<li>The whole process assists the auditor in planning the nature, extent and timing of other auditing procedures.</li>
<li>Measuring risks to identify significant areas requiring the <strong>auditor’s attention</strong> is also covered here.</li>
<li>Results of the analytical procedures performed during the planning stage help identify risks that may, based on the auditor’s judgment, require special audit consideration.</li>
<li>Examples of these are those that are considered as non-routine, unusual and complex transactions, business risks that may result in material misstatement, fraud risk, significant related party transactions, accounting estimates and principles.</li>
</ul>
<aside class="notes">
<p>全体的なプロセスは、他の監査手続きの性質、範囲、タイミングを計画するのに監査人を支援します。 監査人の注意を必要とする重要な領域を特定するためのリスクの測定もここでカバーされています。 計画段階で実施された分析手続きの結果は、監査人の判断に基づいて特別な監査検討を必要とする可能性のあるリスクを特定するのに役立ちます。 これには、非ルーチン、異常、複雑な取引、重大な誤記載をもたらす可能性のあるビジネスリスク、詐欺リスク、重要な関連当事者取引、会計上の見積りと原則などが含まれます。</p>
<style type="text/css">
        span.MJX_Assistive_MathML {
          position:absolute!important;
          clip: rect(1px, 1px, 1px, 1px);
          padding: 1px 0 0 0!important;
          border: 0!important;
          height: 1px!important;
          width: 1px!important;
          overflow: hidden!important;
          display:block!important;
      }</style></aside>
</section>
<section class="slide level2">

<ul>
<li><p>Analytical procedures include the review of data aggregated at high levels, such as comparing financial statements to budgeted or anticipated results. Generally, financial data are used, but relevant non-financial data (e.g., number of employees, square footage of selling space, or volume of good produced) may also be considered.</p></li>
<li><p>Analytical review procedures typically include a review of the current and prior year’s financial statements and the current year’s budget. Comparisons are made between the current year’s actual and budgeted financial statements. There must also be an analysis to compare the current and previous year’s actual financial statements to test for internal consistency.</p></li>
</ul>
<aside class="notes">
<p>分析的手続は、予算や予想される結果と比較するなど、高いレベルで集約されたデータのレビューを含みます。一般的には財務データが使用されますが、従業員数、販売スペースの平方フィート、生産された商品の数量などの関連する非財務データも考慮される場合があります。</p>
<p>分析的レビュー手続には、通常、前年と当年の財務諸表と当年の予算のレビューが含まれます。当年度の実績と予算の財務諸表を比較します。また、内部整合性をテストするために、当年度と前年度の実績の財務諸表を比較するための分析も行われます。</p>
<style type="text/css">
        span.MJX_Assistive_MathML {
          position:absolute!important;
          clip: rect(1px, 1px, 1px, 1px);
          padding: 1px 0 0 0!important;
          border: 0!important;
          height: 1px!important;
          width: 1px!important;
          overflow: hidden!important;
          display:block!important;
      }</style></aside>
</section>
<section id="expectations" class="slide level2">
<h2>Expectations</h2>
<ul>
<li>Auditors must develop independent expectations for comparison to recorded amounts.</li>
<li>Examples of these expectations include financial information for comparable prior periods, anticipated results from budgets and forecasts, relationship among data within the current period, industry norms and relationships of financial data with non-financial information.</li>
<li>Income statement accounts have <strong>more predictable</strong> relationships compared to balance sheet accounts.</li>
<li>In addition, accounts based on management discretion such as bonus, other employee benefits, and other related expenses are less predictable.</li>
</ul>
</section>
<section class="slide level2">

<ul>
<li><p>In performing analytical procedures, the auditor may also use financial analysis ratios which may be classified as liquidity ratios, activity ratios, profitability ratios, investors ratios, and long-term debt paying ability ratios.</p></li>
<li><p>Additional analyses, such as common size analysis (vertical and horizontal), analysis of industry statistics, and trend analysis, may also be valuable depending on the nature of transactions.</p></li>
<li><p>Recent years have seen an increased emphasis on the use of analytical procedures, as it helps identify significant audit risks without relying on the client’s own attestations.</p></li>
<li><p>However, analytical review comparisons are based on expected plausible relationships among data.</p></li>
</ul>
</section>
<section id="limitations" class="slide level2">
<h2>Limitations</h2>
<ul>
<li><strong>Limitations</strong> exist in the use of analytical procedures because differences noted do not necessarily indicate errors or fraud, but simply the need for further analysis and investigation—specifically of the client’s own documentation, as well as entities doing business with the client.</li>
<li>Changes in an account and in accounting principles, and inherent differences between industry norms and the client all contribute to fluctuations in expected amounts.</li>
<li>Hence, the auditor needs to exercise professional judgment in analyzing the results.</li>
<li>Analytical procedures are usually designed to point out audit areas that are indicative of potential risks, need special emphasis or additional attention. Thus there are a number of practical guidelines that should dictate their application:</li>
</ul>
</section>
<section class="slide level2">

<ol type="1">
<li>Avoid mechanical computations and comparisons. Instead, determine trends, ratios, and relationships that are most relevant to the business. Develop expectations on plausible or predictable relationships based on historical patterns in the operation of the business. These will serve as benchmarks for comparisons to determine unusual or unexpected changes.</li>
<li>Unusual or unexpected relationships would be characterized by anything out-of-the-ordinary or those that do not make sense or at odds with comparable industry data</li>
<li>For nonprofit organizations, analytical procedures should lead to information regarding changes in programs, nature of activities, grantors, fund-raising events, political environment, and the impact of the economy in the collection of promises to give.</li>
</ol>
</section>
<section class="slide level2">

<p>Some of the typical analytical procedures applied are:</p>
<ol type="1">
<li>Compare receipts from annual fund-raising drives to total support. This can help spot issues with revenue recognition.</li>
<li>Compare support and revenue sources over the past 5 years. This may reveal revenue sources that need closer review.</li>
<li>Evaluate the ratio of fund-raising expenses to contribution revenue. A low expense compared to recorded revenue might indicate overstated revenue. Little or no fund-raising expense alongside contribution revenue might suggest underreported expenses to keep expense ratios favorable.</li>
</ol>
<!--
1. Comparison of receipts from annual fund-raising drives to total support. This procedure could help detect improper
   revenue recognition.
2. Comparison of support and revenue by source for the past 5 years. This procedure may identify revenue sources that
   require increased attention.
3. Evaluation of the ratio of fund-raising expenses to contribution revenues. This could also help detect improper revenue
   recognition. If the expense is significantly lower than the amount needed to produce recorded revenue, it might indicate
   overstating of revenues. If there is little or no fund-raising expense while reporting contribution revenue, this might
   indicate underreported expenses to maintain favorable expense ratios.
 -->
</section>
<section class="slide level2">

<ol start="4" type="1">
<li>Scan financial information for unusual changes, unexpected patterns, or major fluctuations that might highlight areas with a higher risk of error. For instance, a big increase in notes payable could suggest new loans, while significant shifts in total net assets or in different asset classes (unrestricted, temporarily restricted, permanently restricted) may indicate negative trends or concerns about the organization’s viability.</li>
<li>Obtaining information information from prior audits. This enables the auditor to make preliminary judgments about the inherent and control risks about material accounts and to focus on substantive procedures to reduce the detection risk.</li>
</ol>
<!--
4. Scanning of financial information to identify unusual changes, unexpected relationships, and major fluctuations which
   could indicate specific areas of risk of material misstatement. For example, a large increase in notes payable might indicate
   new loans acquired. Also, significant changes in total net assets or changes in net assets by class (unrestricted, temporarily
   restricted, permanently restricted) might indicate unfavorable trends or going concern problems.
5. Obtaining information information from prior audits. This enables the auditor to make preliminary judgments about the
   inherent and control risks about material accounts and to focus on substantive procedures to reduce the detection risk.
 -->
</section></section>
<section>
<section id="technical-measures-of-a-companys-financial-health" class="title-slide slide level1 center">
<h1>Technical Measures of a Company’s Financial Health</h1>

</section>
<section id="technical-metrics" class="slide level2">
<h2>Technical Metrics</h2>
<ul>
<li>Analytical review uses both <em>internal and external data sources</em>.</li>
<li>Many methods exist for gathering firm intelligence, reflecting the growth of online financial analysis resources.</li>
<li>Internal metrics like accounting equations and ratios were traditionally key for spotting irregularities, risks, and weaknesses.</li>
<li>In the past decade, websites, forums, social media, and databases provide richer insights than basic ratios.</li>
<li><em>Financial analysts</em> now monitor online sources, offering real-time firm health assessments beyond traditional, retrospective accounting metrics.</li>
</ul>
<!--
Analytical review information is obtained from a variety of sources, internal and external to the firm.
There are a wealth of methods available for firm intelligence gathering, a reflection of the rapid growth of Internet resources on financial analysis and firm intelligence.
I will start with a brief analysis of internal technical metrics for analytical review—primarily accounting, equations and ratios.
These traditionally were the main source of information, alerting the auditor to potential irregularities and accounting risks, as well as control weaknesses.
Over the past decade, new information has become available on websites, forums, social network feeds, and databases which is arguably much more informative than crude ratio metrics.
Financial analysts routinely monitor the Internet for firm related information, which has become much more useful in assessing firm health and problems than the limited, retrospective metrics reported by accountants.
-->
</section>
<section id="fundamental-equations" class="slide level2">
<h2>Fundamental Equations</h2>
<!-- Technical metrics have their roots in `Al-Khwārizmi`’s method (from The Compendious Book on Calculation by Completion and Balancing, c.825) which  -->
<p>Introduced algebra to accounting leading to the three fundamental equations:</p>
<ol type="1">
<li><strong>The Bookkeeping equation</strong> (double-entry) for error control,</li>
<li>“Real” accounts (実在勘定) for tracking wealth; this is called the “basic accounting equation.” An elaborate form of this equation is presented in a balance sheet which lists all assets, liabilities, and equity, as well as totals to ensure that it balances, and</li>
<li>“Nominal” accounts (名目勘定) for tracking activity; closing out these accounts at year-end yields the net income amount, which arguably is the most important single statistic produced in the accounting process from a stockholders perspective.</li>
</ol>
</section>
<section id="technical-metrics-1" class="slide level2">
<h2>Technical Metrics</h2>
<ul>
<li>Technical metrics in analytical review involve an exploration of these fundamental equations and their components, both in current and prior years’ statements and in the context of information obtained from interviews, news, and other sources, with the aim of identifying areas of risk in the current year’s audit.</li>
<li>Ratio analysis provides one of the specific ways that these relationships may be expanded to compare with other firms in an industry or between accounting periods for the same firm.</li>
<li>A financial ratio (or accounting ratio) is a relative magnitude of two selected numerical values taken from an enterprise’s financial statements.</li>
</ul>
</section>
<section id="financial-ratios" class="slide level2">
<h2>Financial Ratios</h2>
<ul>
<li>Often used in accounting, there are many standard ratios used to try to evaluate the overall financial condition of a corporation or other organization.</li>
<li>Financial ratios may be used by managers within a firm, by current and potential shareholders (owners) of a firm, and by a firm’s creditors.</li>
<li>Financial analysts use financial ratios to compare the strengths and weaknesses in various companies.</li>
<li>If shares in a company are traded in a financial market, the market price of the shares is used in certain financial ratios.</li>
</ul>
</section>
<section id="use-of-ratios" class="slide level2">
<h2>Use of Ratios</h2>
<ul>
<li>Ratios can be expressed as a decimal value, such as 0.10, or given as an equivalent percent value, such as 10%.</li>
<li>Some ratios are usually quoted as percentages, especially ratios that are usually or always less than 1, such as earnings yield, while others are usually quoted as decimal numbers, especially ratios that are usually more than 1, such as P/E ratio; these latter are also called <strong>multiples</strong>. <!-- - Given any ratio, one can take its reciprocal; if the ratio was above 1, the reciprocal will be below 1, and conversely. --></li>
<li>The reciprocal expresses the same information, but may be more understandable: for instance, the earnings yield can be compared with bond yields, while the P/E ratio cannot be: for example, a P/E ratio of 20 corresponds to an earnings yield of 5%.</li>
</ul>
<aside class="notes">
<p>比率は，小数値で表すこともできる（例：0.10）し，パーセント値として表すこともできる（例：10%）。 一部の比率は，特に1未満の比率については，通常または常に1未満の比率については，パーセンテージとして引用されることが多いが，他の比率は，通常1より大きい比率については，小数値として引用されることが多い。これらの後者は，倍数とも呼ばれる。 任意の比率が与えられた場合，その逆数を取ることができる。比率が1より大きい場合，逆数は1より小さくなり，逆もまた同様である。 逆数は同じ情報を表現するが，より理解しやすいかもしれない。たとえば，株価収益率は債券利回りと比較することができるが，P/E比率はできない。たとえば，P/E比率が20の場合，収益率は5%に対応する。</p>
<style type="text/css">
        span.MJX_Assistive_MathML {
          position:absolute!important;
          clip: rect(1px, 1px, 1px, 1px);
          padding: 1px 0 0 0!important;
          border: 0!important;
          height: 1px!important;
          width: 1px!important;
          overflow: hidden!important;
          display:block!important;
      }</style></aside>
</section>
<section id="calculation-of-ratios" class="slide level2">
<h2>Calculation of Ratios</h2>
<ul>
<li>Values used in calculating financial ratios are taken from the balance sheet, income statement, statement of cash flows or (sometimes) the statement of retained earnings.</li>
<li>These comprise the firm’s “accounting statements” or financial statements.</li>
<li>The statements’ data is based on the accounting method and accounting standards used by the organization.</li>
</ul>
<aside class="notes">
<p>財務比率の計算に使用される値は、貸借対照表、損益計算書、キャッシュフロー計算書、または（場合によっては）利益剰余金計算書から取られる。 これらは、企業の「会計諸表」または財務諸表を構成する。 財務諸表のデータは、組織が使用する会計方法と会計基準に基づいている。</p>
<style type="text/css">
        span.MJX_Assistive_MathML {
          position:absolute!important;
          clip: rect(1px, 1px, 1px, 1px);
          padding: 1px 0 0 0!important;
          border: 0!important;
          height: 1px!important;
          width: 1px!important;
          overflow: hidden!important;
          display:block!important;
      }</style></aside>
</section>
<section id="purpose-and-types-of-ratios" class="slide level2">
<h2>Purpose and Types of Ratios</h2>
<p><mark class="mark">Financial ratios quantify many aspects of a business</mark> and are an integral part of the financial statement analysis. Financial ratios are categorized according to the financial aspect of the business which the ratio measures:</p>
<ul>
<li><em>Liquidity ratios</em> measure the availability of cash to pay debt.</li>
<li><em>Activity ratios</em> measure how quickly a firm converts non-cash assets to cash assets.</li>
<li><em>Debt ratios</em> measure the firm’s ability to repay long-term debt.</li>
</ul>
<aside class="notes">
<p>財務比率は、企業の多くの側面を数量化し、財務諸表分析の重要な部分である。 財務比率は、比率が測定するビジネスの財務面に応じて分類される。</p>
<ul>
<li><em>流動比率</em> は、債務を支払うための現金の利用可能性を測定する。</li>
<li><em>活動比率</em> は、企業が非現金資産を現金資産にどれだけ速く変換するかを測定する。</li>
<li><em>負債比率</em> は、企業が長期債務を返済する能力を測定する。</li>
</ul>
<style type="text/css">
        span.MJX_Assistive_MathML {
          position:absolute!important;
          clip: rect(1px, 1px, 1px, 1px);
          padding: 1px 0 0 0!important;
          border: 0!important;
          height: 1px!important;
          width: 1px!important;
          overflow: hidden!important;
          display:block!important;
      }</style></aside>
</section>
<section class="slide level2">

<ul>
<li><em>Profitability ratios</em> measure the firm’s use of its assets and control of its expenses to generate an acceptable rate of return.</li>
<li><em>Market ratios</em> measure investor response to owning a company’s stock and also the cost of issuing stock. These are concerned with the return on investment for shareholders, and with the relationship between return and the value of an investment in company’s shares.</li>
</ul>
<aside class="notes">
<p>収益性比率は、企業が資産をどのように活用し、費用をどのようにコントロールして収益率を適切な水準に維持するかを測定する。 市場比率は、企業の株式を所有する投資家の反応と株式の発行コストを測定する。これらは、株主の投資リターンと株式投資の価値との関係に関連している。</p>
<style type="text/css">
        span.MJX_Assistive_MathML {
          position:absolute!important;
          clip: rect(1px, 1px, 1px, 1px);
          padding: 1px 0 0 0!important;
          border: 0!important;
          height: 1px!important;
          width: 1px!important;
          overflow: hidden!important;
          display:block!important;
      }</style></aside>
</section>
<section id="comparisons-of-ratios" class="slide level2">
<h2>Comparisons of Ratios</h2>
<p>Financial ratios allow for comparisons:</p>
<ul>
<li>between <em>companies</em> (企業比較)</li>
<li>between <em>industries</em> (産業比較)</li>
<li>between different <em>time periods</em> for one company (時点比較)</li>
<li>between a single company and its industry average (企業と業界平均比較)</li>
</ul>
</section>
<section id="limitations-of-ratios" class="slide level2">
<h2>Limitations of Ratios</h2>
<ul>
<li>Ratios generally are not useful unless they are benchmarked against something else, like past performance or another company, or industry averages.</li>
<li>Thus, the ratios of firms in different industries, which face different risks, capital requirements, and competition are usually hard to compare.</li>
<li>Financial ratios may not be directly comparable between companies that use different accounting methods or follow various standard accounting practices.</li>
</ul>
<aside class="notes">
<p>比率は、過去の業績や他の企業、または業界平均などと比較されない限り、一般的には有用ではありません。 したがって、異なるリスク、資本要件、競争に直面する異なる業界の企業の比率は通常比較が難しい。 財務比率は、異なる会計方法を使用する企業やさまざまな標準的な会計慣行に従う企業間で直接比較できない場合があります。</p>
<style type="text/css">
        span.MJX_Assistive_MathML {
          position:absolute!important;
          clip: rect(1px, 1px, 1px, 1px);
          padding: 1px 0 0 0!important;
          border: 0!important;
          height: 1px!important;
          width: 1px!important;
          overflow: hidden!important;
          display:block!important;
      }</style></aside>
</section>
<section id="various-financial-statements" class="slide level2">
<h2>Various Financial Statements</h2>
<ul>
<li><p><strong>Public Companies</strong>: Typically required to use their home country’s Generally Accepted Accounting Principles (GAAP).</p></li>
<li><p><strong>Private Entities</strong>: May not follow accrual basis accounting; standards vary.</p></li>
<li><p><strong>Multi-National Corporations</strong>: Often use International Financial Reporting Standards (IFRS) or home country GAAP.</p></li>
<li><p><strong>Global Variation</strong>: No universal standard for financial statement calculations; terminology and practices differ across companies, industries, and countries.</p></li>
</ul>
<aside class="notes">
<p>ほとんどの公開企業は、自国の一般的に受け入れられている会計原則を使用することが法律で義務付けられていますが、非公開企業、パートナーシップ、個人事業主は、発生主義会計を使用することができない場合があります。 大規模な多国籍企業は、国際財務報告基準を使用して財務諸表を作成することがあります。または、自国の一般的に受け入れられている会計原則を使用することがあります。 すべての財務諸表に示される要約データを計算するための国際基準は存在せず、用語は企業、業界、国、時期によって常に一貫しているわけではありません。 財務諸表、特にインターネット上で要約された財務諸表では、さまざまな略語が使用されることがあります。 企業が報告する売上高は通常純売上高であり、返品、手数料、請求書の料金から返品、手数料、早期支払い割引を差し引いた金額です。 純利益は、税金、減価償却費、償却費、利息を除いた金額ですが、別段の記載がない限りです。</p>
<style type="text/css">
        span.MJX_Assistive_MathML {
          position:absolute!important;
          clip: rect(1px, 1px, 1px, 1px);
          padding: 1px 0 0 0!important;
          border: 0!important;
          height: 1px!important;
          width: 1px!important;
          overflow: hidden!important;
          display:block!important;
      }</style></aside>
</section>
<section id="other-financial-items" class="slide level2">
<h2>Other Financial items</h2>
<p>Other commonly used terms are:</p>
<ul>
<li><span class="math inline">COGS =</span> Cost of goods sold or cost of sales (売上原価)</li>
<li><span class="math inline">EBIT =</span> Earnings before interest and taxes (利払前税引前利益)</li>
<li><span class="math inline">EBITDA =</span> Earnings before interest, taxes, depreciation, and amortization (利払前・税引前・減価償却前利益)</li>
<li><span class="math inline">EPS =</span> Earnings per share (一株当り利益)</li>
</ul>
</section>
<section id="common-technical-metrics" class="slide level2">
<h2>Common Technical Metrics</h2>
<h3 id="負債比率">負債比率</h3>
<ul>
<li><strong>Debt-to-equity ratio</strong>: compares a company’s total debt to shareholders’ equity. Both of these numbers can be found on a company’s balance sheet. To calculate debt-to-equity ratio, you divide a company’s total liabilities by its shareholder equity, or
<ul>
<li><mark class="mark">Debt-to-Equity Ratio = Total Liabilities / Shareholders’ Equity </mark>.</li>
<li>If a company has a debt-to-equity ratio of 2 to 1, it means that the company has two dollars of debt to every one dollar shareholders invest in the company. <!-- - In other words, the company is taking on debt at twice the rate that its owners are investing in the company. --></li>
</ul></li>
</ul>
</section>
<section class="slide level2">

<h3 id="棚卸資産回転率">棚卸資産回転率</h3>
<ul>
<li><strong>Inventory turnover ratio</strong>: Inventory turnover is calculated by dividing a company’s cost of sales by its average inventory.</li>
<li>To find the average inventory, add the beginning and ending inventory balances from the balance sheet and divide by two.</li>
<li>This ratio shows how efficiently a company manages its inventory.
<ul>
<li><mark class="mark"> Inventory Turnover Ratio = Cost of Sales / Average Inventory for the Period</mark>.</li>
<li>If a company has an inventory turnover ratio of 2 to 1, it means that the company’s inventory turned over twice in the reporting period.</li>
</ul></li>
</ul>
<aside class="notes">
<p>棚卸資産回転率</p>
<ul>
<li><strong>棚卸資産回転率</strong>：棚卸資産回転率は、企業の売上原価を平均棚卸資産で割って計算される。</li>
<li>平均棚卸資産を求めるには、貸借対照表に記載されている棚卸資産の数値を見る。 期間の平均棚卸資産残高を求めるには、貸借対照表に記載されている棚卸資産の残高を合計し、2で割る。 (貸借対照表は時間のスナップショットであることを覚えておく。したがって、前期の棚卸資産残高は、現在期の開始残高であり、現在期の棚卸資産残高は、終了残高である。) 棚卸資産回転率を計算するには、企業の売上原価（損益計算書の純収益の直下）を期間の平均棚卸資産で割る。 企業の棚卸資産回転率が2対1の場合、報告期間中に企業の棚卸資産が2回回転したことを意味する。</li>
</ul>
<style type="text/css">
        span.MJX_Assistive_MathML {
          position:absolute!important;
          clip: rect(1px, 1px, 1px, 1px);
          padding: 1px 0 0 0!important;
          border: 0!important;
          height: 1px!important;
          width: 1px!important;
          overflow: hidden!important;
          display:block!important;
      }</style></aside>
</section>
<section class="slide level2">

<h3 id="営業利益率">営業利益率</h3>
<ul>
<li><strong>Operating margin</strong>: compares a company’s operating income to net revenues. Both of these numbers can be found on a company’s income statement. To calculate operating margin, you divide a company’s income from operations (before interest and income tax expenses) by its net revenues, or
<ul>
<li><mark class="mark">Operating Margin = Income from Operations / Net Revenues</mark>.</li>
<li>Operating margin is usually expressed as a percentage. It shows, for each dollar of sales, what percentage was profit.</li>
</ul></li>
</ul>
</section>
<section class="slide level2">

<h3 id="per">PER</h3>
<ul>
<li><strong>P/E ratio</strong>: compares a company’s common stock price with its earnings per share. To calculate a company’s P/E ratio, you divide a company’s stock price by its earnings per share, or
<ul>
<li><mark class="mark">P/E Ratio = Price per share / Earnings per share</mark>.</li>
<li>If a company’s stock is selling at $20 per share and the company is earning $2 per share, then the company’s P/E Ratio is 10 to 1. The company’s stock is selling at 10 times its earnings.</li>
</ul></li>
</ul>
<aside class="notes">
<ul>
<li><strong>P/E比率</strong>：企業の普通株価を1株当たり利益と比較する。 企業のP/E比率を計算するには、企業の株価を1株当たり利益で割る。
<ul>
<li>P/E比率 = 株価 / 1株当たり利益。</li>
<li>企業の株価が1株当たり20ドルで、企業が1株当たり2ドルを稼いでいる場合、企業のP/E比率は10対1である。企業の株価は、利益の10倍で売られている。</li>
</ul></li>
</ul>
<style type="text/css">
        span.MJX_Assistive_MathML {
          position:absolute!important;
          clip: rect(1px, 1px, 1px, 1px);
          padding: 1px 0 0 0!important;
          border: 0!important;
          height: 1px!important;
          width: 1px!important;
          overflow: hidden!important;
          display:block!important;
      }</style></aside>
</section>
<section class="slide level2">

<h3 id="運転資本">運転資本</h3>
<ul>
<li><strong>Working capital</strong>: is the money leftover if a company paid its current liabilities (that is, its debts due within 1-year of the date of the balance sheet) from its current assets.
<ul>
<li><mark class="mark">Working Capital = Current Assets - Current Liabilities </mark></li>
</ul></li>
</ul>
<p>And so forth.</p>
<aside class="notes">
<ul>
<li><strong>運転資本</strong>：運転資本は、企業が貸借対照表の日付から1年以内に支払うべき負債（つまり、流動資産）を流動資産から支払った場合に残るお金である。
<ul>
<li>運転資本 = 流動資産 - 流動負債</li>
</ul></li>
</ul>
<p>など。</p>
<style type="text/css">
        span.MJX_Assistive_MathML {
          position:absolute!important;
          clip: rect(1px, 1px, 1px, 1px);
          padding: 1px 0 0 0!important;
          border: 0!important;
          height: 1px!important;
          width: 1px!important;
          overflow: hidden!important;
          display:block!important;
      }</style></aside>
</section>
<section id="accessing-financial-information-from-edgar" class="slide level2">
<h2>Accessing Financial Information from EDGAR</h2>
<ul>
<li>The EDGAR database (https://www.sec.gov/edgar/) offers a wealth of financial information on industry competitors, but only if they are publicly traded companies.</li>
<li>Use package <code>edgar</code> to extract this information.</li>
<li>Note that the SEC recently started requiring identification before access.</li>
<li>This is accomplished by the <code>username</code> parameter, which is typically set to your work email. <!-- - The subsequent _R_ code extracts information on Tesla Motors from Edgar; this information is then analyzed for sentiment, which is presented as a bar chart. --></li>
</ul>
</section>
<section id="teslas-fs" class="slide level2">
<h2>Tesla’s F/S</h2>
<div class="cell">
<div class="sourceCode cell-code" id="cb1"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb1-1"><a href="" aria-hidden="true" tabindex="-1"></a>pacman<span class="sc">::</span><span class="fu">p_load</span>(edgar, tidyverse, kableExtra)</span>
<span id="cb1-2"><a href="" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1-3"><a href="" aria-hidden="true" tabindex="-1"></a>cik.no <span class="ot">=</span> <span class="dv">0001318605</span>   <span class="co"># Tesla</span></span>
<span id="cb1-4"><a href="" aria-hidden="true" tabindex="-1"></a>form.type <span class="ot">=</span> <span class="st">"10-K"</span>    <span class="co"># 10-K is the annual report</span></span>
<span id="cb1-5"><a href="" aria-hidden="true" tabindex="-1"></a>filing.year <span class="ot">=</span> <span class="dv">2018</span>    <span class="co"># 2018 is the year of the report</span></span>
<span id="cb1-6"><a href="" aria-hidden="true" tabindex="-1"></a>quarter <span class="ot">=</span> <span class="fu">c</span>(<span class="dv">1</span>,<span class="dv">2</span>,<span class="dv">3</span>,<span class="dv">4</span>)  <span class="co"># All quarters</span></span>
<span id="cb1-7"><a href="" aria-hidden="true" tabindex="-1"></a>useragent <span class="ot">=</span> <span class="st">"matsuura@fc.ritsumei.ac.jp"</span></span></code><button title="コピー" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</section>
<section id="getfilings-function" class="slide level2">
<h2><code>getFilings()</code> Function</h2>
<p><code>getFilings()</code> function takes CIKs, form type, filing year, and quarter of the filing as input. It creates new directory ’~/Downloads/Edgar filings_full text’ to store all downloaded filings</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb2"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb2-1"><a href="" aria-hidden="true" tabindex="-1"></a><span class="fu">getFilings</span>(</span>
<span id="cb2-2"><a href="" aria-hidden="true" tabindex="-1"></a>   cik.no,</span>
<span id="cb2-3"><a href="" aria-hidden="true" tabindex="-1"></a>   form.type,</span>
<span id="cb2-4"><a href="" aria-hidden="true" tabindex="-1"></a>   filing.year,</span>
<span id="cb2-5"><a href="" aria-hidden="true" tabindex="-1"></a>   quarter,</span>
<span id="cb2-6"><a href="" aria-hidden="true" tabindex="-1"></a>   useragent,</span>
<span id="cb2-7"><a href="" aria-hidden="true" tabindex="-1"></a>   <span class="at">downl.permit =</span> <span class="st">"y"</span></span>
<span id="cb2-8"><a href="" aria-hidden="true" tabindex="-1"></a>   )</span></code><button title="コピー" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</section>
<section class="slide level2">

<ul>
<li><code>getFilingsHTML()</code> function takes CIKs, form type, filing year, and quarter of the filing as input.</li>
<li>The function imports edgar filings downloaded via getFilings function; otherwise, it downloads the filings which are not already been downloaded.</li>
<li>It then reads the downloaded filing, scraps main body the filing, and save the filing content in <code>~/Downloads/Edgar filings_HTML view</code> directory in HTML format.</li>
</ul>
<div class="cell">
<details class="code-fold">
<summary>コード</summary>
<div class="sourceCode cell-code" id="cb3"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb3-1"><a href="" aria-hidden="true" tabindex="-1"></a><span class="fu">getFilingsHTML</span>(</span>
<span id="cb3-2"><a href="" aria-hidden="true" tabindex="-1"></a>  <span class="at">cik.no =</span> cik.no,</span>
<span id="cb3-3"><a href="" aria-hidden="true" tabindex="-1"></a>  <span class="at">form.type =</span> form.type,</span>
<span id="cb3-4"><a href="" aria-hidden="true" tabindex="-1"></a>  <span class="at">filing.year =</span> filing.year,</span>
<span id="cb3-5"><a href="" aria-hidden="true" tabindex="-1"></a>  <span class="at">quarter =</span> quarter</span>
<span id="cb3-6"><a href="" aria-hidden="true" tabindex="-1"></a>  )</span></code><button title="コピー" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
</div>
</section>
<section id="getmasterindex-function" class="slide level2">
<h2><code>getMasterIndex()</code> Function</h2>
<p>This function creates a new directory ’~/Downloads/Master Indexes’ into current working directory to save these Rda Master Index.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb4"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb4-1"><a href="" aria-hidden="true" tabindex="-1"></a><span class="fu">getMasterIndex</span>(filing.year)</span></code><button title="コピー" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p>Management Discussion creates a new directory with name “~/Downloads/MD&amp;A section text”</p>
</section>
<section class="slide level2">

<ul>
<li><code>getSentiment</code> function takes CIK(s), form type(s), and year(s) as input parameters.</li>
<li>The function first imports available downloaded filings in local woking directory ’Edgar filings’ created by <code>getFilings</code> function; otherwise, it downloads the filings which is not already been downloaded.</li>
<li>It then reads the filings, cleans the filings, and computes the sentiment measures.</li>
<li>The function returns a dataframe with filing information, and sentiment measures.</li>
</ul>
</section>
<section id="accessing-financial-information-from-edgar-1" class="slide level2">
<h2>Accessing Financial Information from EDGAR</h2>
<!-- ## EDGARからの財務情報のアクセス -->
<ul>
<li>The EDGAR database offers a wealth of financial information on industry competitors, but only if they are publicly traded companies. <!-- EDGARデータベースは、上場企業に限定されるが，業界の競合他社に関する財務情報を豊富に提供している。 --> <!-- - Use package edgar to extract this information. --> <!-- この財務情報を抽出するために`edgar`パッケージを使用する。 --></li>
<li>The subsequent R code extracts information on Tesla Motors from Edgar; this information is then analyzed for sentiment, which is presented as a bar chart. <!-- 以下のRコードは、EdgarデータベースからTesla Motorsの情報を抽出し、その情報を感情分析して棒グラフとして表示する。 --></li>
</ul>
</section>
<section class="slide level2">

<div class="cell">
<div class="sourceCode cell-code" id="cb5"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb5-1"><a href="" aria-hidden="true" tabindex="-1"></a>pacman<span class="sc">::</span><span class="fu">p_load</span>(edgar, tidyverse, kableExtra)</span>
<span id="cb5-2"><a href="" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb5-3"><a href="" aria-hidden="true" tabindex="-1"></a>cik.no <span class="ot">=</span> <span class="dv">0001318605</span> <span class="co"># Tesla</span></span>
<span id="cb5-4"><a href="" aria-hidden="true" tabindex="-1"></a>form.type <span class="ot">=</span> <span class="st">"10-K"</span></span>
<span id="cb5-5"><a href="" aria-hidden="true" tabindex="-1"></a>filing.year <span class="ot">=</span> <span class="dv">2018</span></span>
<span id="cb5-6"><a href="" aria-hidden="true" tabindex="-1"></a>quarter <span class="ot">=</span> <span class="fu">c</span>(<span class="dv">1</span>,<span class="dv">2</span>,<span class="dv">3</span>,<span class="dv">4</span>)</span>
<span id="cb5-7"><a href="" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb5-8"><a href="" aria-hidden="true" tabindex="-1"></a><span class="fu">getFilings</span>(</span>
<span id="cb5-9"><a href="" aria-hidden="true" tabindex="-1"></a>    cik.no,</span>
<span id="cb5-10"><a href="" aria-hidden="true" tabindex="-1"></a>    form.type,</span>
<span id="cb5-11"><a href="" aria-hidden="true" tabindex="-1"></a>    filing.year,</span>
<span id="cb5-12"><a href="" aria-hidden="true" tabindex="-1"></a>    quarter,</span>
<span id="cb5-13"><a href="" aria-hidden="true" tabindex="-1"></a>    <span class="at">downl.permit =</span> <span class="st">"y"</span></span>
<span id="cb5-14"><a href="" aria-hidden="true" tabindex="-1"></a>    )</span>
<span id="cb5-15"><a href="" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb5-16"><a href="" aria-hidden="true" tabindex="-1"></a><span class="fu">getFilingsHTML</span>(</span>
<span id="cb5-17"><a href="" aria-hidden="true" tabindex="-1"></a>    <span class="at">cik.no =</span> cik.no,</span>
<span id="cb5-18"><a href="" aria-hidden="true" tabindex="-1"></a>    <span class="at">form.type =</span> form.type,</span>
<span id="cb5-19"><a href="" aria-hidden="true" tabindex="-1"></a>    <span class="at">filing.year =</span> filing.year,</span>
<span id="cb5-20"><a href="" aria-hidden="true" tabindex="-1"></a>    <span class="at">quarter =</span> quarter</span>
<span id="cb5-21"><a href="" aria-hidden="true" tabindex="-1"></a>    )</span>
<span id="cb5-22"><a href="" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb5-23"><a href="" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb5-24"><a href="" aria-hidden="true" tabindex="-1"></a><span class="co"># This function creates a new directory ’~/Downloads/Master Indexes’ into current working directory to save these Rda Master Index.</span></span>
<span id="cb5-25"><a href="" aria-hidden="true" tabindex="-1"></a><span class="fu">getMasterIndex</span>(filing.year)</span>
<span id="cb5-26"><a href="" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb5-27"><a href="" aria-hidden="true" tabindex="-1"></a><span class="co"># Management Discussion creates a new directory with name "~/Downloads/MD&amp;A section text"</span></span>
<span id="cb5-28"><a href="" aria-hidden="true" tabindex="-1"></a><span class="fu">getMgmtDisc</span>(</span>
<span id="cb5-29"><a href="" aria-hidden="true" tabindex="-1"></a>    <span class="at">cik.no =</span> cik.no,</span>
<span id="cb5-30"><a href="" aria-hidden="true" tabindex="-1"></a>    <span class="at">filing.year =</span> filing.year)</span>
<span id="cb5-31"><a href="" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb5-32"><a href="" aria-hidden="true" tabindex="-1"></a>sentiment_analysis <span class="ot">&lt;-</span> <span class="fu">getSentiment</span>(</span>
<span id="cb5-33"><a href="" aria-hidden="true" tabindex="-1"></a>    cik.no,</span>
<span id="cb5-34"><a href="" aria-hidden="true" tabindex="-1"></a>    form.type,</span>
<span id="cb5-35"><a href="" aria-hidden="true" tabindex="-1"></a>    filing.year) <span class="sc">|&gt;</span></span>
<span id="cb5-36"><a href="" aria-hidden="true" tabindex="-1"></a>    <span class="fu">t</span>()</span>
<span id="cb5-37"><a href="" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb5-38"><a href="" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb5-39"><a href="" aria-hidden="true" tabindex="-1"></a>d <span class="ot">&lt;-</span> sentiment_analysis</span>
<span id="cb5-40"><a href="" aria-hidden="true" tabindex="-1"></a>names <span class="ot">&lt;-</span> <span class="fu">rownames</span>(d)</span>
<span id="cb5-41"><a href="" aria-hidden="true" tabindex="-1"></a><span class="fu">rownames</span>(d) <span class="ot">&lt;-</span> <span class="cn">NULL</span></span>
<span id="cb5-42"><a href="" aria-hidden="true" tabindex="-1"></a>sentiment_analysis <span class="ot">&lt;-</span> <span class="fu">cbind</span>(names,d)</span>
<span id="cb5-43"><a href="" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb5-44"><a href="" aria-hidden="true" tabindex="-1"></a><span class="fu">colnames</span>(sentiment_analysis) <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="st">"sentiment"</span>,<span class="st">"n"</span>)</span>
<span id="cb5-45"><a href="" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb5-46"><a href="" aria-hidden="true" tabindex="-1"></a>sentiment_analysis <span class="ot">&lt;-</span> <span class="fu">as.data.frame</span>(</span>
<span id="cb5-47"><a href="" aria-hidden="true" tabindex="-1"></a>    sentiment_analysis[<span class="dv">10</span><span class="sc">:</span><span class="fu">nrow</span>(sentiment_analysis),]</span>
<span id="cb5-48"><a href="" aria-hidden="true" tabindex="-1"></a>    )</span>
<span id="cb5-49"><a href="" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb5-50"><a href="" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb5-51"><a href="" aria-hidden="true" tabindex="-1"></a><span class="fu">ggplot</span>(sentiment_analysis, <span class="fu">aes</span>(sentiment, n)) <span class="sc">+</span></span>
<span id="cb5-52"><a href="" aria-hidden="true" tabindex="-1"></a>    <span class="fu">geom_col</span>() <span class="sc">+</span></span>
<span id="cb5-53"><a href="" aria-hidden="true" tabindex="-1"></a>    <span class="fu">theme</span>(<span class="at">axis.text.x =</span> <span class="fu">element_text</span>(</span>
<span id="cb5-54"><a href="" aria-hidden="true" tabindex="-1"></a>        <span class="at">angle =</span> <span class="dv">45</span>, <span class="at">hjust =</span> <span class="dv">1</span>)</span>
<span id="cb5-55"><a href="" aria-hidden="true" tabindex="-1"></a>        ) <span class="sc">+</span> <span class="fu">xlab</span>(<span class="st">"Sentiment"</span>) <span class="sc">+</span></span>
<span id="cb5-56"><a href="" aria-hidden="true" tabindex="-1"></a>        <span class="fu">ylab</span>(<span class="st">"Frequency expressed in 10-k"</span>)</span></code><button title="コピー" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</section>
<section id="accessing-financial-information-from-edgar-httpswww.sec.govedgar-with-the-finreportr-package" class="slide level2">
<h2>Accessing Financial Information from EDGAR (https://www.sec.gov/edgar/) with the finreportr Package</h2>
<!-- finreportrパッケージを使用したEDGAR（https://www.sec.gov/edgar/）からの財務情報のアクセス -->
<div class="cell">
<div class="sourceCode cell-code" id="cb6"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb6-1"><a href="" aria-hidden="true" tabindex="-1"></a>pacman<span class="sc">::</span><span class="fu">p_load</span>(finreportr)</span>
<span id="cb6-2"><a href="" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb6-3"><a href="" aria-hidden="true" tabindex="-1"></a><span class="co"># The following commands will directly load EDGAR information into the R workspace for analysis</span></span>
<span id="cb6-4"><a href="" aria-hidden="true" tabindex="-1"></a>tesla_co <span class="ot">&lt;-</span> <span class="fu">CompanyInfo</span>(<span class="st">"TSLA"</span>)</span>
<span id="cb6-5"><a href="" aria-hidden="true" tabindex="-1"></a>tesla_ann <span class="ot">&lt;-</span> <span class="fu">AnnualReports</span>(<span class="st">"TSLA"</span>)</span>
<span id="cb6-6"><a href="" aria-hidden="true" tabindex="-1"></a>tesla_inc <span class="ot">&lt;-</span> <span class="fu">GetIncome</span>(<span class="st">"TSLA"</span>, <span class="dv">2018</span>)</span>
<span id="cb6-7"><a href="" aria-hidden="true" tabindex="-1"></a>tesla_bs <span class="ot">&lt;-</span> <span class="fu">GetBalanceSheet</span>(<span class="st">"TSLA"</span>, <span class="dv">2018</span>)</span>
<span id="cb6-8"><a href="" aria-hidden="true" tabindex="-1"></a>tesla_cf <span class="ot">&lt;-</span> <span class="fu">GetCashFlow</span>(<span class="st">"TSLA"</span>, <span class="dv">2018</span>)</span>
<span id="cb6-9"><a href="" aria-hidden="true" tabindex="-1"></a><span class="fu">head</span>(tesla_inc)</span></code><button title="コピー" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</section>
<section class="slide level2">

<div class="cell">
<div class="sourceCode cell-code" id="cb7"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb7-1"><a href="" aria-hidden="true" tabindex="-1"></a>pacman<span class="sc">::</span><span class="fu">p_load_gh</span>(<span class="st">"bergant/finstr"</span>)</span>
<span id="cb7-2"><a href="" aria-hidden="true" tabindex="-1"></a>pacman<span class="sc">::</span><span class="fu">p_load</span>(tidyverse, edgar, XBRL, kableExtra)</span>
<span id="cb7-3"><a href="" aria-hidden="true" tabindex="-1"></a><span class="co"># ローカルに保存しているxbrlファイルを読み込む</span></span>
<span id="cb7-4"><a href="" aria-hidden="true" tabindex="-1"></a>old_o <span class="ot">&lt;-</span> <span class="fu">options</span>(<span class="at">stringsAsFactors =</span> <span class="cn">FALSE</span>) <span class="co"># 文字列をファクターとして扱わない</span></span>
<span id="cb7-5"><a href="" aria-hidden="true" tabindex="-1"></a>xbrl_data_2016 <span class="ot">&lt;-</span> <span class="fu">xbrlDoAll</span>(<span class="st">"XBRL/gm-20161231.xml"</span>)</span>
<span id="cb7-6"><a href="" aria-hidden="true" tabindex="-1"></a>xbrl_data_2017 <span class="ot">&lt;-</span> <span class="fu">xbrlDoAll</span>(<span class="st">"XBRL/gm-20171231.xml"</span>)</span>
<span id="cb7-7"><a href="" aria-hidden="true" tabindex="-1"></a><span class="fu">options</span>(old_o)</span>
<span id="cb7-8"><a href="" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb7-9"><a href="" aria-hidden="true" tabindex="-1"></a>st2016 <span class="ot">&lt;-</span> <span class="fu">xbrl_get_statements</span>(xbrl_data_2016)</span>
<span id="cb7-10"><a href="" aria-hidden="true" tabindex="-1"></a>st2017 <span class="ot">&lt;-</span> <span class="fu">xbrl_get_statements</span>(xbrl_data_2017)</span>
<span id="cb7-11"><a href="" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb7-12"><a href="" aria-hidden="true" tabindex="-1"></a>balance_sheet2017 <span class="ot">&lt;-</span> st2017<span class="sc">$</span>ConsolidatedBalanceSheets</span>
<span id="cb7-13"><a href="" aria-hidden="true" tabindex="-1"></a>balance_sheet2016 <span class="ot">&lt;-</span> st2016<span class="sc">$</span>ConsolidatedBalanceSheets</span>
<span id="cb7-14"><a href="" aria-hidden="true" tabindex="-1"></a>balance_sheet <span class="ot">&lt;-</span> <span class="fu">merge</span>(balance_sheet2017, balance_sheet2016)</span></code><button title="コピー" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</section>
<section id="wide-to-long-form" class="slide level2">
<h2>Wide to Long Form</h2>
<ul>
<li>The <code>finreportr</code> package returns a data.frame in “long form.”</li>
<li>Because analysis typically benefits from datasets in “short form” with one row per account, <code>finreportr</code> data.frames need to be reshaped. <!-- - Hadley Wickham has created a comprehensive package called `reshape2` that uses metaphors of melt and cast. --></li>
<li>You melt data so that <strong>each row is a unique id-variable combination</strong> (i.e., is in “long form”) and then you cast the melted data into any shape you would like. <!-- There are specific commands for casting data.frames dcast, arrays acast, and so forth. --> In the next example, we take the Tesla income statement in ‘long form’ that we acquired with the <code>finreportr</code> package and dcast it into a more usable form.</li>
</ul>
</section>
<section id="reshaping-the-income-statement" class="slide level2">
<h2>Reshaping the Income Statement</h2>
<div class="cell">
<div class="sourceCode cell-code" id="cb8"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb8-1"><a href="" aria-hidden="true" tabindex="-1"></a>tesla_inc <span class="ot">&lt;-</span> <span class="fu">GetIncome</span>(<span class="st">"TSLA"</span>, <span class="dv">2018</span>) <span class="sc">|&gt;</span></span>
<span id="cb8-2"><a href="" aria-hidden="true" tabindex="-1"></a>    <span class="fu">rbind</span>(<span class="fu">GetIncome</span>(<span class="st">"TSLA"</span>, <span class="dv">2017</span>)) <span class="sc">|&gt;</span></span>
<span id="cb8-3"><a href="" aria-hidden="true" tabindex="-1"></a>    <span class="fu">rbind</span>(<span class="fu">GetIncome</span>(<span class="st">"TSLA"</span>, <span class="dv">2016</span>)) <span class="sc">|&gt;</span></span>
<span id="cb8-4"><a href="" aria-hidden="true" tabindex="-1"></a>    <span class="fu">rbind</span>(<span class="fu">GetIncome</span>(<span class="st">"TSLA"</span>, <span class="dv">2015</span>))</span>
<span id="cb8-5"><a href="" aria-hidden="true" tabindex="-1"></a><span class="fu">head</span>(tesla_inc)</span>
<span id="cb8-6"><a href="" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb8-7"><a href="" aria-hidden="true" tabindex="-1"></a>tesla_inc <span class="ot">&lt;-</span>tesla_inc <span class="sc">|&gt;</span></span>
<span id="cb8-8"><a href="" aria-hidden="true" tabindex="-1"></a>    <span class="fu">filter</span>(<span class="fu">month</span>(startDate) <span class="sc">==</span> <span class="dv">01</span> <span class="sc">&amp;</span> <span class="fu">month</span>(endDate) <span class="sc">==</span> <span class="dv">12</span>) <span class="sc">|&gt;</span></span>
<span id="cb8-9"><a href="" aria-hidden="true" tabindex="-1"></a>    <span class="fu">mutate</span>(<span class="at">Year =</span> <span class="fu">year</span>(endDate)) <span class="sc">|&gt;</span></span>
<span id="cb8-10"><a href="" aria-hidden="true" tabindex="-1"></a>    <span class="fu">group_by</span>(Metric, Year) <span class="sc">|&gt;</span></span>
<span id="cb8-11"><a href="" aria-hidden="true" tabindex="-1"></a>    <span class="fu">slice</span>(<span class="dv">1</span>L) <span class="sc">|&gt;</span></span>
<span id="cb8-12"><a href="" aria-hidden="true" tabindex="-1"></a>    <span class="fu">dcast</span>(Metric <span class="sc">~</span> Year, <span class="at">value.var =</span> ’Amount’)</span>
<span id="cb8-13"><a href="" aria-hidden="true" tabindex="-1"></a><span class="fu">head</span>(tesla_inc)</span></code><button title="コピー" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</section>
<section id="computing-technical-metrics" class="slide level2">
<h2>Computing Technical Metrics</h2>
<!-- ## 財務指標の計算 -->
<ul>
<li>In the prior section, I showed you how to acquire financial information from the SEC’s repositories.</li>
<li>This section provides general guidelines for computing technical metrics such as ratios from that statement data.</li>
<li>Consider the calculation of the <em>current ratio</em> (流動比率) which is defined as:</li>
</ul>
<p><span class="math display">
Current Ratio = \frac{Current Assets}{Current Liabilities}
</span></p>
</section>
<section id="calculate-current-ratio" class="slide level2">
<h2>calculate current ratio</h2>
<div class="cell">
<div class="sourceCode cell-code" id="cb9"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb9-1"><a href="" aria-hidden="true" tabindex="-1"></a>balance_sheet <span class="sc">|&gt;</span></span>
<span id="cb9-2"><a href="" aria-hidden="true" tabindex="-1"></a>    <span class="fu">transmute</span>(<span class="at">date =</span> endDate,</span>
<span id="cb9-3"><a href="" aria-hidden="true" tabindex="-1"></a>        <span class="at">CurrentRatio =</span> AssetsCurrent <span class="sc">/</span> LiabilitiesCurrent )</span></code><button title="コピー" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>        date CurrentRatio
1 2015-12-31    0.9745988
3 2016-12-31    0.8946009
4 2017-12-31    0.8940564</code></pre>
</div>
</div>
<ul>
<li>Other ratios may be calculated in a similar straightforward manner using the dplyr package in the tidyverse library.</li>
<li>Note that several other packages (e.g., <code>edgar</code>, <code>finreportr</code>) are available to extract EDGAR filings.</li>
<li>The <code>finstr</code> package can only process links to XBRL files, but <code>finreportr</code> can access data from both HTML and XBRL files.</li>
</ul>
</section>
<section id="visualization-of-technical-metrics" class="slide level2">
<h2>Visualization of Technical Metrics</h2>
<ul>
<li>Visualizations are compact, yet can reveal patterns that would not be readily identified in the raw data.</li>
<li>This is because the human brain is much more attuned to analyzing visual scenes than to analyzing lists of numbers and characters.</li>
<li>Visualizing financial statements exposes a limited number of key values, and emphasizes their relationships and trends.</li>
<li>In the following code chunk, I aggregate a balance sheet by selected concepts (Table 1).</li>
</ul>
</section>
<section id="aggregate-the-balance-sheet" class="slide level2">
<h2>Aggregate the balance sheet</h2>
<div class="cell">
<div class="sourceCode cell-code" id="cb11"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb11-1"><a href="" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(htmlTable)</span>
<span id="cb11-2"><a href="" aria-hidden="true" tabindex="-1"></a>bs_simple <span class="ot">&lt;-</span> <span class="fu">expose</span>(</span>
<span id="cb11-3"><a href="" aria-hidden="true" tabindex="-1"></a>  balance_sheet,</span>
<span id="cb11-4"><a href="" aria-hidden="true" tabindex="-1"></a>    <span class="co"># Assets</span></span>
<span id="cb11-5"><a href="" aria-hidden="true" tabindex="-1"></a>    <span class="st">"Current Assets"</span> <span class="ot">=</span> <span class="st">"AssetsCurrent"</span>,</span>
<span id="cb11-6"><a href="" aria-hidden="true" tabindex="-1"></a>    <span class="st">"Noncurrent Assets"</span> <span class="ot">=</span> <span class="fu">other</span>(<span class="st">"Assets"</span>),</span>
<span id="cb11-7"><a href="" aria-hidden="true" tabindex="-1"></a>    <span class="co"># Liabilites and equity</span></span>
<span id="cb11-8"><a href="" aria-hidden="true" tabindex="-1"></a>    <span class="st">"Current Liabilities"</span> <span class="ot">=</span> <span class="st">"LiabilitiesCurrent"</span>,</span>
<span id="cb11-9"><a href="" aria-hidden="true" tabindex="-1"></a>    <span class="st">"Noncurrent Liabilities"</span> <span class="ot">=</span> <span class="fu">other</span>(<span class="fu">c</span>(<span class="st">"Liabilities"</span>, <span class="st">"CommitmentsAndContingencies"</span>)),</span>
<span id="cb11-10"><a href="" aria-hidden="true" tabindex="-1"></a>    <span class="st">"Stockholders Equity"</span> <span class="ot">=</span> <span class="st">"StockholdersEquity"</span></span>
<span id="cb11-11"><a href="" aria-hidden="true" tabindex="-1"></a>)</span></code><button title="コピー" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</section>
<section id="print-bs" class="slide level2">
<h2>Print B/S</h2>
<p>Print the balance sheet; capture the output to a NULL file, and reformat with the <code>kableExtra</code> package</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb12"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb12-1"><a href="" aria-hidden="true" tabindex="-1"></a><span class="fu">capture.output</span>(bs_table <span class="ot">&lt;-</span></span>
<span id="cb12-2"><a href="" aria-hidden="true" tabindex="-1"></a>                 <span class="fu">print</span>(bs_simple,</span>
<span id="cb12-3"><a href="" aria-hidden="true" tabindex="-1"></a>                   <span class="at">html =</span> <span class="cn">FALSE</span>,　<span class="at">big.mark =</span> <span class="st">","</span>,　<span class="at">dateFormat =</span> <span class="st">"%Y"</span>),</span>
<span id="cb12-4"><a href="" aria-hidden="true" tabindex="-1"></a>               <span class="at">file =</span> <span class="st">'NUL'</span>)</span>
<span id="cb12-5"><a href="" aria-hidden="true" tabindex="-1"></a>bs_table <span class="sc">|&gt;</span></span>
<span id="cb12-6"><a href="" aria-hidden="true" tabindex="-1"></a>  <span class="fu">kable</span>(<span class="at">longtable =</span> T,</span>
<span id="cb12-7"><a href="" aria-hidden="true" tabindex="-1"></a>        <span class="at">caption =</span> <span class="st">"Abbreviated Balance Sheet"</span>,</span>
<span id="cb12-8"><a href="" aria-hidden="true" tabindex="-1"></a>        <span class="st">"latex"</span>, <span class="at">booktabs =</span> T) <span class="sc">|&gt;</span></span>
<span id="cb12-9"><a href="" aria-hidden="true" tabindex="-1"></a>  <span class="fu">kable_styling</span>(</span>
<span id="cb12-10"><a href="" aria-hidden="true" tabindex="-1"></a>    <span class="at">bootstrap_options =</span> <span class="fu">c</span>(<span class="st">"striped"</span>, <span class="st">"hover"</span>, <span class="st">"condensed"</span>),</span>
<span id="cb12-11"><a href="" aria-hidden="true" tabindex="-1"></a>    <span class="at">full_width =</span> F)</span></code><button title="コピー" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>

</section>
<section id="print-bs-output" class="slide level2 output-location-slide"><h2>Print B/S</h2><div class="cell output-location-slide">
<div class="cell-output-display">

</div>
</div></section><section id="plot-the-balance-sheet" class="slide level2">
<h2>plot the balance sheet</h2>
<div class="cell">
<div class="sourceCode cell-code" id="cb13"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb13-1"><a href="" aria-hidden="true" tabindex="-1"></a>finstr<span class="sc">::</span><span class="fu">plot_double_stacked_bar</span>(bs_simple)</span></code><button title="コピー" class="code-copy-button"><i class="bi"></i></button></pre></div>

</div>
<img data-src="gaisho_2024_06_files/figure-revealjs/plot_bs-1.png" width="960" class="r-stretch"></section>
<section class="slide level2">

<p>facet balance sheet DR and CR accounts</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb14"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb14-1"><a href="" aria-hidden="true" tabindex="-1"></a>finstr<span class="sc">::</span><span class="fu">plot_double_stacked_bar</span>(bs_simple, <span class="at">by_date =</span> <span class="cn">FALSE</span>)</span></code><button title="コピー" class="code-copy-button"><i class="bi"></i></button></pre></div>

</div>
<img data-src="gaisho_2024_06_files/figure-revealjs/plot_bs_facet-1.png" width="960" class="r-stretch"></section>
<section class="slide level2">

<p>use <em>proportional form</em> to highlight changes in balance sheet structure</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb15"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb15-1"><a href="" aria-hidden="true" tabindex="-1"></a>bs_simple_prop <span class="ot">&lt;-</span> <span class="fu">proportional</span>(bs_simple)</span>
<span id="cb15-2"><a href="" aria-hidden="true" tabindex="-1"></a>finstr<span class="sc">::</span><span class="fu">plot_double_stacked_bar</span>(bs_simple_prop)</span></code><button title="コピー" class="code-copy-button"><i class="bi"></i></button></pre></div>

</div>
<img data-src="gaisho_2024_06_files/figure-revealjs/plot_bs_prop-1.png" width="960" class="r-stretch"></section></section>
<section>
<section id="internet-resources-for-analytical-review" class="title-slide slide level1 center">
<h1>Internet Resources for Analytical Review</h1>

</section>
<section id="web-accessible-financial-and-firm-data" class="slide level2">
<h2>Web-Accessible Financial and Firm Data</h2>
<ul>
<li>The exponential growth of <em>web-accessible financial</em> and firm data has revolutionized analytical review over the past decade.</li>
<li>Intelligence scanning of Internet resources is the automated search for financial information, inventory sentiment, discussions, news, and other audit related information.</li>
<li>It has eclipsed calculation of technical metrics as a source of internal control weaknesses, accounting problems or fraud, and audit risk over the past decade.</li>
<li>Today, the audit that does not fully take advantage of statistical software and Internet resources leaves itself open to negligence, misconduct, and lawsuits.</li>
</ul>
<aside class="notes">
<p>過去10年間にわたり、ウェブアクセス可能な財務および企業データの指数関数的な成長は、分析レビューを革命化してきた。 インテリジェンススキャンは、財務情報、在庫センチメント、ディスカッション、ニュース、およびその他の監査関連情報を自動的に検索するものである。 過去10年間にわたり、技術指標の計算を超えて、内部統制の弱点、会計上の問題や不正、および監査リスクの情報源としての地位を碾きつぶしてきた。 今日、統計ソフトウェアとインターネットリソースを十分に活用しない監査は、怠慢、不正行為、および訴訟のリスクにさらされる。</p>
<style type="text/css">
        span.MJX_Assistive_MathML {
          position:absolute!important;
          clip: rect(1px, 1px, 1px, 1px);
          padding: 1px 0 0 0!important;
          border: 0!important;
          height: 1px!important;
          width: 1px!important;
          overflow: hidden!important;
          display:block!important;
      }</style></aside>
</section>
<section class="slide level2">

<ul>
<li>Arguably, the most important number on the financial statements is <strong>sales revenue</strong>.</li>
<li>This reflects the audited firm’s market strength in the face of competitors products, highlights product or service quality issues that reflect control weaknesses, and provides a general guide to other demand-side measures of firm health.</li>
<li>I have focused the following analytical review　algorithms on such demand-side measures of customer satisfaction, as these may be the auditors’ single best source of　qualitative intelligence on control weaknesses and accounting irregularities.</li>
</ul>
<aside class="notes">
<p>ほとんどの場合、財務諸表で最も重要な数字は売上収益である。 これは、競合他社の製品に対する監査済み企業の市場力を反映し、コントロールの弱点を反映する製品やサービスの品質問題を強調し、企業の健康状態の需要側の他の指標に一般的なガイドを提供する。 私は、顧客満足度の需要側の指標に焦点を当て、これらが監査人にとってコントロールの弱点や会計上の不正の質的情報の最良の情報源である可能性があるため、次の分析レビューアルゴリズムをこれに集中させている。</p>
<style type="text/css">
        span.MJX_Assistive_MathML {
          position:absolute!important;
          clip: rect(1px, 1px, 1px, 1px);
          padding: 1px 0 0 0!important;
          border: 0!important;
          height: 1px!important;
          width: 1px!important;
          overflow: hidden!important;
          display:block!important;
      }</style></aside>
</section>
<section class="slide level2">

<ul>
<li>Sales revenue reflects customer perception of products, value, and brand.</li>
<li>Repeat sales distinguish a business from a single product.</li>
<li>Brand loyalty, critical to company valuation, drives loyalty programs aimed at customer retention.</li>
<li>In subscription businesses, customer loyalty and brand recognition measure loyalty program success.</li>
<li>Customer data helps target audiences and identify key revenue drivers.</li>
</ul>
<aside class="notes">
<p>売上収益は、企業の成功の基本的な要因であり、顧客の会社の製品、価値提案、およびブランドに対する印象を反映している。 製品とビジネスの違いは、リピートセールスである。 ブランドに対する顧客のロイヤリティは、多くの企業の評価の主要な部分であり、顧客をロックインするための革新的な「ロイヤリティ」プログラムを生み出している。 これらのロイヤリティプログラムの成功または失敗は、顧客のロイヤリティとブランド認知によって測定される。 ほとんどの組織は、顧客をターゲットにするためのデータを持っており、収益ストリームの主要なドライバーを理解するために使用できる。</p>
<style type="text/css">
        span.MJX_Assistive_MathML {
          position:absolute!important;
          clip: rect(1px, 1px, 1px, 1px);
          padding: 1px 0 0 0!important;
          border: 0!important;
          height: 1px!important;
          width: 1px!important;
          overflow: hidden!important;
          display:block!important;
      }</style></aside>
</section>
<section class="slide level2">

<!-- Customers are the fuel that powers a business. -->
<ul>
<li>Loss of customers impacts sales. Furthermore, it is much more difficult and costly to gain new customers than it is to retain existing customers.</li>
<li>Customers’ impressions of the firm and its products provide important, non-financial metrics for assessing the health of a firm.</li>
<li>A firm with many dissatisfied customers is likely to suffer from weak management with high turnover, unreported control weaknesses, and to engage in “aggressive” accounting in reporting to lending institutions and shareholders.</li>
</ul>
<aside class="notes">
<p>顧客はビジネスを動かす燃料である。 顧客の喪失は売上に影響を与える。 さらに、新規顧客を獲得することは、既存の顧客を維持するよりもはるかに困難でコストがかかる。 顧客の会社や製品に対する印象は、会社の健康状態を評価するための重要な財務指標である。 多くの不満足な顧客を抱える企業は、高い離職率を持つ弱い経営、報告されない内部統制の不備、および貸金機関や株主に報告する際の「強引」な会計を行う可能性が高い。</p>
<style type="text/css">
        span.MJX_Assistive_MathML {
          position:absolute!important;
          clip: rect(1px, 1px, 1px, 1px);
          padding: 1px 0 0 0!important;
          border: 0!important;
          height: 1px!important;
          width: 1px!important;
          overflow: hidden!important;
          display:block!important;
      }</style></aside>
</section>
<section id="internet-resources-for-analytical-review-1" class="slide level2">
<h2>Internet Resources for Analytical Review</h2>
<ul>
<li>The Internet has numerous resources—social networks, forums, product reviews, industry reports, and investment advice - that can alert the auditor to problems in a client’s controls and financials.</li>
<li>Internet resources play an essential role in analytical review, and in identifying audit risks that require increased diligence and scope.</li>
<li>The remaining part of this chapter explores these Internet resources and how to incorporate them into the analytical review procedures.</li>
</ul>
<aside class="notes">
<p>インターネットには、ソーシャルネットワーク、フォーラム、製品レビュー、業界レポート、投資アドバイスなど、監査人にクライアントのコントロールや財務に問題があることを警告する多くのリソースがある。 インターネットリソースは、分析レビューと監査リスクの識別において重要な役割を果たし、増加した注意と範囲が必要な監査リスクを特定するのに役立つ。 この章の残りの部分では、これらのインターネットリソースとそれらを分析レビュー手続きに組み込む方法について探求する。</p>
<style type="text/css">
        span.MJX_Assistive_MathML {
          position:absolute!important;
          clip: rect(1px, 1px, 1px, 1px);
          padding: 1px 0 0 0!important;
          border: 0!important;
          height: 1px!important;
          width: 1px!important;
          overflow: hidden!important;
          display:block!important;
      }</style></aside>
</section></section>
<section>
<section id="us-census-data-後半" class="title-slide slide level1 center">
<h1>US Census Data (後半)</h1>

</section>
<section id="us-census-国勢調査" class="slide level2">
<h2>US Census 国勢調査</h2>
<ul>
<li>Where location and demographics are important in a business, the US Census provides extensive and reliable data.</li>
<li><em>R</em> provides several packages to access and use those repositories.</li>
<li>Data from the <em>US Census Bureau</em> is stored in tables, and to find the table for a particular metric you can use the function <code>acs.lookup</code> in the <code>acs</code> package.</li>
<li>Note that to run this code you willneed to get and install a census API key which you can request at https://api.census.gov/data/key_signup.html.</li>
</ul>
<p>Install the key with <code>api.key.install</code>.</p>
</section>
<section id="acs-package" class="slide level2">
<h2><code>acs</code> Package</h2>
<ul>
<li><p>The <code>acs.fetch</code> function is used to download data from the US Census American Community Survey.</p></li>
<li><p>The <code>acs.lookup</code> function provides a convenience function to use in advance to locate tables and variables that may be of interest.</p></li>
<li><p><code>acs.lookup</code> takes arguments similar to acs.fetch—in particular, <code>table.number</code>, <code>table.name</code>, and <code>keyword</code>, as well as <code>endyear</code>, <code>span</code>, and <code>dataset</code> — and searches for matches in the meta-data of the Census tables.</p></li>
</ul>
</section>
<section class="slide level2">

<p>Results from <code>acs.lookup</code> - which are <code>acs.lookup</code> class objects—can then be inspected, subsetted (with [square brackets]), and combined (with c or +) to create custom <code>acs.lookup</code> objects to store and later pass to <code>acs.fetch</code> which has the following arguments:</p>
<ul>
<li><code>endyear</code> is an integer indicating the latest year of the data in the survey (e.g., for data from the 2007–2011 5-year ACS data, endyear would be 2011).</li>
<li><code>span</code> is an integer indicating the span (in years) of the desired ACS data (should be 1, 3, or 5 for ACS datasets, and 0 for decennial census SF1 and SF3 datasets); defaults to 5, but ignored and reset to 0 if <code>dataset = sf1</code> or <code>sf3</code>.</li>
<li><code>geography</code> is a geo.set object specifying the census geography or geographies to be fetched; can be created “on the fly” with a call to <code>geo.make()</code>.</li>
</ul>
</section>
<section class="slide level2">

<ul>
<li><code>table.name</code> is a string giving the search term(s) to find in the name of the ACS census table (for example, “Sex” or “Age”); accepts multiple words, which must all be found in the returned table names; always case-sensitive. (Note: when set, this variable is passed to an internal call to acs.lookup—see acs.lookup).</li>
<li><code>table.number</code> is a string (not a number) indicating the table from the Census to fetch; examples: “B01003” or “B23013”; always case-sensitive. Used to fetch all variables for a given table number; if “table.number” is provided, other lookup variables (“table.name” or “keyword”) will be ignored.</li>
<li><code>variable</code> is an object of acs.lookup class, or a string or vector of strings indicating the exact variable number to fetch.</li>
</ul>
</section>
<section class="slide level2">

<ul>
<li><code>Non-acs.lookup</code> examples include “B01003_001” or “B23013_003” or c(“B01003_001”, “B23013_003”).</li>
<li><code>keyword</code> is a string or vector of strings giving the search term(s) to find in the name of the census variable (for example, “Male” or “Haiti”); always case-sensitive.</li>
<li><code>dataset</code> is either “acs” (the default), “sf1,” or “sf3,” indicating whether to fetch data from in the American Community Survey or the SF1/SF3 datasets.</li>
</ul>
</section>
<section id="female---male-ratio" class="slide level2">
<h2>Female - Male Ratio</h2>
<p>In the following example, we will compute the 2014–2019 female-to-male populations of the USA across age groups, and plot these as a bar graph.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb16"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb16-1"><a href="" aria-hidden="true" tabindex="-1"></a>pacman<span class="sc">::</span><span class="fu">p_load</span>(acs)</span>
<span id="cb16-2"><a href="" aria-hidden="true" tabindex="-1"></a><span class="fu">api.key.install</span>(<span class="st">"e6045d03ade2aa986ae443b6f9b21250df4b13fc"</span>)</span>
<span id="cb16-3"><a href="" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb16-4"><a href="" aria-hidden="true" tabindex="-1"></a>look <span class="ot">&lt;-</span> <span class="fu">acs.lookup</span>(</span>
<span id="cb16-5"><a href="" aria-hidden="true" tabindex="-1"></a>    <span class="at">endyear =</span> <span class="dv">2019</span>,</span>
<span id="cb16-6"><a href="" aria-hidden="true" tabindex="-1"></a>    <span class="at">keyword =</span> <span class="fu">c</span>(<span class="st">"Female"</span>))</span>
<span id="cb16-7"><a href="" aria-hidden="true" tabindex="-1"></a>i_look <span class="ot">&lt;-</span> look<span class="sc">@</span>results[<span class="dv">1</span><span class="sc">:</span><span class="dv">24</span>,<span class="fu">c</span>(<span class="dv">1</span>,<span class="dv">4</span>)] <span class="sc">|&gt;</span> <span class="fu">t</span>()</span>
<span id="cb16-8"><a href="" aria-hidden="true" tabindex="-1"></a><span class="fu">colnames</span>(i_look) <span class="ot">&lt;-</span> i_look[<span class="dv">1</span>,]</span>
<span id="cb16-9"><a href="" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb16-10"><a href="" aria-hidden="true" tabindex="-1"></a>geo <span class="ot">&lt;-</span> <span class="fu">geo.make</span>(<span class="at">state =</span> <span class="st">"IL"</span>) <span class="co"># Illinois</span></span>
<span id="cb16-11"><a href="" aria-hidden="true" tabindex="-1"></a>fet <span class="ot">&lt;-</span> <span class="fu">acs.fetch</span>(</span>
<span id="cb16-12"><a href="" aria-hidden="true" tabindex="-1"></a>          <span class="at">endyear =</span> <span class="dv">2014</span>,</span>
<span id="cb16-13"><a href="" aria-hidden="true" tabindex="-1"></a>          <span class="at">span =</span> <span class="dv">5</span>,</span>
<span id="cb16-14"><a href="" aria-hidden="true" tabindex="-1"></a>          <span class="at">table.number =</span> <span class="st">"B01001"</span>,</span>
<span id="cb16-15"><a href="" aria-hidden="true" tabindex="-1"></a>          <span class="at">keyword =</span> <span class="fu">c</span>(<span class="st">"Female"</span>), <span class="co"># 女性</span></span>
<span id="cb16-16"><a href="" aria-hidden="true" tabindex="-1"></a>          <span class="at">geography =</span> geo)</span>
<span id="cb16-17"><a href="" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb16-18"><a href="" aria-hidden="true" tabindex="-1"></a>fet_tbl <span class="ot">&lt;-</span> fet<span class="sc">@</span>estimate <span class="co"># get the estimate table</span></span>
<span id="cb16-19"><a href="" aria-hidden="true" tabindex="-1"></a>fet_tbl <span class="ot">&lt;-</span> <span class="fu">rbind</span>(fet_tbl,i_look[<span class="dv">2</span>,]) <span class="sc">|&gt;</span> <span class="fu">t</span>() <span class="co"># add the Illinois data</span></span>
<span id="cb16-20"><a href="" aria-hidden="true" tabindex="-1"></a><span class="fu">colnames</span>(fet_tbl) <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="st">"population"</span>,<span class="st">"age_group"</span>) <span class="co"># name the columns</span></span>
<span id="cb16-21"><a href="" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb16-22"><a href="" aria-hidden="true" tabindex="-1"></a>fet_tbl <span class="ot">&lt;-</span><span class="fu">as.data.frame</span>(fet_tbl)</span>
<span id="cb16-23"><a href="" aria-hidden="true" tabindex="-1"></a><span class="co"># make age_group an ordered factor and convert population to numeric</span></span>
<span id="cb16-24"><a href="" aria-hidden="true" tabindex="-1"></a>fet_tbl<span class="sc">$</span>age_group <span class="ot">&lt;-</span> <span class="fu">factor</span>(fet_tbl<span class="sc">$</span>age_group, <span class="at">levels =</span> fet_tbl<span class="sc">$</span>age_group)</span>
<span id="cb16-25"><a href="" aria-hidden="true" tabindex="-1"></a>fet_tbl<span class="sc">$</span>population <span class="ot">&lt;-</span> <span class="fu">as.numeric</span>(<span class="fu">as.character</span>(fet_tbl<span class="sc">$</span>population))</span>
<span id="cb16-26"><a href="" aria-hidden="true" tabindex="-1"></a>fet_fem <span class="ot">&lt;-</span><span class="fu">as.data.frame</span>(fet_tbl)</span>
<span id="cb16-27"><a href="" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb16-28"><a href="" aria-hidden="true" tabindex="-1"></a>fet <span class="ot">&lt;-</span> <span class="fu">acs.fetch</span>(<span class="at">endyear =</span> <span class="dv">2014</span>,</span>
<span id="cb16-29"><a href="" aria-hidden="true" tabindex="-1"></a>          <span class="at">span =</span> <span class="dv">5</span>,</span>
<span id="cb16-30"><a href="" aria-hidden="true" tabindex="-1"></a>          <span class="at">table.number =</span> <span class="st">"B01001"</span>,</span>
<span id="cb16-31"><a href="" aria-hidden="true" tabindex="-1"></a>          <span class="at">keyword =</span> <span class="fu">c</span>(<span class="st">"Male"</span>), <span class="co"># 男性</span></span>
<span id="cb16-32"><a href="" aria-hidden="true" tabindex="-1"></a>          <span class="at">geography =</span> geo)</span>
<span id="cb16-33"><a href="" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb16-34"><a href="" aria-hidden="true" tabindex="-1"></a>fet_tbl <span class="ot">&lt;-</span> fet<span class="sc">@</span>estimate</span>
<span id="cb16-35"><a href="" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb16-36"><a href="" aria-hidden="true" tabindex="-1"></a>fet_tbl <span class="ot">&lt;-</span> <span class="fu">rbind</span>(fet_tbl,i_look[<span class="dv">2</span>,]) <span class="sc">|&gt;</span> <span class="fu">t</span>()</span>
<span id="cb16-37"><a href="" aria-hidden="true" tabindex="-1"></a><span class="fu">colnames</span>(fet_tbl) <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="st">"population"</span>,<span class="st">"age_group"</span>)</span>
<span id="cb16-38"><a href="" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb16-39"><a href="" aria-hidden="true" tabindex="-1"></a>fet_tbl <span class="ot">&lt;-</span><span class="fu">as.data.frame</span>(fet_tbl)</span>
<span id="cb16-40"><a href="" aria-hidden="true" tabindex="-1"></a>fet_tbl<span class="sc">$</span>age_group <span class="ot">&lt;-</span> <span class="fu">factor</span>(fet_tbl<span class="sc">$</span>age_group, <span class="at">levels =</span> fet_tbl<span class="sc">$</span>age_group)</span>
<span id="cb16-41"><a href="" aria-hidden="true" tabindex="-1"></a>fet_tbl<span class="sc">$</span>population <span class="ot">&lt;-</span> <span class="fu">as.numeric</span>(<span class="fu">as.character</span>(fet_tbl<span class="sc">$</span>population))</span>
<span id="cb16-42"><a href="" aria-hidden="true" tabindex="-1"></a>fet_male <span class="ot">&lt;-</span><span class="fu">as.data.frame</span>(fet_tbl)</span>
<span id="cb16-43"><a href="" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb16-44"><a href="" aria-hidden="true" tabindex="-1"></a><span class="co"># Compute the ratio of females to males by U.S. county</span></span>
<span id="cb16-45"><a href="" aria-hidden="true" tabindex="-1"></a>fet_ratio <span class="ot">&lt;-</span> fet_fem <span class="sc">|&gt;</span> dplyr<span class="sc">::</span><span class="fu">inner_join</span>(fet_male, <span class="at">by =</span> <span class="st">"age_group"</span>)</span>
<span id="cb16-46"><a href="" aria-hidden="true" tabindex="-1"></a>fet_ratio<span class="sc">$</span>fem_to_male <span class="ot">&lt;-</span> fet_ratio<span class="sc">$</span>population.x <span class="sc">/</span> fet_ratio<span class="sc">$</span>population.y <span class="co"># 比率</span></span>
<span id="cb16-47"><a href="" aria-hidden="true" tabindex="-1"></a>fet_ratio<span class="sc">$</span>age_group <span class="ot">&lt;-</span> <span class="fu">sub</span>(<span class="st">"Female:"</span>, <span class="st">""</span>, fet_ratio<span class="sc">$</span>age_group)</span>
<span id="cb16-48"><a href="" aria-hidden="true" tabindex="-1"></a>fet_ratio<span class="sc">$</span>age_group <span class="ot">&lt;-</span> <span class="fu">factor</span>(fet_ratio<span class="sc">$</span>age_group, <span class="at">levels =</span> fet_ratio<span class="sc">$</span>age_group)</span>
<span id="cb16-49"><a href="" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb16-50"><a href="" aria-hidden="true" tabindex="-1"></a><span class="co"># 作図</span></span>
<span id="cb16-51"><a href="" aria-hidden="true" tabindex="-1"></a><span class="fu">ggplot</span>(fet_ratio[<span class="sc">-</span><span class="dv">1</span>,], <span class="fu">aes</span>(age_group, fem_to_male)) <span class="sc">+</span></span>
<span id="cb16-52"><a href="" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_col</span>() <span class="sc">+</span></span>
<span id="cb16-53"><a href="" aria-hidden="true" tabindex="-1"></a>  <span class="fu">theme</span>(<span class="at">axis.text.x =</span> <span class="fu">element_text</span>(<span class="at">angle =</span> <span class="dv">45</span>, <span class="at">hjust =</span> <span class="dv">1</span>)) <span class="sc">+</span></span>
<span id="cb16-54"><a href="" aria-hidden="true" tabindex="-1"></a>  <span class="fu">xlab</span>(<span class="st">"Age Group"</span>) <span class="sc">+</span></span>
<span id="cb16-55"><a href="" aria-hidden="true" tabindex="-1"></a>  <span class="fu">ylab</span>(<span class="st">"Female to Male Ratio"</span>)</span></code><button title="コピー" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>

</section>
<section id="female---male-ratio-output" class="slide level2 output-location-slide"><h2>Female - Male Ratio</h2><div class="cell output-location-slide">
<div class="cell-output-display">
<div>
<figure>
<p><img data-src="gaisho_2024_06_files/figure-revealjs/fem_to_male-1.png" width="960"></p>
</figure>
</div>
</div>
</div></section><section id="geographic-graphs" class="slide level2">
<h2>Geographic Graphs</h2>
<div class="cell">
<div class="sourceCode cell-code" id="cb17"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb17-1"><a href="" aria-hidden="true" tabindex="-1"></a>pacman<span class="sc">::</span><span class="fu">p_load</span>(acs)</span>
<span id="cb17-2"><a href="" aria-hidden="true" tabindex="-1"></a><span class="co"># Set API key</span></span>
<span id="cb17-3"><a href="" aria-hidden="true" tabindex="-1"></a><span class="fu">api.key.install</span>(<span class="st">"e6045d03ade2aa986ae443b6f9b21250df4b13fc"</span>)</span>
<span id="cb17-4"><a href="" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb17-5"><a href="" aria-hidden="true" tabindex="-1"></a><span class="co"># Lookup table for age groups</span></span>
<span id="cb17-6"><a href="" aria-hidden="true" tabindex="-1"></a>look <span class="ot">&lt;-</span> <span class="fu">acs.lookup</span>(<span class="at">endyear =</span> <span class="dv">2019</span>, <span class="at">keyword =</span> <span class="fu">c</span>(<span class="st">"Female"</span>))</span>
<span id="cb17-7"><a href="" aria-hidden="true" tabindex="-1"></a>age_groups <span class="ot">&lt;-</span> look<span class="sc">@</span>results[<span class="dv">1</span><span class="sc">:</span><span class="dv">24</span>, <span class="st">"label"</span>]</span>
<span id="cb17-8"><a href="" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb17-9"><a href="" aria-hidden="true" tabindex="-1"></a><span class="co"># Function to fetch ACS data</span></span>
<span id="cb17-10"><a href="" aria-hidden="true" tabindex="-1"></a>fetch_data <span class="ot">&lt;-</span> <span class="cf">function</span>(keyword, geo) {</span>
<span id="cb17-11"><a href="" aria-hidden="true" tabindex="-1"></a>  fet <span class="ot">&lt;-</span> <span class="fu">acs.fetch</span>(<span class="at">endyear =</span> <span class="dv">2014</span>, <span class="at">span =</span> <span class="dv">5</span>, <span class="at">table.number =</span> <span class="st">"B01001"</span>, <span class="at">keyword =</span> keyword, <span class="at">geography =</span> geo)</span>
<span id="cb17-12"><a href="" aria-hidden="true" tabindex="-1"></a>  fet_tbl <span class="ot">&lt;-</span> fet<span class="sc">@</span>estimate</span>
<span id="cb17-13"><a href="" aria-hidden="true" tabindex="-1"></a>  <span class="fu">colnames</span>(fet_tbl) <span class="ot">&lt;-</span> age_groups</span>
<span id="cb17-14"><a href="" aria-hidden="true" tabindex="-1"></a>  fet_tbl <span class="ot">&lt;-</span> <span class="fu">as.data.frame</span>(<span class="fu">t</span>(fet_tbl))</span>
<span id="cb17-15"><a href="" aria-hidden="true" tabindex="-1"></a>  fet_tbl <span class="ot">&lt;-</span> fet_tbl[<span class="sc">-</span><span class="dv">1</span>, , drop <span class="ot">=</span> <span class="cn">FALSE</span>]</span>
<span id="cb17-16"><a href="" aria-hidden="true" tabindex="-1"></a>  <span class="fu">colnames</span>(fet_tbl) <span class="ot">&lt;-</span> <span class="st">"population"</span></span>
<span id="cb17-17"><a href="" aria-hidden="true" tabindex="-1"></a>  fet_tbl<span class="sc">$</span>age_group <span class="ot">&lt;-</span> <span class="fu">rownames</span>(fet_tbl)</span>
<span id="cb17-18"><a href="" aria-hidden="true" tabindex="-1"></a>  fet_tbl<span class="sc">$</span>population <span class="ot">&lt;-</span> <span class="fu">as.numeric</span>(<span class="fu">as.character</span>(fet_tbl<span class="sc">$</span>population))</span>
<span id="cb17-19"><a href="" aria-hidden="true" tabindex="-1"></a>  <span class="fu">return</span>(fet_tbl)</span>
<span id="cb17-20"><a href="" aria-hidden="true" tabindex="-1"></a>}</span>
<span id="cb17-21"><a href="" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb17-22"><a href="" aria-hidden="true" tabindex="-1"></a><span class="co"># Geographic area (Illinois)</span></span>
<span id="cb17-23"><a href="" aria-hidden="true" tabindex="-1"></a>geo <span class="ot">&lt;-</span> <span class="fu">geo.make</span>(<span class="at">state =</span> <span class="st">"IL"</span>)</span>
<span id="cb17-24"><a href="" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb17-25"><a href="" aria-hidden="true" tabindex="-1"></a><span class="co"># Fetch female and male data</span></span>
<span id="cb17-26"><a href="" aria-hidden="true" tabindex="-1"></a>fet_fem <span class="ot">&lt;-</span> <span class="fu">fetch_data</span>(<span class="st">"Female"</span>, geo)</span>
<span id="cb17-27"><a href="" aria-hidden="true" tabindex="-1"></a>fet_male <span class="ot">&lt;-</span> <span class="fu">fetch_data</span>(<span class="st">"Male"</span>, geo)</span>
<span id="cb17-28"><a href="" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb17-29"><a href="" aria-hidden="true" tabindex="-1"></a><span class="co"># Compute female to male ratio</span></span>
<span id="cb17-30"><a href="" aria-hidden="true" tabindex="-1"></a>fet_ratio <span class="ot">&lt;-</span> fet_fem <span class="sc">%&gt;%</span></span>
<span id="cb17-31"><a href="" aria-hidden="true" tabindex="-1"></a>  <span class="fu">inner_join</span>(fet_male, <span class="at">by =</span> <span class="st">"age_group"</span>, <span class="at">suffix =</span> <span class="fu">c</span>(<span class="st">".fem"</span>, <span class="st">".male"</span>)) <span class="sc">%&gt;%</span></span>
<span id="cb17-32"><a href="" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">fem_to_male =</span> population.fem <span class="sc">/</span> population.male)</span>
<span id="cb17-33"><a href="" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb17-34"><a href="" aria-hidden="true" tabindex="-1"></a><span class="co"># Plot</span></span>
<span id="cb17-35"><a href="" aria-hidden="true" tabindex="-1"></a><span class="fu">ggplot</span>(fet_ratio, <span class="fu">aes</span>(<span class="at">x =</span> age_group, <span class="at">y =</span> fem_to_male)) <span class="sc">+</span></span>
<span id="cb17-36"><a href="" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_col</span>() <span class="sc">+</span></span>
<span id="cb17-37"><a href="" aria-hidden="true" tabindex="-1"></a>  <span class="fu">theme</span>(<span class="at">axis.text.x =</span> <span class="fu">element_text</span>(<span class="at">angle =</span> <span class="dv">45</span>, <span class="at">hjust =</span> <span class="dv">1</span>)) <span class="sc">+</span></span>
<span id="cb17-38"><a href="" aria-hidden="true" tabindex="-1"></a>  <span class="fu">xlab</span>(<span class="st">"Age Group"</span>) <span class="sc">+</span></span>
<span id="cb17-39"><a href="" aria-hidden="true" tabindex="-1"></a>  <span class="fu">ylab</span>(<span class="st">"Female to Male Ratio"</span>)</span></code><button title="コピー" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>

</section>
<section id="geographic-graphs-output" class="slide level2 output-location-slide"><h2>Geographic Graphs</h2><div class="cell output-location-slide">
<div class="cell-output-display">
<div>
<figure>
<p><img data-src="gaisho_2024_06_files/figure-revealjs/fem_to_male2-1.png" width="960"></p>
</figure>
</div>
</div>
</div></section><section class="slide level2">

<ul>
<li><p>The first table on the Census Bureau list is <code>B01001</code>.</p></li>
<li><p>Look at <code>look_tbl = look@results</code> under <code>variable.code</code>, for example, the <code>_009</code> at the end indicates the column of the table; each column tabulates a different age range for males or females.</p></li>
<li><p>If your end result is to create choropleth maps, using the <code>choroplethr</code> package, it is more straightforward to use the function <code>get_acs_data()</code> inside the <code>choroplethr</code> package instead of <code>acs.fetch</code> in the <code>acs</code> package.</p></li>
</ul>
</section>
<section class="slide level2">

<div class="cell">
<div class="sourceCode cell-code" id="cb18"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb18-1"><a href="" aria-hidden="true" tabindex="-1"></a>pacman<span class="sc">::</span><span class="fu">p_load</span>(choroplethrMaps, choroplethr)</span>
<span id="cb18-2"><a href="" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb18-3"><a href="" aria-hidden="true" tabindex="-1"></a><span class="co"># map = one of "state", "county" or "zip"</span></span>
<span id="cb18-4"><a href="" aria-hidden="true" tabindex="-1"></a><span class="co"># column_idx = 15 of table B01001 is "Sex by Age: Male: 45 to 49 years"</span></span>
<span id="cb18-5"><a href="" aria-hidden="true" tabindex="-1"></a><span class="co"># column_idx = 39 of table B01001 is "Sex by Age: Female: 45 to 49 years"</span></span>
<span id="cb18-6"><a href="" aria-hidden="true" tabindex="-1"></a>M45 <span class="ot">&lt;-</span> <span class="fu">get_acs_data</span>(<span class="at">tableId =</span> <span class="st">"B01001"</span>, <span class="at">map =</span> <span class="st">"county"</span>, <span class="at">column_idx=</span><span class="dv">15</span>)</span>
<span id="cb18-7"><a href="" aria-hidden="true" tabindex="-1"></a>F45 <span class="ot">&lt;-</span> <span class="fu">get_acs_data</span>(<span class="at">tableId =</span> <span class="st">"B01001"</span>, <span class="at">map =</span> <span class="st">"county"</span>, <span class="at">column_idx=</span><span class="dv">39</span>)</span>
<span id="cb18-8"><a href="" aria-hidden="true" tabindex="-1"></a>M45 <span class="ot">&lt;-</span> M45[[<span class="dv">1</span>]]</span>
<span id="cb18-9"><a href="" aria-hidden="true" tabindex="-1"></a><span class="fu">head</span>(M45)</span></code><button title="コピー" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>  region value
1  29115   425
2  29091  1352
3  29101  1754
4  29105  1306
5  29125   365
6  29161  1365</code></pre>
</div>
</div>
</section>
<section class="slide level2">

<div class="cell">
<div class="sourceCode cell-code" id="cb20"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb20-1"><a href="" aria-hidden="true" tabindex="-1"></a>F45 <span class="ot">&lt;-</span> F45[[<span class="dv">1</span>]]</span>
<span id="cb20-2"><a href="" aria-hidden="true" tabindex="-1"></a><span class="fu">head</span>(F45)</span></code><button title="コピー" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>  region value
1  29115   458
2  29091  1417
3  29101  1697
4  29105  1276
5  29125   349
6  29161  1489</code></pre>
</div>
</div>
</section>
<section class="slide level2">

<div class="cell">
<div class="sourceCode cell-code" id="cb22"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb22-1"><a href="" aria-hidden="true" tabindex="-1"></a>R45 <span class="ot">&lt;-</span> M45 <span class="sc">|&gt;</span> dplyr<span class="sc">::</span><span class="fu">inner_join</span>(F45, <span class="at">by =</span> <span class="st">"region"</span>)</span>
<span id="cb22-2"><a href="" aria-hidden="true" tabindex="-1"></a>R45<span class="sc">$</span>value <span class="ot">&lt;-</span> R45<span class="sc">$</span>value.y <span class="sc">/</span> R45<span class="sc">$</span>value.x</span>
<span id="cb22-3"><a href="" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb22-4"><a href="" aria-hidden="true" tabindex="-1"></a><span class="fu">county_choropleth</span>(R45[,<span class="fu">c</span>(<span class="dv">1</span>,<span class="dv">4</span>)], <span class="at">title =</span> <span class="st">"Female / Male Ratio: 45 - 49 y.o. by County"</span>)</span></code><button title="コピー" class="code-copy-button"><i class="bi"></i></button></pre></div>

</div>
<!--- ここから下は動く --->
<img data-src="gaisho_2024_06_files/figure-revealjs/unnamed-chunk-2-1.png" width="960" class="r-stretch"></section>
<section id="r-and-application-programming-interfaces-api" class="slide level2">
<h2>R and Application Programming Interfaces (API)</h2>
<ul>
<li><p>The <em>R</em> language is ideal for ad hoc intelligence scanning, with packages that support one-off analyses of Internet data and datastreams.</p></li>
<li><p><strong>APIs</strong> allow access to dynamic, streaming datastreams, where data is continually updated as users post new content.</p></li>
<li><p>Datastreams may be <strong>throttled</strong> to manage server load. Three main API protocols are commonly used for web data access.</p></li>
</ul>
</section>
<section id="api-protocols" class="slide level2">
<h2>API Protocols</h2>
<ol type="1">
<li><strong>JSON (JavaScript Object Notation)</strong>:
<ul>
<li>Open-standard format using human-readable text to transmit data objects (attribute–value pairs, arrays).</li>
<li>Common in asynchronous browser–server communication and often replaces XML in AJAX systems.</li>
</ul></li>
<li><strong>REST (Representational State Transfer)</strong>:
<ul>
<li>Architectural style for creating web services, allowing interoperability between systems.</li>
<li>RESTful services use stateless operations to access and manipulate web resources.</li>
</ul></li>
<li><strong>SOAP (Simple Object Access Protocol)</strong>:
<ul>
<li>Messaging protocol for structured information exchange in web services.</li>
<li>Uses XML format, typically over HTTP or SMTP, supporting extensibility and neutrality.</li>
</ul></li>
</ol>
</section>
<section id="api-access-in-r" class="slide level2">
<h2>API Access in R</h2>
<ul>
<li><p><strong>OAuth (Open Authorization)</strong>: Token-based authentication standard, allowing third-party services to use user account information without sharing passwords.</p></li>
<li><p><strong>OAuth Versions</strong>:</p>
<ul>
<li><strong>OAuth 1.0</strong>: Introduced by Twitter, protocol published in 2010.</li>
<li><strong>OAuth 2.0</strong>: Published in 2012 (not compatible with 1.0); offers specific authorization flows for web, desktop, mobile, and smart devices.</li>
</ul></li>
<li><p><strong>Adoption</strong>:</p>
<ul>
<li>Widely supported by Facebook (Graph API), Google, Amazon, and Microsoft (Azure Active Directory).</li>
<li>Now the de facto standard for securing web services.</li>
</ul></li>
</ul>
</section></section>
<section>
<section id="technical-analysis-of-product-and-customer-news-sources-on-the-web" class="title-slide slide level1 center">
<h1>Technical Analysis of Product and Customer News Sources on the Web</h1>

</section>
<section id="text-mining-and-nlp" class="slide level2">
<h2>text mining and NLP</h2>
<ul>
<li>Most text mining and natural language processing (NLP) modeling uses “bag of words” (<em>BoW</em>) or “<em>bag of n-grams</em>” methods.</li>
<li>Despite their simplicity, these models usually demonstrate good performance on text categorization and classification tasks.</li>
<li>But in contrast to their theoretical simplicity and practical efficiency, building bag-of-words models involves technical challenges.</li>
<li>This is especially the case in R because of its <em>copy-on-modify semantics</em>.</li>
</ul>
<aside class="notes">
<p>ほとんどのテキストマイニングと自然言語処理（NLP）モデリングは、「Bag-of-Words(BoW)」または「n-gramのバッグ」の方法を使用する。 単純さにもかかわらず、これらのモデルは通常、テキストの分類および分類タスクで優れたパフォーマンスを発揮します。 しかし、理論的な単純さと実用的な効率に対して、Bag-of-Wordsモデルの構築には技術的な課題が伴います。 これは特に、Rのコピー修正セマンティクスのためです。</p>
<style type="text/css">
        span.MJX_Assistive_MathML {
          position:absolute!important;
          clip: rect(1px, 1px, 1px, 1px);
          padding: 1px 0 0 0!important;
          border: 0!important;
          height: 1px!important;
          width: 1px!important;
          overflow: hidden!important;
          display:block!important;
      }</style></aside>
</section>
<section id="text-analysis-3-steps" class="slide level2">
<h2>Text Analysis 3 steps</h2>
<p>Let us briefly review some of the steps in a typical text analysis pipeline: <!-- 典型的なテキスト分析パイプラインのいくつかのステップを簡単に見直してみましょう。 --></p>
<ol type="1">
<li>The auditor usually begins by constructing a <em>document-term matrix</em> (DTM) or <em>term-co-occurrence matrix</em> (TCM) from input documents. <!-- 監査人は通常、入力ドキュメントから文書用語行列（DTM）または用語共起行列（TCM）を構築して開始します。 --> In other words, the first step is to <em>vectorize text</em> by creating a map from words or n-grams to a vector space. <!-- 言い換えれば、最初のステップは、テキストをベクトル化して、単語またはn-gramからベクトル空間へのマップを作成することです。 --></li>
<li>The auditor fits a model to that DTM. These models might include text classification, topic modeling, similarity search,　etc. <!-- 監査人は、そのDTMにモデルを適合させます。これらのモデルには、テキスト分類、トピックモデリング、類似性検索などが含まれる可能性があります。 --> Fitting the model will include tuning and validating the model. <!-- モデルの適合には、モデルの調整と検証が含まれます。 --></li>
<li>Finally the auditor applies the model to new data. <!-- 最後に、監査人はモデルを新しいデータに適用します。 --></li>
</ol>

</section></section>

    </div>
  <div class="quarto-auto-generated-content" style="display: none;">
<p><img src="img/kobe_logo.png" class="slide-logo"></p>
<div class="footer footer-default">
<p>Kobe University, Business Administration</p>
</div>
</div></div>

  <script>window.backupDefine = window.define; window.define = undefined;</script>
  <script src="gaisho_2024_06_files/libs/revealjs/dist/reveal.js"></script>
  <!-- reveal.js plugins -->
  <script src="gaisho_2024_06_files/libs/revealjs/plugin/quarto-line-highlight/line-highlight.js"></script>
  <script src="gaisho_2024_06_files/libs/revealjs/plugin/pdf-export/pdfexport.js"></script>
  <script src="gaisho_2024_06_files/libs/revealjs/plugin/reveal-menu/menu.js"></script>
  <script src="gaisho_2024_06_files/libs/revealjs/plugin/reveal-menu/quarto-menu.js"></script>
  <script src="gaisho_2024_06_files/libs/revealjs/plugin/reveal-chalkboard/plugin.js"></script>
  <script src="gaisho_2024_06_files/libs/revealjs/plugin/quarto-support/support.js"></script>
  

  <script src="gaisho_2024_06_files/libs/revealjs/plugin/notes/notes.js"></script>
  <script src="gaisho_2024_06_files/libs/revealjs/plugin/search/search.js"></script>
  <script src="gaisho_2024_06_files/libs/revealjs/plugin/zoom/zoom.js"></script>
  <script>window.define = window.backupDefine; window.backupDefine = undefined;</script>

  <script>

      // Full list of configuration options available at:
      // https://revealjs.com/config/
      Reveal.initialize({
'controlsAuto': true,
'previewLinksAuto': false,
'pdfSeparateFragments': false,
'autoAnimateEasing': "ease",
'autoAnimateDuration': 1,
'autoAnimateUnmatched': true,
'jumpToSlide': true,
'menu': {"side":"left","useTextContentForMissingTitles":true,"markers":false,"loadIcons":false,"custom":[{"title":"Tools","icon":"<i class=\"fas fa-gear\"></i>","content":"<ul class=\"slide-menu-items\">\n<li class=\"slide-tool-item active\" data-item=\"0\"><a href=\"#\" onclick=\"RevealMenuToolHandlers.fullscreen(event)\"><kbd>f</kbd> Fullscreen</a></li>\n<li class=\"slide-tool-item\" data-item=\"1\"><a href=\"#\" onclick=\"RevealMenuToolHandlers.speakerMode(event)\"><kbd>s</kbd> Speaker View</a></li>\n<li class=\"slide-tool-item\" data-item=\"2\"><a href=\"#\" onclick=\"RevealMenuToolHandlers.overview(event)\"><kbd>o</kbd> Slide Overview</a></li>\n<li class=\"slide-tool-item\" data-item=\"3\"><a href=\"#\" onclick=\"RevealMenuToolHandlers.togglePdfExport(event)\"><kbd>e</kbd> PDF Export Mode</a></li>\n<li class=\"slide-tool-item\" data-item=\"4\"><a href=\"#\" onclick=\"RevealMenuToolHandlers.toggleScrollView(event)\"><kbd>r</kbd> Scroll View Mode</a></li>\n<li class=\"slide-tool-item\" data-item=\"5\"><a href=\"#\" onclick=\"RevealMenuToolHandlers.toggleChalkboard(event)\"><kbd>b</kbd> Toggle Chalkboard</a></li>\n<li class=\"slide-tool-item\" data-item=\"6\"><a href=\"#\" onclick=\"RevealMenuToolHandlers.toggleNotesCanvas(event)\"><kbd>c</kbd> Toggle Notes Canvas</a></li>\n<li class=\"slide-tool-item\" data-item=\"7\"><a href=\"#\" onclick=\"RevealMenuToolHandlers.downloadDrawings(event)\"><kbd>d</kbd> Download Drawings</a></li>\n<li class=\"slide-tool-item\" data-item=\"8\"><a href=\"#\" onclick=\"RevealMenuToolHandlers.keyboardHelp(event)\"><kbd>?</kbd> Keyboard Help</a></li>\n</ul>"}],"openButton":true},
'chalkboard': {"buttons":true},
'smaller': false,
 
        // Display controls in the bottom right corner
        controls: false,

        // Help the user learn the controls by providing hints, for example by
        // bouncing the down arrow when they first encounter a vertical slide
        controlsTutorial: false,

        // Determines where controls appear, "edges" or "bottom-right"
        controlsLayout: 'edges',

        // Visibility rule for backwards navigation arrows; "faded", "hidden"
        // or "visible"
        controlsBackArrows: 'faded',

        // Display a presentation progress bar
        progress: true,

        // Display the page number of the current slide
        slideNumber: 'c/t',

        // 'all', 'print', or 'speaker'
        showSlideNumber: 'all',

        // Add the current slide number to the URL hash so that reloading the
        // page/copying the URL will return you to the same slide
        hash: true,

        // Start with 1 for the hash rather than 0
        hashOneBasedIndex: false,

        // Flags if we should monitor the hash and change slides accordingly
        respondToHashChanges: true,

        // Push each slide change to the browser history
        history: true,

        // Enable keyboard shortcuts for navigation
        keyboard: true,

        // Enable the slide overview mode
        overview: true,

        // Disables the default reveal.js slide layout (scaling and centering)
        // so that you can use custom CSS layout
        disableLayout: false,

        // Vertical centering of slides
        center: false,

        // Enables touch navigation on devices with touch input
        touch: true,

        // Loop the presentation
        loop: false,

        // Change the presentation direction to be RTL
        rtl: false,

        // see https://revealjs.com/vertical-slides/#navigation-mode
        navigationMode: 'linear',

        // Randomizes the order of slides each time the presentation loads
        shuffle: false,

        // Turns fragments on and off globally
        fragments: true,

        // Flags whether to include the current fragment in the URL,
        // so that reloading brings you to the same fragment position
        fragmentInURL: false,

        // Flags if the presentation is running in an embedded mode,
        // i.e. contained within a limited portion of the screen
        embedded: false,

        // Flags if we should show a help overlay when the questionmark
        // key is pressed
        help: true,

        // Flags if it should be possible to pause the presentation (blackout)
        pause: true,

        // Flags if speaker notes should be visible to all viewers
        showNotes: false,

        // Global override for autoplaying embedded media (null/true/false)
        autoPlayMedia: null,

        // Global override for preloading lazy-loaded iframes (null/true/false)
        preloadIframes: null,

        // Number of milliseconds between automatically proceeding to the
        // next slide, disabled when set to 0, this value can be overwritten
        // by using a data-autoslide attribute on your slides
        autoSlide: 0,

        // Stop auto-sliding after user input
        autoSlideStoppable: true,

        // Use this method for navigation when auto-sliding
        autoSlideMethod: null,

        // Specify the average time in seconds that you think you will spend
        // presenting each slide. This is used to show a pacing timer in the
        // speaker view
        defaultTiming: null,

        // Enable slide navigation via mouse wheel
        mouseWheel: false,

        // The display mode that will be used to show slides
        display: 'block',

        // Hide cursor if inactive
        hideInactiveCursor: true,

        // Time before the cursor is hidden (in ms)
        hideCursorTime: 5000,

        // Opens links in an iframe preview overlay
        previewLinks: false,

        // Transition style (none/fade/slide/convex/concave/zoom)
        transition: 'slide',

        // Transition speed (default/fast/slow)
        transitionSpeed: 'default',

        // Transition style for full page slide backgrounds
        // (none/fade/slide/convex/concave/zoom)
        backgroundTransition: 'none',

        // Number of slides away from the current that are visible
        viewDistance: 3,

        // Number of slides away from the current that are visible on mobile
        // devices. It is advisable to set this to a lower number than
        // viewDistance in order to save resources.
        mobileViewDistance: 2,

        // The "normal" size of the presentation, aspect ratio will be preserved
        // when the presentation is scaled to fit different resolutions. Can be
        // specified using percentage units.
        width: 1300,

        height: 900,

        // Factor of the display size that should remain empty around the content
        margin: 0.1,

        // reveal.js plugins
        plugins: [QuartoLineHighlight, PdfExport, RevealMenu, RevealChalkboard, QuartoSupport,

          RevealNotes,
          RevealSearch,
          RevealZoom
        ]
      });
    </script>
    
    <script>
      // htmlwidgets need to know to resize themselves when slides are shown/hidden.
      // Fire the "slideenter" event (handled by htmlwidgets.js) when the current
      // slide changes (different for each slide format).
      (function () {
        // dispatch for htmlwidgets
        function fireSlideEnter() {
          const event = window.document.createEvent("Event");
          event.initEvent("slideenter", true, true);
          window.document.dispatchEvent(event);
        }

        function fireSlideChanged(previousSlide, currentSlide) {
          fireSlideEnter();

          // dispatch for shiny
          if (window.jQuery) {
            if (previousSlide) {
              window.jQuery(previousSlide).trigger("hidden");
            }
            if (currentSlide) {
              window.jQuery(currentSlide).trigger("shown");
            }
          }
        }

        // hookup for slidy
        if (window.w3c_slidy) {
          window.w3c_slidy.add_observer(function (slide_num) {
            // slide_num starts at position 1
            fireSlideChanged(null, w3c_slidy.slides[slide_num - 1]);
          });
        }

      })();
    </script>

    <script id="quarto-html-after-body" type="application/javascript">
    window.document.addEventListener("DOMContentLoaded", function (event) {
      const toggleBodyColorMode = (bsSheetEl) => {
        const mode = bsSheetEl.getAttribute("data-mode");
        const bodyEl = window.document.querySelector("body");
        if (mode === "dark") {
          bodyEl.classList.add("quarto-dark");
          bodyEl.classList.remove("quarto-light");
        } else {
          bodyEl.classList.add("quarto-light");
          bodyEl.classList.remove("quarto-dark");
        }
      }
      const toggleBodyColorPrimary = () => {
        const bsSheetEl = window.document.querySelector("link#quarto-bootstrap");
        if (bsSheetEl) {
          toggleBodyColorMode(bsSheetEl);
        }
      }
      toggleBodyColorPrimary();  
      const tabsets =  window.document.querySelectorAll(".panel-tabset-tabby")
      tabsets.forEach(function(tabset) {
        const tabby = new Tabby('#' + tabset.id);
      });
      const isCodeAnnotation = (el) => {
        for (const clz of el.classList) {
          if (clz.startsWith('code-annotation-')) {                     
            return true;
          }
        }
        return false;
      }
      const onCopySuccess = function(e) {
        // button target
        const button = e.trigger;
        // don't keep focus
        button.blur();
        // flash "checked"
        button.classList.add('code-copy-button-checked');
        var currentTitle = button.getAttribute("title");
        button.setAttribute("title", "コピーしました");
        let tooltip;
        if (window.bootstrap) {
          button.setAttribute("data-bs-toggle", "tooltip");
          button.setAttribute("data-bs-placement", "left");
          button.setAttribute("data-bs-title", "コピーしました");
          tooltip = new bootstrap.Tooltip(button, 
            { trigger: "manual", 
              customClass: "code-copy-button-tooltip",
              offset: [0, -8]});
          tooltip.show();    
        }
        setTimeout(function() {
          if (tooltip) {
            tooltip.hide();
            button.removeAttribute("data-bs-title");
            button.removeAttribute("data-bs-toggle");
            button.removeAttribute("data-bs-placement");
          }
          button.setAttribute("title", currentTitle);
          button.classList.remove('code-copy-button-checked');
        }, 1000);
        // clear code selection
        e.clearSelection();
      }
      const getTextToCopy = function(trigger) {
          const codeEl = trigger.previousElementSibling.cloneNode(true);
          for (const childEl of codeEl.children) {
            if (isCodeAnnotation(childEl)) {
              childEl.remove();
            }
          }
          return codeEl.innerText;
      }
      const clipboard = new window.ClipboardJS('.code-copy-button:not([data-in-quarto-modal])', {
        text: getTextToCopy
      });
      clipboard.on('success', onCopySuccess);
      if (window.document.getElementById('quarto-embedded-source-code-modal')) {
        // For code content inside modals, clipBoardJS needs to be initialized with a container option
        // TODO: Check when it could be a function (https://github.com/zenorocha/clipboard.js/issues/860)
        const clipboardModal = new window.ClipboardJS('.code-copy-button[data-in-quarto-modal]', {
          text: getTextToCopy,
          container: window.document.getElementById('quarto-embedded-source-code-modal')
        });
        clipboardModal.on('success', onCopySuccess);
      }
        var localhostRegex = new RegExp(/^(?:http|https):\/\/localhost\:?[0-9]*\//);
        var mailtoRegex = new RegExp(/^mailto:/);
          var filterRegex = new RegExp('/' + window.location.host + '/');
        var isInternal = (href) => {
            return filterRegex.test(href) || localhostRegex.test(href) || mailtoRegex.test(href);
        }
        // Inspect non-navigation links and adorn them if external
     	var links = window.document.querySelectorAll('a[href]:not(.nav-link):not(.navbar-brand):not(.toc-action):not(.sidebar-link):not(.sidebar-item-toggle):not(.pagination-link):not(.no-external):not([aria-hidden]):not(.dropdown-item):not(.quarto-navigation-tool):not(.about-link)');
        for (var i=0; i<links.length; i++) {
          const link = links[i];
          if (!isInternal(link.href)) {
            // undo the damage that might have been done by quarto-nav.js in the case of
            // links that we want to consider external
            if (link.dataset.originalHref !== undefined) {
              link.href = link.dataset.originalHref;
            }
          }
        }
      function tippyHover(el, contentFn, onTriggerFn, onUntriggerFn) {
        const config = {
          allowHTML: true,
          maxWidth: 500,
          delay: 100,
          arrow: false,
          appendTo: function(el) {
              return el.closest('section.slide') || el.parentElement;
          },
          interactive: true,
          interactiveBorder: 10,
          theme: 'light-border',
          placement: 'bottom-start',
        };
        if (contentFn) {
          config.content = contentFn;
        }
        if (onTriggerFn) {
          config.onTrigger = onTriggerFn;
        }
        if (onUntriggerFn) {
          config.onUntrigger = onUntriggerFn;
        }
          config['offset'] = [0,0];
          config['maxWidth'] = 700;
        window.tippy(el, config); 
      }
      const noterefs = window.document.querySelectorAll('a[role="doc-noteref"]');
      for (var i=0; i<noterefs.length; i++) {
        const ref = noterefs[i];
        tippyHover(ref, function() {
          // use id or data attribute instead here
          let href = ref.getAttribute('data-footnote-href') || ref.getAttribute('href');
          try { href = new URL(href).hash; } catch {}
          const id = href.replace(/^#\/?/, "");
          const note = window.document.getElementById(id);
          if (note) {
            return note.innerHTML;
          } else {
            return "";
          }
        });
      }
      const findCites = (el) => {
        const parentEl = el.parentElement;
        if (parentEl) {
          const cites = parentEl.dataset.cites;
          if (cites) {
            return {
              el,
              cites: cites.split(' ')
            };
          } else {
            return findCites(el.parentElement)
          }
        } else {
          return undefined;
        }
      };
      var bibliorefs = window.document.querySelectorAll('a[role="doc-biblioref"]');
      for (var i=0; i<bibliorefs.length; i++) {
        const ref = bibliorefs[i];
        const citeInfo = findCites(ref);
        if (citeInfo) {
          tippyHover(citeInfo.el, function() {
            var popup = window.document.createElement('div');
            citeInfo.cites.forEach(function(cite) {
              var citeDiv = window.document.createElement('div');
              citeDiv.classList.add('hanging-indent');
              citeDiv.classList.add('csl-entry');
              var biblioDiv = window.document.getElementById('ref-' + cite);
              if (biblioDiv) {
                citeDiv.innerHTML = biblioDiv.innerHTML;
              }
              popup.appendChild(citeDiv);
            });
            return popup.innerHTML;
          });
        }
      }
    });
    </script>
    

</body></html>