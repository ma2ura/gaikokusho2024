<!DOCTYPE html>
<html lang="ja"><head>
<script src="gaisho_2024_04_files/libs/clipboard/clipboard.min.js"></script>
<script src="gaisho_2024_04_files/libs/quarto-html/tabby.min.js"></script>
<script src="gaisho_2024_04_files/libs/quarto-html/popper.min.js"></script>
<script src="gaisho_2024_04_files/libs/quarto-html/tippy.umd.min.js"></script>
<link href="gaisho_2024_04_files/libs/quarto-html/tippy.css" rel="stylesheet">
<link href="gaisho_2024_04_files/libs/quarto-html/light-border.css" rel="stylesheet">
<link href="gaisho_2024_04_files/libs/quarto-html/quarto-html.min.css" rel="stylesheet" data-mode="light">
<link href="gaisho_2024_04_files/libs/quarto-html/quarto-syntax-highlighting.css" rel="stylesheet" id="quarto-text-highlighting-styles"><meta charset="utf-8">
  <meta name="generator" content="quarto-1.5.56">

  <meta name="author" content="Soichi Matsuura">
  <meta name="dcterms.date" content="2024-10-23">
  <title>外国書購読 Day4  Risk Assessment and Planning</title>
  <meta name="apple-mobile-web-app-capable" content="yes">
  <meta name="apple-mobile-web-app-status-bar-style" content="black-translucent">
  <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no, minimal-ui">
  <link rel="stylesheet" href="gaisho_2024_04_files/libs/revealjs/dist/reset.css">
  <link rel="stylesheet" href="gaisho_2024_04_files/libs/revealjs/dist/reveal.css">
  <style>
    code{white-space: pre-wrap;}
    span.smallcaps{font-variant: small-caps;}
    div.columns{display: flex; gap: min(4vw, 1.5em);}
    div.column{flex: auto; overflow-x: auto;}
    div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
    ul.task-list{list-style: none;}
    ul.task-list li input[type="checkbox"] {
      width: 0.8em;
      margin: 0 0.8em 0.2em -1em; /* quarto-specific, see https://github.com/quarto-dev/quarto-cli/issues/4556 */ 
      vertical-align: middle;
    }
    /* CSS for syntax highlighting */
    pre > code.sourceCode { white-space: pre; position: relative; }
    pre > code.sourceCode > span { line-height: 1.25; }
    pre > code.sourceCode > span:empty { height: 1.2em; }
    .sourceCode { overflow: visible; }
    code.sourceCode > span { color: inherit; text-decoration: inherit; }
    div.sourceCode { margin: 1em 0; }
    pre.sourceCode { margin: 0; }
    @media screen {
    div.sourceCode { overflow: auto; }
    }
    @media print {
    pre > code.sourceCode { white-space: pre-wrap; }
    pre > code.sourceCode > span { display: inline-block; text-indent: -5em; padding-left: 5em; }
    }
    pre.numberSource code
      { counter-reset: source-line 0; }
    pre.numberSource code > span
      { position: relative; left: -4em; counter-increment: source-line; }
    pre.numberSource code > span > a:first-child::before
      { content: counter(source-line);
        position: relative; left: -1em; text-align: right; vertical-align: baseline;
        border: none; display: inline-block;
        -webkit-touch-callout: none; -webkit-user-select: none;
        -khtml-user-select: none; -moz-user-select: none;
        -ms-user-select: none; user-select: none;
        padding: 0 4px; width: 4em;
        color: #aaaaaa;
      }
    pre.numberSource { margin-left: 3em; border-left: 1px solid #aaaaaa;  padding-left: 4px; }
    div.sourceCode
      { color: #003b4f; background-color: #f1f3f5; }
    @media screen {
    pre > code.sourceCode > span > a:first-child::before { text-decoration: underline; }
    }
    code span { color: #003b4f; } /* Normal */
    code span.al { color: #ad0000; } /* Alert */
    code span.an { color: #5e5e5e; } /* Annotation */
    code span.at { color: #657422; } /* Attribute */
    code span.bn { color: #ad0000; } /* BaseN */
    code span.bu { } /* BuiltIn */
    code span.cf { color: #003b4f; font-weight: bold; } /* ControlFlow */
    code span.ch { color: #20794d; } /* Char */
    code span.cn { color: #8f5902; } /* Constant */
    code span.co { color: #5e5e5e; } /* Comment */
    code span.cv { color: #5e5e5e; font-style: italic; } /* CommentVar */
    code span.do { color: #5e5e5e; font-style: italic; } /* Documentation */
    code span.dt { color: #ad0000; } /* DataType */
    code span.dv { color: #ad0000; } /* DecVal */
    code span.er { color: #ad0000; } /* Error */
    code span.ex { } /* Extension */
    code span.fl { color: #ad0000; } /* Float */
    code span.fu { color: #4758ab; } /* Function */
    code span.im { color: #00769e; } /* Import */
    code span.in { color: #5e5e5e; } /* Information */
    code span.kw { color: #003b4f; font-weight: bold; } /* Keyword */
    code span.op { color: #5e5e5e; } /* Operator */
    code span.ot { color: #003b4f; } /* Other */
    code span.pp { color: #ad0000; } /* Preprocessor */
    code span.sc { color: #5e5e5e; } /* SpecialChar */
    code span.ss { color: #20794d; } /* SpecialString */
    code span.st { color: #20794d; } /* String */
    code span.va { color: #111111; } /* Variable */
    code span.vs { color: #20794d; } /* VerbatimString */
    code span.wa { color: #5e5e5e; font-style: italic; } /* Warning */
  </style>
  <link rel="stylesheet" href="gaisho_2024_04_files/libs/revealjs/dist/theme/quarto.css">
  <link rel="stylesheet" href="mystyle.css">
  <script>window.backupDefine = window.define; window.define = undefined;</script><script src="https://cdn.jsdelivr.net/npm/katex@latest/dist/katex.min.js"></script>
  <script>document.addEventListener("DOMContentLoaded", function () {
 var mathElements = document.getElementsByClassName("math");
 var macros = [];
 for (var i = 0; i < mathElements.length; i++) {
  var texText = mathElements[i].firstChild;
  if (mathElements[i].tagName == "SPAN") {
   katex.render(texText.data, mathElements[i], {
    displayMode: mathElements[i].classList.contains('display'),
    throwOnError: false,
    macros: macros,
    fleqn: false
   });
}}});
  </script>
  <script>window.define = window.backupDefine; window.backupDefine = undefined;</script><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/katex@latest/dist/katex.min.css">
  <link href="gaisho_2024_04_files/libs/revealjs/plugin/quarto-line-highlight/line-highlight.css" rel="stylesheet">
  <link href="gaisho_2024_04_files/libs/revealjs/plugin/reveal-menu/menu.css" rel="stylesheet">
  <link href="gaisho_2024_04_files/libs/revealjs/plugin/reveal-menu/quarto-menu.css" rel="stylesheet">
  <link href="gaisho_2024_04_files/libs/revealjs/plugin/reveal-chalkboard/font-awesome/css/all.css" rel="stylesheet">
  <link href="gaisho_2024_04_files/libs/revealjs/plugin/reveal-chalkboard/style.css" rel="stylesheet">
  <link href="gaisho_2024_04_files/libs/revealjs/plugin/quarto-support/footer.css" rel="stylesheet">
  <style type="text/css">

  .callout {
    margin-top: 1em;
    margin-bottom: 1em;  
    border-radius: .25rem;
  }

  .callout.callout-style-simple { 
    padding: 0em 0.5em;
    border-left: solid #acacac .3rem;
    border-right: solid 1px silver;
    border-top: solid 1px silver;
    border-bottom: solid 1px silver;
    display: flex;
  }

  .callout.callout-style-default {
    border-left: solid #acacac .3rem;
    border-right: solid 1px silver;
    border-top: solid 1px silver;
    border-bottom: solid 1px silver;
  }

  .callout .callout-body-container {
    flex-grow: 1;
  }

  .callout.callout-style-simple .callout-body {
    font-size: 1rem;
    font-weight: 400;
  }

  .callout.callout-style-default .callout-body {
    font-size: 0.9rem;
    font-weight: 400;
  }

  .callout.callout-titled.callout-style-simple .callout-body {
    margin-top: 0.2em;
  }

  .callout:not(.callout-titled) .callout-body {
      display: flex;
  }

  .callout:not(.no-icon).callout-titled.callout-style-simple .callout-content {
    padding-left: 1.6em;
  }

  .callout.callout-titled .callout-header {
    padding-top: 0.2em;
    margin-bottom: -0.2em;
  }

  .callout.callout-titled .callout-title  p {
    margin-top: 0.5em;
    margin-bottom: 0.5em;
  }
    
  .callout.callout-titled.callout-style-simple .callout-content  p {
    margin-top: 0;
  }

  .callout.callout-titled.callout-style-default .callout-content  p {
    margin-top: 0.7em;
  }

  .callout.callout-style-simple div.callout-title {
    border-bottom: none;
    font-size: .9rem;
    font-weight: 600;
    opacity: 75%;
  }

  .callout.callout-style-default  div.callout-title {
    border-bottom: none;
    font-weight: 600;
    opacity: 85%;
    font-size: 0.9rem;
    padding-left: 0.5em;
    padding-right: 0.5em;
  }

  .callout.callout-style-default div.callout-content {
    padding-left: 0.5em;
    padding-right: 0.5em;
  }

  .callout.callout-style-simple .callout-icon::before {
    height: 1rem;
    width: 1rem;
    display: inline-block;
    content: "";
    background-repeat: no-repeat;
    background-size: 1rem 1rem;
  }

  .callout.callout-style-default .callout-icon::before {
    height: 0.9rem;
    width: 0.9rem;
    display: inline-block;
    content: "";
    background-repeat: no-repeat;
    background-size: 0.9rem 0.9rem;
  }

  .callout-title {
    display: flex
  }
    
  .callout-icon::before {
    margin-top: 1rem;
    padding-right: .5rem;
  }

  .callout.no-icon::before {
    display: none !important;
  }

  .callout.callout-titled .callout-body > .callout-content > :last-child {
    padding-bottom: 0.5rem;
    margin-bottom: 0;
  }

  .callout.callout-titled .callout-icon::before {
    margin-top: .5rem;
    padding-right: .5rem;
  }

  .callout:not(.callout-titled) .callout-icon::before {
    margin-top: 1rem;
    padding-right: .5rem;
  }

  /* Callout Types */

  div.callout-note {
    border-left-color: #4582ec !important;
  }

  div.callout-note .callout-icon::before {
    background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAAgCAYAAABzenr0AAAAAXNSR0IArs4c6QAAAERlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAA6ABAAMAAAABAAEAAKACAAQAAAABAAAAIKADAAQAAAABAAAAIAAAAACshmLzAAAEU0lEQVRYCcVXTWhcVRQ+586kSUMMxkyaElstCto2SIhitS5Ek8xUKV2poatCcVHtUlFQk8mbaaziwpWgglJwVaquitBOfhQXFlqlzSJpFSpIYyXNjBNiTCck7x2/8/LeNDOZxDuEkgOXe++553zfefee+/OYLOXFk3+1LLrRdiO81yNqZ6K9cG0P3MeFaMIQjXssE8Z1JzLO9ls20MBZX7oG8w9GxB0goaPrW5aNMp1yOZIa7Wv6o2ykpLtmAPs/vrG14Z+6d4jpbSKuhdcSyq9wGMPXjonwmESXrriLzFGOdDBLB8Y6MNYBu0dRokSygMA/mrun8MGFN3behm6VVAwg4WR3i6FvYK1T7MHo9BK7ydH+1uurECoouk5MPRyVSBrBHMYwVobG2aOXM07sWrn5qgB60rc6mcwIDJtQrnrEr44kmy+UO9r0u9O5/YbkS9juQckLed3DyW2XV/qWBBB3ptvI8EUY3I9p/67OW+g967TNr3Sotn3IuVlfMLVnsBwH4fsnebJvyGm5GeIUA3jljERmrv49SizPYuq+z7c2H/jlGC+Ghhupn/hcapqmcudB9jwJ/3jvnvu6vu5lVzF1fXyZuZZ7U8nRmVzytvT+H3kilYvH09mLWrQdwFSsFEsxFVs5fK7A0g8gMZjbif4ACpKbjv7gNGaD8bUrlk8x+KRflttr22JEMRUbTUwwDQScyzPgedQHZT0xnx7ujw2jfVfExwYHwOsDTjLdJ2ebmeQIlJ7neo41s/DrsL3kl+W2lWvAga0tR3zueGr6GL78M3ifH0rGXrBC2aAR8uYcIA5gwV8zIE8onoh8u0Fca/ciF7j1uOzEnqcIm59sEXoGc0+z6+H45V1CvAvHcD7THztu669cnp+L0okAeIc6zjbM/24LgGM1gZk7jnRu1aQWoU9sfUOuhrmtaPIO3YY1KLLWZaEO5TKUbMY5zx8W9UJ6elpLwKXbsaZ4EFl7B4bMtDv0iRipKoDQT2sNQI9b1utXFdYisi+wzZ/ri/1m7QfDgEuvgUUEIJPq3DhX/5DWNqIXDOweC2wvIR90Oq3lDpdMIgD2r0dXvGdsEW5H6x6HLRJYU7C69VefO1x8Gde1ZFSJLfWS1jbCnhtOPxmpfv2LXOA2Xk2tvnwKKPFuZ/oRmwBwqRQDcKNeVQkYcOjtWVBuM/JuYw5b6isojIkYxyYAFn5K7ZBF10fea52y8QltAg6jnMqNHFBmGkQ1j+U43HMi2xMar1Nv0zGsf1s8nUsmUtPOOrbFIR8bHFDMB5zL13Gmr/kGlCkUzedTzzmzsaJXhYawnA3UmARpiYj5ooJZiUoxFRtK3X6pgNPv+IZVPcnwbOl6f+aBaO1CNvPW9n9LmCp01nuSaTRF2YxHqZ8DYQT6WsXT+RD6eUztwYLZ8rM+rcPxamv1VQzFUkzFXvkiVrySGQgJNvXHJAxiU3/NwiC03rSf05VBaPtu/Z7/B8Yn/w7eguloAAAAAElFTkSuQmCC');
  }

  div.callout-note.callout-style-default .callout-title {
    background-color: #dae6fb
  }

  div.callout-important {
    border-left-color: #d9534f !important;
  }

  div.callout-important .callout-icon::before {
    background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAAgCAYAAABzenr0AAAAAXNSR0IArs4c6QAAAERlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAA6ABAAMAAAABAAEAAKACAAQAAAABAAAAIKADAAQAAAABAAAAIAAAAACshmLzAAAEKklEQVRYCcVXTWhcVRS+575MJym48A+hSRFr00ySRQhURRfd2HYjk2SSTokuBCkU2o0LoSKKraKIBTcuFCoidGFD08nkBzdREbpQ1EDNIv8qSGMFUboImMSZd4/f9zJv8ibJMC8xJQfO3HPPPef7zrvvvnvviIkpC9nsw0UttFunbUhpFzFtarSd6WJkStVMw5xyVqYTvkwfzuf/5FgtkVoB0729j1rjXwThS7Vio+Mo6DNnvLfahoZ+i/o32lULuJ3NNiz7q6+pyAUkJaFF6JwaM2lUJlV0MlnQn5aTRbEu0SEqHUa0A4AdiGuB1kFXRfVyg5d87+Dg4DL6m2TLAub60ilj7A1Ec4odSAc8X95sHh7+ZRPCFo6Fnp7HfU/fBng/hi10CjCnWnJjsxvDNxWw0NfV6Rv5GgP3I3jGWXumdTD/3cbEOP2ZbOZp69yniG3FQ9z1jD7bnBu9Fc2tKGC2q+uAJOQHBDRiZX1x36o7fWBs7J9ownbtO+n0/qWkvW7UPIfc37WgT6ZGR++EOJyeQDSb9UB+DZ1G6DdLDzyS+b/kBCYGsYgJbSQHuThGKRcw5xdeQf8YdNHsc6ePXrlSYMBuSIAFTGAtQo+VuALo4BX83N190NWZWbynBjhOHsmNfFWLeL6v+ynsA58zDvvAC8j5PkbOcXCMg2PZFk3q8MjI7WAG/Dp9AwP7jdGBOOQkAvlFUB+irtm16I1Zw9YBcpGTGXYmk3kQIC/Cds55l+iMI3jqhjAuaoe+am2Jw5GT3Nbz3CkE12NavmzN5+erJW7046n/CH1RO/RVa8lBLozXk9uqykkGAyRXLWlLv5jyp4RFsG5vGVzpDLnIjTWgnRy2Rr+tDKvRc7Y8AyZq10jj8DqXdnIRNtFZb+t/ZRtXcDiVnzpqx8mPcDWxgARUqx0W1QB9MeUZiNrV4qP+Ehc+BpNgATsTX8ozYKL2NtFYAHc84fG7ndxUPr+AR/iQSns7uSUufAymwDOb2+NjK27lEFocm/EE2WpyIy/Hi66MWuMKJn8RvxIcj87IM5Vh9663ziW36kR0HNenXuxmfaD8JC7tfKbrhFr7LiZCrMjrzTeGx+PmkosrkNzW94ObzwocJ7A1HokLolY+AvkTiD/q1H0cN48c5EL8Crkttsa/AXQVDmutfyku0E7jShx49XqV3MFK8IryDhYVbj7Sj2P2eBxwcXoe8T8idsKKPRcnZw1b+slFTubwUwhktrfnAt7J++jwQtLZcm3sr9LQrjRzz6cfMv9aLvgmnAGvpoaGLxM4mAEaLV7iAzQ3oU0IvD5x9ix3yF2RAAuYAOO2f7PEFWCXZ4C9Pb2UsgDeVnFSpbFK7/IWu7TPTvBqzbGdCHOJQSxiEjt6IyZmxQyEJHv6xyQsYk//moVFsN2zP6fRImjfq7/n/wFDguUQFNEwugAAAABJRU5ErkJggg==');
  }

  div.callout-important.callout-style-default .callout-title {
    background-color: #f7dddc
  }

  div.callout-warning {
    border-left-color: #f0ad4e !important;
  }

  div.callout-warning .callout-icon::before {
    background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAAgCAYAAABzenr0AAAAAXNSR0IArs4c6QAAAERlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAA6ABAAMAAAABAAEAAKACAAQAAAABAAAAIKADAAQAAAABAAAAIAAAAACshmLzAAAETklEQVRYCeVWW2gcVRg+58yaTUnizqbipZeX4uWhBEniBaoUX1Ioze52t7sRq6APio9V9MEaoWlVsFasRq0gltaAPuxms8lu0gcviE/FFOstVbSIxgcv6SU7EZqmdc7v9+9mJtNks51NTUH84ed889/PP+cmxP+d5FIbMJmNbpREu4WUkiTtCicKny0l1pIKmBzovF2S+hIJHX8iEu3hZJ5lNZGqyRrGSIQpq15AzF28jgpeY6yk6GVdrfFqdrD6Iw+QlB8g0YS2g7dyQmXM/IDhBhT0UCiRf59lfqmmDvzRt6kByV/m4JjtzuaujMUM2c5Z2d6JdKrRb3K2q6mA+oYVz8JnDdKPmmNthzkAk/lN63sYPgevrguc72aZX/L9C6x09GYyxBgCX4NlvyGUHOKELlm5rXeR1kchuChJt4SSwyddZRXgvwMGvYo4QSlk3/zkHD8UHxwVJA6zjZZqP8v8kK8OWLnIZtLyCAJagYC4rTGW/9Pqj92N/c+LUaAj27movwbi19tk/whRCIE7Q9vyI6yvRpftAKVTdUjOW40X3h5OXsKCdmFcx0xlLJoSuQngnrJe7Kcjm4OMq9FlC7CMmScQANuNvjfP3PjGXDBaUQmbp296S5L4DrpbrHN1T87ZVEZVCzg1FF0Ft+dKrlLukI+/c9ENo+TvlTDbYFvuKPtQ9+l052rXrgKoWkDAFnvh0wTOmYn8R5f4k/jN/fZiCM1tQx9jQQ4ANhqG4hiL0qIFTGViG9DKB7GYzgubnpofgYRwO+DFjh0Zin2m4b/97EDkXkc+f6xYAPX0KK2I/7fUQuwzuwo/L3AkcjugPNixC8cHf0FyPjWlItmLxWw4Ou9YsQCr5fijMGoD/zpdRy95HRysyXA74MWOnscpO4j2y3HAVisw85hX5+AFBRSHt4ShfLFkIMXTqyKFc46xdzQM6XbAi702a7sy04J0+feReMFKp5q9esYLCqAZYw/k14E/xcLLsFElaornTuJB0svMuJINy8xkIYuL+xPAlWRceH6+HX7THJ0djLUom46zREu7tTkxwmf/FdOZ/sh6Q8qvEAiHpm4PJ4a/doJe0gH1t+aHRgCzOvBvJedEK5OFE5jpm4AGP2a8Dxe3gGJ/pAutug9Gp6he92CsSsWBaEcxGx0FHytmIpuqGkOpldqNYQK8cSoXvd+xLxXADw0kf6UkJNFtdo5MOgaLjiQOQHcn+A6h5NuL2s0qsC2LOM75PcF3yr5STuBSAcGG+meA14K/CI21HcS4LBT6tv0QAh8Dr5l93AhZzG5ZJ4VxAqdZUEl9z7WJ4aN+svMvwHHL21UKTd1mqvChH7/Za5xzXBBKrUcB0TQ+Ulgkfbi/H/YT5EptrGzsEK7tR1B7ln9BBwckYfMiuSqklSznIuoIIOM42MQO+QnduCoFCI0bpkzjCjddHPN/F+2Yu+sd9bKNpVwHhbS3LluK/0zgfwD0xYI5dXuzlQAAAABJRU5ErkJggg==');
  }

  div.callout-warning.callout-style-default .callout-title {
    background-color: #fcefdc
  }

  div.callout-tip {
    border-left-color: #02b875 !important;
  }

  div.callout-tip .callout-icon::before {
    background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAAgCAYAAABzenr0AAAAAXNSR0IArs4c6QAAAERlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAA6ABAAMAAAABAAEAAKACAAQAAAABAAAAIKADAAQAAAABAAAAIAAAAACshmLzAAADr0lEQVRYCe1XTWgTQRj9ZjZV8a9SPIkKgj8I1bMHsUWrqYLVg4Ue6v9BwZOxSYsIerFao7UiUryIqJcqgtpimhbBXoSCVxUFe9CTiogUrUp2Pt+3aUI2u5vdNh4dmMzOzHvvezuz8xNFM0mjnbXaNu1MvFWRXkXEyE6aYOYJpdW4IXuA4r0fo8qqSMDBU0v1HJUgVieAXxzCsdE/YJTdFcVIZQNMyhruOMJKXYFoLfIfIvVIMWdsrd+Rpd86ZmyzzjJmLStqRn0v8lzkb4rVIXvnpScOJuAn2ACC65FkPzEdEy4TPWRLJ2h7z4cArXzzaOdKlbOvKKX25Wl00jSnrwVxAg3o4dRxhO13RBSdNvH0xSARv3adTXbBdTf64IWO2vH0LT+cv4GR1DJt+DUItaQogeBX/chhbTBxEiZ6gftlDNXTrvT7co4ub5A6gp9HIcHvzTa46OS5fBeP87Qm0fQkr4FsYgVQ7Qg+ZayaDg9jhg1GkWj8RG6lkeSacrrHgDaxdoBiZPg+NXV/KifMuB6//JmYH4CntVEHy/keA6x4h4CU5oFy8GzrBS18cLJMXcljAKB6INjWsRcuZBWVaS3GDrqB7rdapVIeA+isQ57Eev9eCqzqOa81CY05VLd6SamW2wA2H3SiTbnbSxmzfp7WtKZkqy4mdyAlGx7ennghYf8voqp9cLSgKdqNfa6RdRsAAkPwRuJZNbpByn+RrJi1RXTwdi8RQF6ymDwGMAtZ6TVE+4uoKh+MYkcLsT0Hk8eAienbiGdjJHZTpmNjlbFJNKDVAp2fJlYju6IreQxQ08UJDNYdoLSl6AadO+fFuCQqVMB1NJwPm69T04Wv5WhfcWyfXQB+wXRs1pt+nCknRa0LVzSA/2B+a9+zQJadb7IyyV24YAxKp2Jqs3emZTuNnKxsah+uabKbMk7CbTgJx/zIgQYErIeTKRQ9yD9wxVof5YolPHqaWo7TD6tJlh7jQnK5z2n3+fGdggIOx2kaa2YI9QWarc5Ce1ipNWMKeSG4DysFF52KBmTNMmn5HqCFkwy34rDg05gDwgH3bBi+sgFhN/e8QvRn8kbamCOhgrZ9GJhFDgfcMHzFb6BAtjKpFhzTjwv1KCVuxHvCbsSiEz4CANnj84cwHdFXAbAOJ4LTSAawGWFn5tDhLMYz6nWeU2wJfIhmIJBefcd/A5FWQWGgrWzyORZ3Q6HuV+Jf0Bj+BTX69fm1zWgK7By1YTXchFDORywnfQ7GpzOo6S+qECrsx2ifVQAAAABJRU5ErkJggg==');
  }

  div.callout-tip.callout-style-default .callout-title {
    background-color: #ccf1e3
  }

  div.callout-caution {
    border-left-color: #fd7e14 !important;
  }

  div.callout-caution .callout-icon::before {
    background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAAgCAYAAABzenr0AAAAAXNSR0IArs4c6QAAAERlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAA6ABAAMAAAABAAEAAKACAAQAAAABAAAAIKADAAQAAAABAAAAIAAAAACshmLzAAACV0lEQVRYCdVWzWoUQRCuqp2ICBLJXgITZL1EfQDBW/bkzUMUD7klD+ATSHBEfAIfQO+iXsWDxJsHL96EHAwhgzlkg8nBg25XWb0zIb0zs9muYYWkoKeru+vn664fBqElyZNuyh167NXJ8Ut8McjbmEraKHkd7uAnAFku+VWdb3reSmRV8PKSLfZ0Gjn3a6Xlcq9YGb6tADjn+lUfTXtVmaZ1KwBIvFI11rRXlWlatwIAAv2asaa9mlB9wwygiDX26qaw1yYPzFXg2N1GgG0FMF8Oj+VIx7E/03lHx8UhvYyNZLN7BwSPgekXXLribw7w5/c8EF+DBK5idvDVYtEEwMeYefjjLAdEyQ3M9nfOkgnPTEkYU+sxMq0BxNR6jExrAI31H1rzvLEfRIdgcv1XEdj6QTQAS2wtstEALLG1yEZ3QhH6oDX7ExBSFEkFINXH98NTrme5IOaaA7kIfiu2L8A3qhH9zRbukdCqdsA98TdElyeMe5BI8Rs2xHRIsoTSSVFfCFCWGPn9XHb4cdobRIWABNf0add9jakDjQJpJ1bTXOJXnnRXHRf+dNL1ZV1MBRCXhMbaHqGI1JkKIL7+i8uffuP6wVQAzO7+qVEbF6NbS0LJureYcWXUUhH66nLR5rYmva+2tjRFtojkM2aD76HEGAD3tPtKM309FJg5j/K682ywcWJ3PASCcycH/22u+Bh7Aa0ehM2Fu4z0SAE81HF9RkB21c5bEn4Dzw+/qNOyXr3DCTQDMBOdhi4nAgiFDGCinIa2owCEChUwD8qzd03PG+qdW/4fDzjUMcE1ZpIAAAAASUVORK5CYII=');
  }

  div.callout-caution.callout-style-default .callout-title {
    background-color: #ffe5d0
  }

  </style>
  <style type="text/css">
    .reveal div.sourceCode {
      margin: 0;
      overflow: auto;
    }
    .reveal div.hanging-indent {
      margin-left: 1em;
      text-indent: -1em;
    }
    .reveal .slide:not(.center) {
      height: 100%;
    }
    .reveal .slide.scrollable {
      overflow-y: auto;
    }
    .reveal .footnotes {
      height: 100%;
      overflow-y: auto;
    }
    .reveal .slide .absolute {
      position: absolute;
      display: block;
    }
    .reveal .footnotes ol {
      counter-reset: ol;
      list-style-type: none; 
      margin-left: 0;
    }
    .reveal .footnotes ol li:before {
      counter-increment: ol;
      content: counter(ol) ". "; 
    }
    .reveal .footnotes ol li > p:first-child {
      display: inline-block;
    }
    .reveal .slide ul,
    .reveal .slide ol {
      margin-bottom: 0.5em;
    }
    .reveal .slide ul li,
    .reveal .slide ol li {
      margin-top: 0.4em;
      margin-bottom: 0.2em;
    }
    .reveal .slide ul[role="tablist"] li {
      margin-bottom: 0;
    }
    .reveal .slide ul li > *:first-child,
    .reveal .slide ol li > *:first-child {
      margin-block-start: 0;
    }
    .reveal .slide ul li > *:last-child,
    .reveal .slide ol li > *:last-child {
      margin-block-end: 0;
    }
    .reveal .slide .columns:nth-child(3) {
      margin-block-start: 0.8em;
    }
    .reveal blockquote {
      box-shadow: none;
    }
    .reveal .tippy-content>* {
      margin-top: 0.2em;
      margin-bottom: 0.7em;
    }
    .reveal .tippy-content>*:last-child {
      margin-bottom: 0.2em;
    }
    .reveal .slide > img.stretch.quarto-figure-center,
    .reveal .slide > img.r-stretch.quarto-figure-center {
      display: block;
      margin-left: auto;
      margin-right: auto; 
    }
    .reveal .slide > img.stretch.quarto-figure-left,
    .reveal .slide > img.r-stretch.quarto-figure-left  {
      display: block;
      margin-left: 0;
      margin-right: auto; 
    }
    .reveal .slide > img.stretch.quarto-figure-right,
    .reveal .slide > img.r-stretch.quarto-figure-right  {
      display: block;
      margin-left: auto;
      margin-right: 0; 
    }
  </style>
  <script src="gaisho_2024_04_files/libs/kePrint-0.0.1/kePrint.js"></script>
  <link href="gaisho_2024_04_files/libs/lightable-0.0.1/lightable.css" rel="stylesheet">
  <style>
  .v-center-container {
    display: flex;
    justify-content: center;
    align-items: center;
  }
  </style>
</head>
<body class="quarto-light">
  <div class="reveal">
    <div class="slides">

<section id="title-slide" class="quarto-title-block center">
  <h1 class="title"><p><b>外国書購読 Day4</b> <br> <span style="color: #282A36; ">Risk Assessment and Planning</span></p></h1>

<div class="quarto-title-authors">
<div class="quarto-title-author">
<div class="quarto-title-author-name">
Soichi Matsuura 
</div>
</div>
</div>

  <p class="date">2024-10-23</p>
</section>
<section>
<section id="machine-learning-methods" class="title-slide slide level1 center">
<h1>Machine Learning Methods</h1>
<!-- ## 機械学習 -->
<ul>
<li>Over the past decade, very useful extensions to twentieth century statistical models have been provided by advances in machine learning, and in particular deep-learning. <!-- この10年間で、20世紀の統計モデルに非常に有用な拡張機能が機械学習の進歩、とりわけ深層学習によって提供されている。 --> <!-- - Deep learning is a branch of artificial intelligence that is computationally intensive, but highly flexible for inference from data. --> <!-- 深層学習は、計算量が多いが、データからの推論に非常に柔軟な人工知能の分野です。 --></li>
<li>Inference is a decision <span class="math inline">\delta</span> (estimation, prediction) based on data <span class="math inline">x \in X</span> that hopefully contains information about a particular set of constructs. <!-- 推論は、データ$x \in X$に基づいて、特定の構造に関する情報を含んでいることを期待して、決定$\delta$（推定、予測）を行う。 --></li>
<li>Inference may be about: <!-- 推論は以下のようなものについて行われる。 -->
<ol type="1">
<li>Classification — e.g., identifying faces, threats. <!-- 1. 分類 : たとえば、顔、脅威の識別 --></li>
<li>Estimation — e.g., a vector <span class="math inline">\theta = \{\theta_1, \dots , \theta_n\}</span>. <!-- 2. 推定 : たとえば、ベクトル$\theta = \{\theta_1, \dots , \theta_n\}$。 --></li>
<li>Other decisions that may or may not be carried out in real time; e.g., driving a car. <!-- 3. リアルタイムで行われるかどうかはわからないその他の決定: たとえば、車の運転。 --></li>
</ol></li>
</ul>
</section>
<section id="goals-of-machine-learning" class="slide level2">
<h2>Goals of Machine Learning</h2>
<ul>
<li>The implicit goal of machine learning is <strong>construction of decision strategies that minimize risk</strong>. <!-- 機械学習の暗黙の目標は、リスクを最小化する決定戦略の構築である。 --></li>
<li>Risk is an informal concept inherited from gambling, and roughly implies <em>the expected loss from using a given decision strategy <span class="math inline">\delta</span></em>. <!-- リスクは、ギャンブルから受け継がれたインフォーマルな概念であり、おおよそ与えられた決定戦略$\delta$を使用した場合の期待損失を意味する。 --></li>
<li>Frequentist and Bayesian statisticians both base their decision strategies on real-world data, but sharply divided on the actual implementation and interpretation of decision risk. <!-- 頻度論的統計学者とベイズ統計学者は、ともに現実世界のデータに基づいて決定戦略を立てるが、決定リスクの実際の実装と解釈については、はっきりと分かれている。 --></li>
</ul>
</section>
<section id="risk-and-ai" class="slide level2">
<h2>Risk and AI</h2>
<ul>
<li>In practice, risk presents <strong>deep learning</strong> (and AI in general) with its greatest challenges. <!-- 実際、リスクは深層学習（およびAI全般）にとって最大の課題である。 --></li>
<li>For example, self-driving cars are trained on massive datasets extracted from many other cars; that knowledge of how to drive is encapsulated in weights in a network model that is firm-wired into a computer unit in a car. <!-- たとえば、自動運転車は、多くの他の車から抽出された大規模なデータセットで訓練される。 --> <!-- その運転方法の知識は、車のコンピュータユニットに固定されたネットワークモデルの重みにカプセル化されている。 --></li>
<li>It matters whether that unit was trained to save pedestrians, or to save property, or to save the driver - each implies a different decision risk. <!-- そのユニットが歩行者を救うために訓練されたか、財産を救うために訓練されたか、運転手を救うために訓練されたかは重要な問題である。 --></li>
</ul>
</section>
<section class="slide level2">

<ul>
<li>Traditionally, statistics have used a <strong>squared-error loss function</strong> <span class="math inline">l(\theta, \delta (X)) = \mathrm{E}_{\delta} [\delta (X) - \theta )^2]</span> where <span class="math inline">\delta(X) = \hat{\theta}</span> in the case of estimation. <!-- 従来、統計学では、推定の場合は$\delta(X) = \hat{\theta}$となる損失関数$l(\theta, \delta (X)) = \mathrm{E}_{\del/ta} [\delta (X) - \theta )^2]$を使用してきた。 --> <!-- - This is easy to compute using pencil and paper, particularly when optimization relied on *first-order conditions* from calculus. --> <!-- これは、最適化が微積分の一次条件に依存していたときに、鉛筆と紙を使って簡単に計算することができた。 --></li>
<li>But most real-world decisions are not optimally made with squared-error loss functions. <!-- しかし、ほとんどの現実世界の決定は、二乗誤差損失関数を用いて最適に行われるものではない。 --></li>
<li>Although squared-error loss is still widely used, machine learning practitioners will also use more complex, sometimes asymmetric loss functions that more closely fit the real-world problems. <!-- 二乗誤差損失は今でも広く使われているが、機械学習を用いる実務家は、より複雑で、時には非対称な損失関数を使うこともある。 --> <!-- In particular for classification problems such as image recognition, squared-error loss makes little sense, and practitioners will tend to use cross-entropy, drawn from information theory, where the Kraft–McMillan theorem establishes the rationale for its application.  --> <!-- 特に画像認識などの分類問題では、二乗誤差損失はあまり意味がなく、実務家は情報理論から引き出された交差エントロピーを使う傾向がある。クラフト・マクミランの定理は、その適用根拠を確立している。 --></li>
<li>Business situations prefer asymmetric loss that penalizes costs and rewards revenues. <!-- ビジネスの現場では、コストをペナルティ、収益を報酬とする非対称損失が好まれている。 --></li>
</ul>
</section>
<section id="search-algorithms" class="slide level2">
<h2>Search Algorithms</h2>
<ul>
<li>Whereas traditional statistics relies heavily on first-order conditions from calculus, <em>deep learning uses compute-intensive search algorithms</em> that explore the response surface of the risk function. <!-- 従来の統計学は、微積分の一階条件に大きく依存していたのに対し、深層学習は、リスク関数の応答曲面を探索する計算量の多い探索アルゴリズムを用いている。 --></li>
<li>The following example presents the “Hello World” of machine learning: recognizing handwritten numbers on the National Institute of Standards dataset. <!-- 以下の例は、機械学習の「Hello World」を示している: 国立標準技術研究所(National Institute of Standards)のデータセットに書かれた数値を認識する。 --></li>
</ul>
</section>
<section id="keras" class="slide level2">
<h2><code>keras</code></h2>
<p>Examples below assume that Tensorflow is installed. See <a href="https://www.tensorflow.org/install/">https://www.tensorflow.org/install/</a>。 <!-- 以下の例は、Tensorflowがインストールされていることを前提としている --></p>
<div class="cell">
<div class="sourceCode cell-code" id="cb1"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb1-1"><a href="" aria-hidden="true" tabindex="-1"></a><span class="co"># install.packages("keras") # install keras packages</span></span>
<span id="cb1-2"><a href="" aria-hidden="true" tabindex="-1"></a>pacman<span class="sc">::</span><span class="fu">p_load</span>(keras, tidyverse, knitr, kableExtra)</span>
<span id="cb1-3"><a href="" aria-hidden="true" tabindex="-1"></a><span class="co"># install_keras() # Run this only once. Installation takes time.</span></span></code><button title="コピー" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<!-- これで準備が整った。 -->
</section>
<section class="slide level2">

<div class="cell">
<div class="sourceCode cell-code" id="cb2"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb2-1"><a href="" aria-hidden="true" tabindex="-1"></a>mnist <span class="ot">&lt;-</span> <span class="fu">dataset_mnist</span>() <span class="co"># MNISTデータを読み込む</span></span>
<span id="cb2-2"><a href="" aria-hidden="true" tabindex="-1"></a><span class="fu">class</span>(mnist)   <span class="co"># List class</span></span></code><button title="コピー" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] "list"</code></pre>
</div>
<div class="sourceCode cell-code" id="cb4"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb4-1"><a href="" aria-hidden="true" tabindex="-1"></a><span class="fu">glimpse</span>(mnist) <span class="co"># See the structure of the data</span></span></code><button title="コピー" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>List of 2
 $ train:List of 2
  ..$ x: int [1:60000, 1:28, 1:28] 0 0 0 0 0 0 0 0 0 0 ...
  ..$ y: int [1:60000(1d)] 5 0 4 1 9 2 1 3 1 4 ...
 $ test :List of 2
  ..$ x: int [1:10000, 1:28, 1:28] 0 0 0 0 0 0 0 0 0 0 ...
  ..$ y: int [1:10000(1d)] 7 2 1 0 4 1 4 9 5 9 ...</code></pre>
</div>
</div>
<p>The MNIST database was constructed from NIST’s Special Database 3 and Special Database 1 which contain <em>binary images of handwritten digits</em>.</p>
</section>
<section class="slide level2">

<div class="cell">
<div class="sourceCode cell-code" id="cb6"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb6-1"><a href="" aria-hidden="true" tabindex="-1"></a>train_images <span class="ot">&lt;-</span> mnist<span class="sc">$</span>train<span class="sc">$</span>x <span class="co"># image data for training</span></span>
<span id="cb6-2"><a href="" aria-hidden="true" tabindex="-1"></a>train_labels <span class="ot">&lt;-</span> mnist<span class="sc">$</span>train<span class="sc">$</span>y <span class="co"># label data for training</span></span>
<span id="cb6-3"><a href="" aria-hidden="true" tabindex="-1"></a>test_images <span class="ot">&lt;-</span> mnist<span class="sc">$</span>test<span class="sc">$</span>x   <span class="co"># test image data</span></span>
<span id="cb6-4"><a href="" aria-hidden="true" tabindex="-1"></a>test_labels <span class="ot">&lt;-</span> mnist<span class="sc">$</span>test<span class="sc">$</span>y   <span class="co"># test label data</span></span></code><button title="コピー" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</section>
<section class="slide level2">

<p>Construct a neural network model. Keras Model composed of a linear stack of layers.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb7"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb7-1"><a href="" aria-hidden="true" tabindex="-1"></a>network <span class="ot">&lt;-</span> <span class="fu">keras_model_sequential</span>() <span class="co"># null model</span></span>
<span id="cb7-2"><a href="" aria-hidden="true" tabindex="-1"></a>network <span class="sc">|&gt;</span></span>
<span id="cb7-3"><a href="" aria-hidden="true" tabindex="-1"></a>    <span class="co"># 28*28 pixel images are flattened into 784 pixel vectors</span></span>
<span id="cb7-4"><a href="" aria-hidden="true" tabindex="-1"></a>    <span class="fu">layer_dense</span>(<span class="at">units =</span> <span class="dv">512</span>, <span class="at">input_shape =</span> <span class="fu">c</span>(<span class="dv">28</span> <span class="sc">*</span> <span class="dv">28</span>)) <span class="sc">|&gt;</span></span>
<span id="cb7-5"><a href="" aria-hidden="true" tabindex="-1"></a>    <span class="co"># ReLU activation function converts negative values to zero</span></span>
<span id="cb7-6"><a href="" aria-hidden="true" tabindex="-1"></a>    <span class="fu">layer_activation</span>(<span class="st">'relu'</span>) <span class="sc">|&gt;</span> <span class="co"># ReLU activation function</span></span>
<span id="cb7-7"><a href="" aria-hidden="true" tabindex="-1"></a>    <span class="fu">layer_dense</span>(<span class="at">units =</span> <span class="dv">10</span>) <span class="sc">|&gt;</span>  <span class="co"># 10 output layers 1:10</span></span>
<span id="cb7-8"><a href="" aria-hidden="true" tabindex="-1"></a>    <span class="co"># softmax activation function convert the output to a probability distribution</span></span>
<span id="cb7-9"><a href="" aria-hidden="true" tabindex="-1"></a>    <span class="fu">layer_activation</span>(<span class="st">"softmax"</span>) <span class="co"># softmax activation function</span></span></code><button title="コピー" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</section>
<section class="slide level2">

<p>Specify the algorithm and function series.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb8"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb8-1"><a href="" aria-hidden="true" tabindex="-1"></a>network <span class="sc">|&gt;</span> <span class="fu">compile</span>(       <span class="co"># モデルをコンパイル</span></span>
<span id="cb8-2"><a href="" aria-hidden="true" tabindex="-1"></a>  <span class="at">optimizer =</span> <span class="st">"rmsprop"</span>,  <span class="co"># 最適化アルゴリズム</span></span>
<span id="cb8-3"><a href="" aria-hidden="true" tabindex="-1"></a>  <span class="at">loss =</span> <span class="st">"categorical_crossentropy"</span>, <span class="co"># 損失関数</span></span>
<span id="cb8-4"><a href="" aria-hidden="true" tabindex="-1"></a>  <span class="at">metrics =</span> <span class="fu">c</span>(<span class="st">"accuracy"</span>) <span class="co"># 評価関数</span></span>
<span id="cb8-5"><a href="" aria-hidden="true" tabindex="-1"></a>)</span></code><button title="コピー" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</section>
<section class="slide level2">

<h3 id="training-and-test-data">Training and Test Data</h3>
<div class="cell">
<div class="sourceCode cell-code" id="cb9"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb9-1"><a href="" aria-hidden="true" tabindex="-1"></a><span class="co"># Training data</span></span>
<span id="cb9-2"><a href="" aria-hidden="true" tabindex="-1"></a>train_images <span class="ot">&lt;-</span> <span class="fu">array_reshape</span>( <span class="co"># 行列に変換</span></span>
<span id="cb9-3"><a href="" aria-hidden="true" tabindex="-1"></a>    train_images,              <span class="co"># 訓練用画像データ</span></span>
<span id="cb9-4"><a href="" aria-hidden="true" tabindex="-1"></a>    <span class="fu">c</span>(<span class="dv">60000</span>, <span class="dv">28</span> <span class="sc">*</span> <span class="dv">28</span>)          <span class="co"># 画像の形状</span></span>
<span id="cb9-5"><a href="" aria-hidden="true" tabindex="-1"></a>    )</span>
<span id="cb9-6"><a href="" aria-hidden="true" tabindex="-1"></a><span class="co"># Test data</span></span>
<span id="cb9-7"><a href="" aria-hidden="true" tabindex="-1"></a>test_images <span class="ot">&lt;-</span> <span class="fu">array_reshape</span>( <span class="co"># 行列に変換</span></span>
<span id="cb9-8"><a href="" aria-hidden="true" tabindex="-1"></a>    test_images,              <span class="co"># テスト用画像データ</span></span>
<span id="cb9-9"><a href="" aria-hidden="true" tabindex="-1"></a>    <span class="fu">c</span>(<span class="dv">10000</span>, <span class="dv">28</span> <span class="sc">*</span> <span class="dv">28</span>)         <span class="co"># 画像の形状</span></span>
<span id="cb9-10"><a href="" aria-hidden="true" tabindex="-1"></a>    )</span>
<span id="cb9-11"><a href="" aria-hidden="true" tabindex="-1"></a><span class="co"># 0が黒，255が白のデータを0-1の範囲に正規化</span></span>
<span id="cb9-12"><a href="" aria-hidden="true" tabindex="-1"></a>train_images <span class="ot">&lt;-</span> train_images <span class="sc">/</span> <span class="dv">255</span></span>
<span id="cb9-13"><a href="" aria-hidden="true" tabindex="-1"></a>test_images  <span class="ot">&lt;-</span> test_images  <span class="sc">/</span> <span class="dv">255</span></span></code><button title="コピー" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</section>
<section class="slide level2">

<div class="cell">
<div class="sourceCode cell-code" id="cb10"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb10-1"><a href="" aria-hidden="true" tabindex="-1"></a>train_labels <span class="ot">&lt;-</span> <span class="fu">to_categorical</span>(train_labels) <span class="co">#</span></span>
<span id="cb10-2"><a href="" aria-hidden="true" tabindex="-1"></a>test_labels <span class="ot">&lt;-</span> <span class="fu">to_categorical</span>(test_labels)   <span class="co">#</span></span></code><button title="コピー" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<ul>
<li><p>Label data is one hot encoded. <!-- ラベルデータをone-hotエンコーディング --></p></li>
<li><p><code>to_categolical()</code> takes a vector or 1 column matrix of class labels and converts it into a matrix with <span class="math inline">p</span> columns, one for each category.</p></li>
<li><p>(補足) 0〜9の手書き文字の大小関係は今回関係ないため，10個のカテゴリーを意味する10列の行列に変換してます。</p></li>
</ul>
</section>
<section class="slide level2">

<h3 id="training-the-model">Training the Model</h3>
<div class="cell">
<div class="sourceCode cell-code" id="cb11"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb11-1"><a href="" aria-hidden="true" tabindex="-1"></a>history <span class="ot">&lt;-</span> network <span class="sc">|&gt;</span></span>
<span id="cb11-2"><a href="" aria-hidden="true" tabindex="-1"></a>    <span class="fu">fit</span>( <span class="co"># training the model</span></span>
<span id="cb11-3"><a href="" aria-hidden="true" tabindex="-1"></a>        train_images, <span class="co"># training image data</span></span>
<span id="cb11-4"><a href="" aria-hidden="true" tabindex="-1"></a>        train_labels, <span class="co"># training label data</span></span>
<span id="cb11-5"><a href="" aria-hidden="true" tabindex="-1"></a>        <span class="at">epochs =</span> <span class="dv">10</span>,  <span class="co"># the number of times the model will be trained</span></span>
<span id="cb11-6"><a href="" aria-hidden="true" tabindex="-1"></a>        <span class="at">batch_size =</span> <span class="dv">128</span>) <span class="co"># the number of samples per gradient update</span></span></code><button title="コピー" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>Epoch 1/10
469/469 - 1s - loss: 0.2615 - accuracy: 0.9249 - 946ms/epoch - 2ms/step
Epoch 2/10
469/469 - 1s - loss: 0.1031 - accuracy: 0.9692 - 879ms/epoch - 2ms/step
Epoch 3/10
469/469 - 1s - loss: 0.0687 - accuracy: 0.9793 - 797ms/epoch - 2ms/step
Epoch 4/10
469/469 - 1s - loss: 0.0498 - accuracy: 0.9855 - 797ms/epoch - 2ms/step
Epoch 5/10
469/469 - 1s - loss: 0.0377 - accuracy: 0.9890 - 800ms/epoch - 2ms/step
Epoch 6/10
469/469 - 1s - loss: 0.0287 - accuracy: 0.9915 - 809ms/epoch - 2ms/step
Epoch 7/10
469/469 - 1s - loss: 0.0220 - accuracy: 0.9933 - 810ms/epoch - 2ms/step
Epoch 8/10
469/469 - 1s - loss: 0.0175 - accuracy: 0.9947 - 829ms/epoch - 2ms/step
Epoch 9/10
469/469 - 1s - loss: 0.0130 - accuracy: 0.9964 - 940ms/epoch - 2ms/step
Epoch 10/10
469/469 - 1s - loss: 0.0105 - accuracy: 0.9972 - 1s/epoch - 2ms/step</code></pre>
</div>
</div>
</section>
<section class="slide level2">

<h3 id="plot">Plot</h3>
<div class="cell">
<div class="sourceCode cell-code" id="cb13"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb13-1"><a href="" aria-hidden="true" tabindex="-1"></a><span class="fu">plot</span>(history) <span class="co"># 訓練の履歴をプロット</span></span></code><button title="コピー" class="code-copy-button"><i class="bi"></i></button></pre></div>

</div>
<img data-src="gaisho_2024_04_files/figure-revealjs/plot_keras-1.png" width="960" class="r-stretch"></section>
<section class="slide level2">

<p>model evaluation <!-- # モデルを評価 --></p>
<div class="cell">
<div class="sourceCode cell-code" id="cb14"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb14-1"><a href="" aria-hidden="true" tabindex="-1"></a>metrics <span class="ot">&lt;-</span> network <span class="sc">|&gt;</span></span>
<span id="cb14-2"><a href="" aria-hidden="true" tabindex="-1"></a>    <span class="fu">evaluate</span>(test_images, test_labels, <span class="at">verbose =</span> <span class="dv">0</span>)</span>
<span id="cb14-3"><a href="" aria-hidden="true" tabindex="-1"></a>metrics <span class="sc">|&gt;</span> <span class="fu">kable</span>()</span></code><button title="コピー" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<table class="caption-top">
<thead>
<tr class="header">
<th style="text-align: left;"></th>
<th style="text-align: right;">x</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td style="text-align: left;">loss</td>
<td style="text-align: right;">0.0667089</td>
</tr>
<tr class="even">
<td style="text-align: left;">accuracy</td>
<td style="text-align: right;">0.9815000</td>
</tr>
</tbody>
</table>
</div>
</div>
</section>
<section id="keras-model" class="slide level2">
<h2><code>keras</code> model</h2>
<ul>
<li><p>This particular Keras model overfits the MNIST data, with a final accuracy of 98% and loss of 7%. <!-- この特定のKerasモデルは、MNISTデータに過学習しており、最終的な精度は98%、損失は7%である。 --></p></li>
<li><p>Machine learning is a vast and rapidly evolving field. <!-- 機械学習は広大で急速に進化している分野である。 --></p></li>
<li><p>It is increasingly for the analysis of social network and other text based intelligence required for the analytical review portion (and other parts) of the audit. <!-- 監査の分析的レビュー部分（およびその他の部分）に必要なソーシャルネットワークやその他のテキストベースの知能の分析にますます必要とされている。 --></p></li>
<li><p>In the future, expect its role in auditing to expand, as suitable models are developed in the field. <!-- 将来的には、適切なモデルが開発されるにつれて、監査における役割が拡大することが予想される。 --></p></li>
</ul>
<!-- ##
Statistical Perspectives on Audit Evidence and its Information Content
-->
<!-- ## 監査証拠の統計的側面と情報内容 -->
</section></section>
<section>
<section id="statistical-perspectives-on-audit-evidence-and-its-information-content" class="title-slide slide level1 center">
<h1>Statistical Perspectives on Audit Evidence and its Information Content</h1>

</section>
<section id="補足" class="slide level2">
<h2>補足</h2>
<p>パラメータが<span class="math inline">\theta</span>である母集団の従う分布の確率密度関数を<span class="math inline">f(x \mid \theta)</span>とする。 そのとき，尤度関数と対数尤度関数は、</p>
<p><span class="math display">
L (\theta) = f(x \mid \theta), \quad l (\theta) = \log L(\theta)
</span></p>
<p>となり，スコア関数は次式で定義される。</p>
<p><span class="math display">
\frac{\partial}{\partial \theta} \log l (\theta)
</span></p>
</section>
<section id="support-and-the-additivity-of-evidence-the-log-likelihood" class="slide level2">
<h2>Support and the Additivity of Evidence: The Log-Likelihood</h2>
<!-- ### 監査証拠のサポートと追加可能性：対数尤度 -->
<ul>
<li>The log-likelihood has an intuitive interpretation, as suggested by the term <strong>“support</strong>.” <!-- wikiからのコピペ --> <!-- 対数尤度には、「サポート」という用語が示すように、直感的な解釈がある。 --></li>
<li>Given independent events, the overall log-likelihood is the sum of the log-likelihoods of the individual events, just as the overall log-probability is the sum of the log-probability of the individual events. <!-- wiki likelihood functionから コピペ --> <!-- 独立した事象が与えられたとき、全体の対数尤度は個々の事象の対数尤度の和であり、全体の対数確率は個々の事象の対数確率の和である。 --></li>
<li>Viewing data as evidence, this is interpreted as “support from independent evidence adds,” and the log-likelihood is the “<em>weight of evidence</em>.” <!-- wiki likelihood functionから コピペ --> <!-- データを証拠として見ると、これは「独立した証拠からのサポートが加わる」と解釈され、対数尤度は「証拠の重み」となる。 --> <!-- - Interpreting *negative log-probability* as *information content*, log-likelihood of a model, given an event, is the negative of the surprisal of the event, given the model --> <!-- a model is supported by an event to the extent that the event is unsurprising, given the model. --> <!-- - wikiから完コピ --> <!-- 負の対数確率を情報量や驚きとして解釈すると、ある事象が与えられたときのモデルのサポート（対数尤度）は、そのモデル所与としたときの，当該事象の意外性（負の対数確率）の負の値となる。 --> <!-- つまり，そのモデルを所与として，当該事象が驚くべきものではない範囲で，モデルは事象によってサポートされる。 --> <!-- Just as the likelihood, given no event, being 1, the log-likelihood, given no event, is 0, which corresponds to the value of the empty sum: without any data, there is no support for any models. wikiから完コピ --> <!-- 事象がない場合の尤度が1であるように、事象がない場合の対数尤度は0であり、これは空の和の値に対応する: データがない場合、どのモデルにもサポートはない。 --> <!-- The log-likelihood is particularly convenient for maximum likelihood estimation. --> <!-- 対数尤度は、最尤推定に特に便利である。 --> <!-- Because logarithms are strictly increasing functions, maximizing the likelihood is equivalent to maximizing the log-likelihood. --> <!-- 対数は単調増加関数であるため、尤度を最大化することは対数尤度を最大化することと同じである。 --> <!-- Since concavity plays a key role in the maximization, and since most common probability distributions—in particular the exponential family—are only logarithmically concave, it is usually more convenient to work with a logarithmic transformation of the likelihood function, known as the log-likelihood function. --> <!-- 凹性は最大化において重要な役割を果たすが、一般的な確率分布、特に指数族は対数的に凹であるため、対数尤度関数として知られる尤度関数の対数変換で作業する方が便利である。 --></li>
</ul>
</section>
<section id="the-score" class="slide level2">
<h2>The “Score”　</h2>
<!-- #### ここ完全に英語版wikipediaの文章のコピペ (あとで消す) -->
<ul>
<li>In statistics, the <strong>score</strong> (or informant) is the gradient of the <em>log-likelihood function</em> with respect to the parameter vector. <!-- 統計学において、スコア（またはインフォーマント）は、パラメータベクトルに関する対数尤度関数の勾配である。 --></li>
<li>Evaluated at a particular point, the score indicates the steepness of the log-likelihood function and thereby the sensitivity to infinitesimal changes to the parameter values. <!-- パラメータベクトルの特定の点で評価されるスコアは、対数尤度関数の急勾配を示し、それによってパラメータ値の微小な変化に対する感度を示す。 --> <!-- - If the log-likelihood function is continuous over the parameter space, the score will vanish at a local maximum or minimum; this fact is used in maximum likelihood estimation to find the parameter values that maximize the likelihood function. --> <!-- 対数尤度関数がパラメータ空間上で連続である場合、スコアは局所的な最大値または最小値で消滅する。 --> <!-- この事実は、最尤推定において尤度関数を最大化するパラメータ値を見つけるために用いられている。 --></li>
<li>Since the score is a function of the observations that are subject to sampling error, it lends itself to a test statistic known as score test in which the parameter is held at a particular value. <!-- スコアは、サンプリング誤差の影響を受ける観測値の関数であるため、パラメータを特定の値に保持するスコア検定として知られる検定統計量に適している。 --> <!-- Further, the ratio of two likelihood functions evaluated at two distinct parameter values can be understood as a definite integral of the score function. --> <!-- さらに、2つの異なるパラメータ値で評価された2つの尤度関数の比は、スコア関数の定積分として理解することができる。 --></li>
</ul>
<!-- ### フィッシャー情報量 -->
</section>
<section id="fisher-information" class="slide level2">
<h2>Fisher Information</h2>
<ul>
<li>In mathematical statistics, <strong>the Fisher information</strong> is a way of <em>measuring the amount of information</em> that an observable random variable <span class="math inline">X</span> carries about an unknown parameter <span class="math inline">\theta</span> of a distribution that models <span class="math inline">X</span>.</li>
<li>Formally, it is the variance of the score, or the expected value of the observed information.</li>
<li>The Fisher information is a way of <em>measuring the amount of information</em> that an observable random variable <span class="math inline">X</span> carries about an unknown parameter <span class="math inline">\theta</span> upon which the probability of <span class="math inline">X</span> depends.</li>
</ul>
</section></section>
<section id="risk-assessment-and-audit-planning" class="title-slide slide level1 center">
<h1>Risk Assessment and Audit Planning</h1>
<!-- # 第4章：リスク評価と監査計画 -->
</section>

<section>
<section id="auditing" class="title-slide slide level1 center">
<h1>Auditing</h1>

</section>
<section id="auditing-1" class="slide level2">
<h2>Auditing</h2>
<!-- ## 第1節 監査 -->
<ul>
<li>Auditing of financial accounts is the process of verifying that economic events in the real world are accurately summarized in the financial statements of a legal entity.</li>
<li>An audit opinion, the product of such auditing provides:
<ol type="1">
<li>Reasonable assurance.</li>
<li>By an independent third party.</li>
<li>Financial statements are presented fairly in all material respects.</li>
<li>In accordance to some financial reporting framework, e.g., GAAP.</li>
<li>Applied consistently so that year-to-year trends and comparisons are possible.</li>
</ol></li>
</ul>
<aside class="notes">
<p>財務諸表監査は、現実世界における経済事象が事業体の財務諸表に正確に記載されているかどうかを検証するプロセスである。 このような監査の成果である監査意見は、下記の点について独立した第三者による合理的保証を提供するものである。 1. 合理的保証。 2. 独立した第三者による。 3. 財務諸表がすべての重要な点において適正に表示されていること。 4. ある財務報告の枠組み（たとえばGAAP）に準拠していること。 5. 継続性をもって適用されているため、年度間の傾向と比較が可能であること。</p>
<style type="text/css">
        span.MJX_Assistive_MathML {
          position:absolute!important;
          clip: rect(1px, 1px, 1px, 1px);
          padding: 1px 0 0 0!important;
          border: 0!important;
          height: 1px!important;
          width: 1px!important;
          overflow: hidden!important;
          display:block!important;
      }</style></aside>
</section>
<section class="slide level2">

<ul>
<li>In the USA, the auditing framework is dictated by generally accepted <em>accounting</em> principles (GAAP) and generally accepted <em>auditing</em> standards (GAAS). <!-- 米国では、監査の枠組みは（判断規範たる）一般的に認められた会計原則（Generally Accepted Accounting Principles：以下GAAP）と（行為規範たる）一般に認められた監査基準（Generally Accepted Accounting Standards：以下、GAAS）によって規律されている。 --></li>
<li>Internationally the <strong>International Standards on Auditing</strong> (ISA) issued by the <em>International Auditing and Assurance Standards Board</em> (IAASB) is considered as the benchmark for audit process. <!-- 国際的には、国際監査・保証基準審議会（International Auditing and Assurance Standards Board：以下、IAASB）が発行する国際監査基準（International Standards on Auditing：以下、ISA）が監査の行為規範とされている。 --></li>
<li>Under US generally accepted accounting principles (GAAP) auditors must release one of three types of opinions of the overall financial statements: <!-- 米国のGAASの下では、監査人は財務諸表全体について3種類の意見のいずれかを公表しなければならない。 --></li>
</ul>
</section>
<section class="slide level2">

<ol type="1">
<li>An <strong>unqualified</strong> auditor’s opinion is the opinion that the financial statements are presented fairly.</li>
<li>A <strong>qualified opinion</strong> is that the financial statements are presented fairly in all material respects in accordance with GAAP:
<ol type="1">
<li>Except for a material misstatement that does not pervasively affect the users ability to rely on the financial statements.</li>
<li>Or with a scope limitation that is of limited significance.</li>
</ol></li>
<li>An <strong>adverse audit opinion</strong> is issued when the financial statements do not present fairly due to departure from US GAAP with an explanation of the nature and size of the misstatement.</li>
</ol>
<aside class="notes">
<ol type="1">
<li>無限定適正意見（unqualified opinion）は、財務諸表が適正に表示されているという意見である。</li>
<li>限定付適正意見（qualified opinion）は、財務諸表がすべての重要な点においてGAAPに準拠して適正に表示されていると認められるものの、下記のような意見の限定と範囲の限定がある。
<ol type="1">
<li>財務諸表を信頼する利用者の判断に広範な影響を与えない重要な虚偽表示が存在する。</li>
<li>重要であるが広範ではない監査範囲の限定が存在する。</li>
</ol></li>
<li>GAAPに準拠しないことにより財務諸表が適正に表示されていない場合には、監査意見として不適正意見（adverse opinion）が表明される。不適正意見には、虚偽表示の種類と影響についての説明が記載される。</li>
</ol>
<style type="text/css">
        span.MJX_Assistive_MathML {
          position:absolute!important;
          clip: rect(1px, 1px, 1px, 1px);
          padding: 1px 0 0 0!important;
          border: 0!important;
          height: 1px!important;
          width: 1px!important;
          overflow: hidden!important;
          display:block!important;
      }</style></aside>
</section>
<section class="slide level2">

<ul>
<li>Additionally an auditor can issue a <strong>disclaimer</strong> which is considered <em>a type of qualified opinion</em> because there is insufficient and appropriate evidence to form an opinion or because of lack of independence. <!-- さらに監査人は、監査意見を形成するのに十分かつ適切な証拠がない、あるいは独立性を欠いているという理由で、（限定意見の一種とみなされる）意見不表明を示すことができる。 --> <!-- - In a disclaimer the auditor explains the reasons for withholding an opinion and explicitly indicates that no opinion is expressed. --> <!-- 意見不表明では、監査人は意見の表明を差し控える理由を説明し、意見を表明しないことを示す。 --> <!-- - The wording of these reports typically appears as follows: --> <!-- これらの監査報告書の文言は、一般的に以下のようになる。 --></li>
</ul>
<ol type="1">
<li><strong>Unqualified</strong> (<em>Clean</em>) Opinion : We believe these financial statements are (1) fairly presented in (2) accordance with GAAP (3) consistently applied.</li>
<li><strong>Qualified Opinion</strong> : We believe these financial statements are (1) fairly presented in (2) accordance with GAAP (3) consistently applied; except for (4) A List of Exceptions.</li>
<li><strong>Adverse Opinion</strong>: We DO NOT believe these financial statements are (1) fairly presented in (2) accordance with GAAP (3) consistently applied; THE AUDITORS DISAGREE WITH A List of Exceptions.</li>
</ol>
<aside class="notes">
<ol type="1">
<li>無限定適正意見： 監査人は、これらの財務諸表が（1）継続的に適用された（2）GAAPに準拠して（2）適正に表示されていると判断している。</li>
<li>条件付適正意見：監査人は、これらの財務諸表が（1）除外事項を除いて、（2）継続的に適用された（3）GAAPに準拠して（4）適正に表示されていると判断している。</li>
<li>反対意見：監査人は、これらの財務諸表が（1）継続的に適用された（2）GAAPに準拠して（2）適正に表示されていると判断していない。</li>
</ol>
<style type="text/css">
        span.MJX_Assistive_MathML {
          position:absolute!important;
          clip: rect(1px, 1px, 1px, 1px);
          padding: 1px 0 0 0!important;
          border: 0!important;
          height: 1px!important;
          width: 1px!important;
          overflow: hidden!important;
          display:block!important;
      }</style></aside>
</section></section>
<section>
<section id="risk-assessment-in-audit-planning" class="title-slide slide level1 center">
<h1>Risk Assessment in Audit Planning</h1>
<!-- ## 第2節 監査計画におけるリスク評価 -->
</section>
<section id="risk-assessment" class="slide level2">
<h2>Risk Assessment</h2>
<ul>
<li>Risk assessment in auditing is <strong>the determination of quantitative value of risk</strong> of a particular subset of accounting operations related to the rendering of the audit opinion - i.e., on whether the accounts have material error when GAAP has been consistently applied. <!-- 監査におけるリスク評価とは、監査意見の表明に関連する会計業務の特定の箇所で発生するリスクの定量的価値を決定することである。ここでリスクとは、GAAPを継続適用している企業において、財務諸表に重要な虚偽表示があるかどうかについてである。 --></li>
<li>Quantitative risk assessment requires calculations of two components of risk — <em>the magnitude of the potential loss</em>, and <em>the probability that the loss will occur</em>. <!-- 定量的リスク評価には、潜在的な虚偽表示の影響額（損失）と、その虚偽表示が発生する確率という2つのリスク要素の計算が求められる。 --> <!-- - The economic events of the accounting cycles are called accounting transactions, and are traditionally recorded in journals. --> <!-- 会計サイクルの経済事象は会計取引と呼ばれ、古くから仕訳帳に記録されている。 --></li>
<li>An accounting cycle begins when accounting personnel create a transaction from a source document and ends with the completion of the financial reports and closing of temporary accounts in preparation for a new cycle. <!-- 会計サイクルは、経理担当者が原始資料から取引を作成することから始まり、財務報告の提出と新しいサイクルに備えた名目勘定の閉鎖をもって終了する。 --></li>
</ul>
</section>
<section id="accounting-cycles" class="slide level2">
<h2>5 Accounting Cycles</h2>
<p>The <em>five accounting cycles</em> are: <!-- （第3章 第8節で説明したように）以下のような5つの会計サイクルがある。 --> 1. Revenue cycle. 2. Expenditure cycle (this cycle focuses on two separate resources: inventory and human resources and often considers two separate cycles: purchasing and payroll/HR ). 3. Conversion cycle (Production cycle). 4. Financing (Capital Acquisition and repayment). 5. Fixed assets.</p>
<!--
1. 収益サイクル
2. 費用サイクル（このサイクルは、商品と人材という2つの別々の資源に焦点を当ており、購買と給与・HRという2つの別々のサイクルとされることもある。）
3. コンバージョンサイクル（製造サイクル）。
4. 財務（資金の調達と返済）。
5. 固定資産
-->
</section>
<section class="slide level2">

<ul>
<li><p>Problems in any transaction generated in these cycles are the sources of “loss” considered in the <strong>Risk Assessment Matrix</strong> (RAM). <!-- このようなサイクルで発生する取引上の問題は、リスク評価マトリクス（Risk Assessment Matrix：RAM）で扱われる「損失」の原因となる。 --></p></li>
<li><p>Risk assessment consists of subjective and objective evaluations of risk in which assumptions and uncertainties are clearly considered and presented. <!-- リスク評価は、仮定と不確実性が明確に検討・表示されたリスクの主観的・客観的評価で構成される。  --></p></li>
<li><p>Part of the difficulty in risk management is that measurement of both potential loss and probability of occurrence is error prone and subjective. <!-- リスクマネジメントの難しさの一つは、潜在的な虚偽表示の影響額と虚偽表示が発生する確率の両方の測定が誤差が生じやすく主観的であることである。 --></p></li>
<li><p>Risk with a large potential loss and a low probability of occurring is often treated differently from one with a low potential loss and a high likelihood of occurring. <!-- 潜在的な虚偽表示の影響額が大きく虚偽表示が発生する確率が低いリスクと、潜在的な虚偽表示の影響額が小さく虚偽表示が発生する確率が高いリスクは、しばしば異なった扱いを受ける。 --></p></li>
</ul>
</section>
<section class="slide level2">

<ul>
<li>In theory, both are of nearly equal priority, but in practice it can be very difficult to manage when faced with the scarcity of resources, especially time, in which to conduct the risk management process. <!-- 理論的には、両者の優先順位はほぼ同じであるが、実際には、リスクマネジメントプロセスを実施するための資源（特に時間）の制約に直面した場合、そのマネジメントは非常に困難となる。 --></li>
<li>This is one conundrum engendered by auditing’s inherently “<strong>wicked</strong>” character. <!-- これは、監査が本質的に「厄介（wicked）」な性格を持っているために生じる難問の一つである。 --></li>
<li>A <strong>Risk Assessment Matrix</strong> (RAM) is a calculation spreadsheet that is used in risk assessment to define, estimate, argue, and support particular risks involved in decision-making.</li>
<li>In auditing, the objective of the RAM is to construct a set of audit tasks that <em>cost-effectively</em> assures that the eventual audit decision will be correct with a particular level of confidence. <!-- RAMとは、意思決定に関する特定のリスクを定義し、見積り、議論し、 サポートするために、リスク評価において利用されるスプレッドシートである。
監査では、RAMの目的は、最終的な監査人の意思決定がコスト効率的に特定の信頼度で上回っていることを保証する監査計画を構築することである。 --></li>
</ul>
</section>
<section class="slide level2">

<ul>
<li>Different statistical philosophies dictate the particular mathematical approach which is applied in the RAM.</li>
<li>We will briefly review the alternatives here, with the goal of describing a simple, somewhat objective approach appropriate for the initial stages of auditing planning.</li>
<li>Mathematicians recognize three broad approaches to risk calculations for decision-making: (1) the <strong>Neyman–Pearson hypothesis</strong> testing framework; (2) the <strong>Minimax game theoretic</strong> framework; and (3) <strong>Bayes Risk</strong>.</li>
<li>This chapter proposes a simplified <strong>Bayes Risk</strong> as most appropriate for early planning of audits.</li>
</ul>
<aside class="notes">
<p>様々な統計学の理論によって、RAMに適用される特定の数学的なアプローチは定義される。 ここでは、監査計画の初期段階に適している単純である程度客観的なアプローチを示すことを目的として、そのアプローチの候補を簡単に紹介する。 数学において、意思決定のためのリスク計算については大まかに、(1) Neyman-Pearsonの仮説検定フレームワーク、(2) ミニマックス法（Minimax）によるゲーム理論的フレームワーク、(3) ベイズリスクの3つのアプローチがある。本章では、監査の初期計画に最も適した簡便化したベイズリスクを提案する。</p>
<style type="text/css">
        span.MJX_Assistive_MathML {
          position:absolute!important;
          clip: rect(1px, 1px, 1px, 1px);
          padding: 1px 0 0 0!important;
          border: 0!important;
          height: 1px!important;
          width: 1px!important;
          overflow: hidden!important;
          display:block!important;
      }</style></aside>
</section>
<section class="slide level2">

<ul>
<li><strong>The Neyman–Pearson lemma</strong> allows performing a hypothesis test between two simple hypotheses using a likelihood-ratio test, and provides a method of statistical inference from evidence.</li>
<li>In statistics, a result is called statistically significant if it has been predicted as unlikely to have occurred by chance alone, according to a pre-determined threshold probability, the significance level.</li>
<li>The phrase “<strong>test of significance</strong>” was coined by statistician Ronald Fisher, and plays an important part in our substantive tests of account balances and material error.</li>
<li>Statistical hypothesis testing is sometimes called <strong>confirmatory data analysis</strong>, in contrast to exploratory data analysis, which may not have pre-specified hypotheses.</li>
</ul>
<aside class="notes">
<p>Neyman-Pearsonの補題は、尤度比検定を用いて2つの単純な仮説間の仮説検定を行うことを可能にし、証拠から統計的推論を行う方法を提供する。 統計学では、ある結果が、あらかじめ決められた閾値（有意水準）に従って、偶然だけでは起こりそうもないと考えられる場合、統計的に有意と呼ばれる。 「有意性の検定（test of significance）」という言葉は、統計学者Ronald Fisherにより創り出された用語で、監査人の世界でも会計残高や重要な虚偽表示に対する実証手続において重要な役割を果たしている。 統計的仮説検定は、事前に規定された仮説を持たない探索的データ分析とは対比して、確認的データ分析（confirmatory data analysis）と呼ばれることもある。</p>
<style type="text/css">
        span.MJX_Assistive_MathML {
          position:absolute!important;
          clip: rect(1px, 1px, 1px, 1px);
          padding: 1px 0 0 0!important;
          border: 0!important;
          height: 1px!important;
          width: 1px!important;
          overflow: hidden!important;
          display:block!important;
      }</style></aside>
</section>
<section class="slide level2">

<ul>
<li>Statistical hypothesis tests define a procedure that controls (fixes) the probability of incorrectly deciding that a default position (null hypothesis) is incorrect based on how likely it would be for a set of observations to occur if <em>the null hypothesis were true</em>.</li>
<li>Note that this probability of making an incorrect decision is not the probability that the <strong>null hypothesis is true</strong>, nor whether <strong>any specific alternative hypothesis is true</strong>.</li>
<li>This contrasts with other possible techniques of decision theory in which the null and alternative hypothesis are treated on a more equal basis.</li>
</ul>
<aside class="notes">
<p>統計的仮説検定は、帰無仮説が真であった場合に、一連の観察結果がどの程度起こりうるかに基づいて、既定の立場（帰無仮説）が誤っていると決定する確率をコントロール（修正）する手順を規定している。 この間違った意思決定をする確率は、帰無仮説が真である確率でも、特定の対立仮説が真である確率でもないことに注意されたい。 これは、帰無仮説と対立仮説がより平等に扱われる決定理論の他の可能な手法とは対照的である。</p>
<style type="text/css">
        span.MJX_Assistive_MathML {
          position:absolute!important;
          clip: rect(1px, 1px, 1px, 1px);
          padding: 1px 0 0 0!important;
          border: 0!important;
          height: 1px!important;
          width: 1px!important;
          overflow: hidden!important;
          display:block!important;
      }</style></aside>
</section>
<section id="minimax-and-bayes-risk" class="slide level2">
<h2>Minimax and Bayes Risk</h2>
<ul>
<li>Minimax is a decision rule published in 1928 by John von Neumann and is used in decision theory, game theory, statistics, and philosophy for minimizing the possible loss for a worst case (maximum loss) scenario. <!-- - Originally formulated for two- players, zero-sum game theory, covering both the cases where players take alternate moves and those where they make simultaneous moves, it has also been extended to more complex games and to general decision-making in the presence of uncertainty. --> <!-- ミニマックス法は、1928年にJohn von Neumannによって発表された意思決定ルールであり、意思決定理論、ゲーム理論、統計学、および哲学において、最悪の場合つまり最大損失（maximum loss）のシナリオで起こりうる損失を最小化するために用いられる。もともとは、2人のプレイヤーが交互に行動する場合と同時に行動する場合の両方を対象としたゼロサムゲーム理論のために定式化されたが、より複雑なゲームや不確実性が存在する場合の一般的な意思決定にも拡張されている。 --></li>
<li>Bayes risk is the expected value of a loss function.</li>
<li>It is typically optimized when a Bayes estimator decision rule is designed to minimize the posterior expected loss.</li>
<li>The most common risk function used for Bayesian estimation is the mean square error (MSE), or squared-error risk <span class="math inline">\mathrm{E}X[\theta (X) - \theta )]</span> for parameter <span class="math inline">\theta</span>. <!-- ベイズリスクは損失関数の期待値である。ベイズ推定量の決定規則が事後的な期待損失を最小化するように設計されるとき、ベイズリスクは通常最適化される。 --> <!-- ベイズ推定に使用される最も一般的なリスク関数は、平均二乗誤差、またはパラメータ$\theta$に対する二乗誤差リスク$\mathrm{E}_x[\hat \theta (x) - \theta^2]$である。 --></li>
</ul>
<!-- The probability of something happening multiplied by the resulting cost or benefit if it does is commonly known as the “**expectation value**” and is used to compare levels of risk and commensurate audit task scope and sample size in the subsequent audit program design. -->
<!-- 何かが起こる確率にそれが起こったときに生じるコストまたは利益を乗じたものは、一般に「期待値」として知られており、その後の監査計画の設計において、リスクのレベルとそれに見合った監査業務範囲およびサンプルサイズを比較するために使用される。 -->
</section>
<section class="slide level2">

<ul>
<li>For audits performed by an outside audit firm, risk assessment is a <em>very crucial stage</em> before accepting an audit engagement.</li>
<li>It is an integral part of determining the audit tasks that will be performed in the audit program.</li>
<li>According to ISA315 “<em>the auditor should perform risk assessment procedures to obtain an understanding of the entity and its environment, including its internal control</em>.”</li>
<li>The auditor obtains initial evidence regarding the classes of transactions at the client and the operating effectiveness of the client’s internal controls.</li>
<li>In auditing standards, audit risk is stated to include inherent risk (<strong>IR</strong>) control risk (<strong>CR</strong>) and detection risk (<strong>DR</strong>) <!-- -  (Srivastava and Shafer 2008; Jones 2017; Bedard, Graham, and Jackson 2005; Knechel 2007). --></li>
</ul>
<aside class="notes">
<p>外部の監査事務所が行う監査において、リスク評価は監査契約を引き受ける前でも非常に重要な局面である。 またリスク評価は、監査計画において実施する監査業務を決定する上で不可欠なものである。 ISA315は「監査人は、内部統制を含む企業およびその環境を理解するために、リスク評価手続を実施しなければならない。」と規定している。 監査人は、被監査会社の取引類型および被監査会社の内部統制の有効性に関する最初の証拠を入手し、リスク評価手続を実施する。 監査基準では、監査リスクには、固有リスク（inherent risk：IR）、統制リスク（control risk：CR）、および発見リスク（detection risk：DR）が含まれるとされている（Srivastava and Shafer 2008; Jones 2017; Bedard, Graham, and Jackson 2005; Knechel 2007）。</p>
<style type="text/css">
        span.MJX_Assistive_MathML {
          position:absolute!important;
          clip: rect(1px, 1px, 1px, 1px);
          padding: 1px 0 0 0!important;
          border: 0!important;
          height: 1px!important;
          width: 1px!important;
          overflow: hidden!important;
          display:block!important;
      }</style></aside>
</section>
<section id="audit-risk-model" class="slide level2">
<h2>Audit Risk Model</h2>
<p>The audit risk model expresses the risk of an auditor providing an inappropriate opinion of a commercial entity’s financial statements and is calculated: <!-- 監査リスクモデルは、監査人が営利企業の財務諸表に対して不適切な意見を提供してしまうリスクを表しており、以下の計算式により計算される。 --></p>
<p><span class="math display">
AR = IR \times CR \times DR
</span></p>
<ul>
<li><span class="math inline">AR</span> is the Audit Risk.</li>
<li><span class="math inline">IR</span> is the Inherent Risk.</li>
<li><span class="math inline">CR</span> is the Control Risk.</li>
<li><span class="math inline">DR</span> is the Detection Risk.</li>
</ul>
</section>
<section class="slide level2">

<ul>
<li>In this formula, <span class="math inline">IR</span> refers to <em>the risk involved in the nature of business or transaction</em>. <!-- この式において$IR$とは、事業や取引の特性に起因するリスクを指す。 --> <!-- Example, transactions involving exchange of cash may have higher IR than transactions involving settlement by checks. --> <!-- 例えば、現金取引は、小切手による決済を伴う取引よりもIRが高くなる可能性がある。 --></li>
<li><span class="math inline">CR</span> refers to the risk that a misstatement could occur but may not be detected and corrected or prevented by entity’s internal control mechanism. <!-- $CR$とは、虚偽表示が存在するにもかかわらず、企業の内部統制システムでその虚偽表示が発見されず、是正されない、または防止されないリスクをいう。 --></li>
<li><span class="math inline">DR</span> is the probability that the audit procedures may fail to detect existence of a material error or fraud. <!-- $DR$とは、監査手続により重要な誤謬や不正を発見できない可能性のことである。 --></li>
<li>While CR depends on the strength or weakness of the internal control procedures, DR is either due to sampling error or human factors. <!-- CRが内部統制手続の強弱に依存するのに対して、$DR$はサンプリングエラーまたは人的な要因によって生じる。 --></li>
</ul>
</section>
<section class="slide level2">

<ul>
<li>This formula is an <em>extreme simplification of the occurrence of loss in the real world</em>, and is only suitable for the early, exploratory stages of planning an audit. <!-- ここで公式は、現実の世界における損失の発生を極端に単純化したものであり、監査計画の初期の探索的な段階にのみ適している。 --> <!-- - As evidence is collected at mid-year and year-end, audit tasks will need to be updated, and audit scope changed to meet the interim findings of the audit. --> <!-- 年度半ばや年度末に監査証拠が収集されるにつれ、監査作業が更新され、監査実施時の発見に応じて監査範囲を変更する必要がある。 --> There are several problems with the simplified formula: <!-- Cox (2008)は、単純化したリスクアプローチの式には下記のような問題があると指摘している。 -->
<ol type="1">
<li><strong>Poor Resolution</strong>. Typical risk matrices can correctly and unambiguously compare only a small fraction <!-- (< 10%) --> of randomly selected pairs of hazards. <!-- They can assign identical ratings to quantitatively very different risks (“range compression”). --></li>
<li><strong>Errors</strong>. Risk matrices can mistakenly assign higher qualitative ratings to quantitatively smaller risks. <!-- For risks with negatively correlated frequencies and severities, they can be “worse than useless,” leading to worse-than-random decisions. --></li>
<li><strong>Suboptimal Resource Allocation</strong>. Effective allocation of resources to risk-reducing countermeasures cannot be based on the categories provided by risk matrices.</li>
<li><strong>Ambiguous Inputs and Outputs</strong>. Categorizations of severity cannot be made objectively for uncertain consequences. Inputs to risk matrices <!-- (e.g., frequency and severity categorizations)  --> and resulting outputs <!-- (i.e., risk ratings) --> require subjective interpretation, and different users may obtain opposite ratings of the same quantitative risks.</li>
</ol></li>
</ul>
<aside class="notes">
<ol type="1">
<li><strong>解像度が低い問題</strong>（Poor Resolution） : 一般的なリスクマトリクスでは、無作為に選択したリスク項目の組み合わせのほとんどを正しく確実に比較することができない（通常正しく比較できるのは10％以下）。 リスクマトリクスには、定量的に大きく異なるリスクに対して、同一の評価を割り当ててしまう問題（範囲圧縮（range compression）と呼ばれる問題）がある。 <!-- <!-- 2. **誤りが生じる問題**（Errors）: リスクマトリクスでは定量的に小さいリスクに対して、より高い定量的評価を誤って割り当ててしまう可能性がある。 --> リスクの発生可能性と潜在的な影響が負の相関を持つリスクについては、リスクマトリクスはランダムより悪い決定を導く、つまり「役に立たないどころか有害である」となる可能性がある。 –&gt;</li>
<li><strong>資源の最適配分ができない可能性</strong>（Suboptimal Resource Allocation）: リスクマトリクスによるリスク分類では、リスク低減対策への効果的な資源配分ができない可能性がある。</li>
<li><strong>入力と出力が曖昧である問題</strong>（Ambiguous Inputs and Outputs） : 不確実な出力結果が不確実な場合、潜在的な影響の分類を客観的に行うことができない可能性がある。リスクマトリクスへの入力（例：リスクの発生可能性と潜在的な影響の分類）とその出力結果（例：リスク評価）には主観的な解釈が必要であり、同じ定量的リスクでも利用者によって評価が正反対になる可能性がある。</li>
</ol>
<style type="text/css">
        span.MJX_Assistive_MathML {
          position:absolute!important;
          clip: rect(1px, 1px, 1px, 1px);
          padding: 1px 0 0 0!important;
          border: 0!important;
          height: 1px!important;
          width: 1px!important;
          overflow: hidden!important;
          display:block!important;
      }</style></aside>
</section>
<section id="accessing-the-secs-edgar-database-of-financial-information" class="slide level2">
<h2>Accessing the SEC’s EDGAR Database of Financial Information</h2>
<!-- ## 第3節 SECのEDGAR財務情報データベースへのアクセス -->
<ul>
<li>One of the first steps in planning an analytical review is a review of current and prior year filings with the SEC. <!-- 分析的レビューを計画する最初のステップの一つは、現在および過年度のSEC提出書類の確認である。 --></li>
<li>These will include annual and quarterly financial statements, restatements, proxy statements, lawsuits, and numerous other documents, where their acquisition and incorporation into workpapers is an essential prerequisite of audit planning. <!-- これらには、年次報告書、四半期財務諸表、修正再表示、委任状、訴訟、およびその他 多くの文書が含まれ、これらを入手し、監査調書に取り込むことは、監査計画立案の重要な前段階である。 --></li>
<li>Fortunately, complete information is available on the SEC’s website at sec.gov. <!-- 幸いなことに、すべての情報はSECのウェブサイトであるsec.govで入手できる。 --></li>
<li>Many of the most relevant documents to an audit are maintained by the SEC in XBRL format (as .XML files) which can be downloaded into the working papers from the Internet. <!-- 監査に最も関連する文書の多くは、SECによってXBRL形式（.XMLファイル）で整備されており、インターネットから監査調書にダウンロードすることができる。 --></li>
</ul>
</section>
<section id="xbrl" class="slide level2">
<h2>XBRL</h2>
<ul>
<li>XBRL is <strong>eXtensible Business Reporting Language</strong>, a freely available, global markup language for exchanging business information. <!-- XBRLとは、拡張可能な事業報告言語（eXtensible Business Reporting Language）の略で、ビジネス情報を伝達するための、自由で利用可能でグローバルなマークアップ言語である。 --></li>
<li>XBRL allows the expression of semantic meaning, which lends to an unambiguous definition of accounts and other financial information. <!-- XBRLは、意味論的意味（semantic meaning）を表現することを可能にし、会計やその他の財務情報の明確な定義を可能にする。 --></li>
<li>XBRL representations of financial reports are more reliable and less subject to misinterpretation than any disseminations in other formats. <!-- XBRLで表現された財務報告書は、他のフォーマットで作成された財務報告書よりも信頼性が高く、誤解を招きにくい。 --></li>
<li>XBRL also allows for automated parsing of information, which can greatly improve the efficiency of audit ratio and statistical analysis. <!-- また、XBRLは情報の自動解析を可能にするため、監査で利用する比率や統計分析の効率を大幅に向上させることができる。 --></li>
</ul>
</section>
<section class="slide level2">

<ul>
<li>The following code chunk accesses the SEC’s XBRL databases to acquire current and prior year filings for any listed company, and read it as a dataset that can be manipulated by R. <!-- 以下のコード・チャンクにより、SECのXBRLデータベースにアクセスし、任意の上場企業の現在および前年度の提出書類を取得し、Rで処理できるデータセットとして読み込むことができる。 --></li>
<li>For this example, we extract General Motors’ 2016 and 2017 financials from the EDGAR database at sec.gov. I use the finstr package to access EDGAR files <sup>1</sup> . <!-- この例では、General Motors社の2016年と2017年の財務情報をsec.govのEDGARデータベースから抽出する。本章では、EDGARファイルにアクセスするために`finstr`パッケージを使用する[^1]。 --></li>
</ul>
<aside><ol class="aside-footnotes"><li id="fn1"><p>[訳註：] 日本からEDGARデータベースへのアクセスには制限があるため，訳書ではEDGARデータベースから直接データ取得は行わず，いったんXBRLファイルをダウンロードしてローカルに保存し，そのファイルを読み込む形でデータ取得を行っている。ここでは作業ディレクトリに<code>XBRL</code> フォルダを作成し，そこに<code>xml</code>ファイルを保存している。</p></li></ol></aside></section>
<section id="finstr-package" class="slide level2">
<h2><code>finstr</code> package</h2>
<div class="cell">
<details class="code-fold">
<summary>コード</summary>
<div class="sourceCode cell-code" id="cb15"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb15-1"><a href="" aria-hidden="true" tabindex="-1"></a>pacman<span class="sc">::</span><span class="fu">p_load</span>(finstr, XBRL, xbrlus, pander, knitr, kableExtra)</span>
<span id="cb15-2"><a href="" aria-hidden="true" tabindex="-1"></a>old_o <span class="ot">&lt;-</span> <span class="fu">options</span>(<span class="at">stringsAsFactors =</span> <span class="cn">FALSE</span>) <span class="co"># 文字列をファクターとして扱わない</span></span>
<span id="cb15-3"><a href="" aria-hidden="true" tabindex="-1"></a>xbrl_data_2016 <span class="ot">&lt;-</span> <span class="fu">xbrlDoAll</span>(<span class="st">"XBRL/gm-20161231.xml"</span>)</span>
<span id="cb15-4"><a href="" aria-hidden="true" tabindex="-1"></a>xbrl_data_2017 <span class="ot">&lt;-</span> <span class="fu">xbrlDoAll</span>(<span class="st">"XBRL/gm-20171231.xml"</span>)</span>
<span id="cb15-5"><a href="" aria-hidden="true" tabindex="-1"></a><span class="fu">options</span>(old_o) <span class="co"># 文字列をファクターとして扱う</span></span>
<span id="cb15-6"><a href="" aria-hidden="true" tabindex="-1"></a>st2016 <span class="ot">&lt;-</span> <span class="fu">xbrl_get_statements</span>(xbrl_data_2016)</span>
<span id="cb15-7"><a href="" aria-hidden="true" tabindex="-1"></a>st2017 <span class="ot">&lt;-</span> <span class="fu">xbrl_get_statements</span>(xbrl_data_2017)</span>
<span id="cb15-8"><a href="" aria-hidden="true" tabindex="-1"></a><span class="fu">print</span>(st2017) <span class="co"># 2017年度の財務諸表</span></span></code><button title="コピー" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output cell-output-stdout">
<pre><code>Financial statements repository
                                                  From         To Rows Columns
ConsolidatedBalanceSheets                   2016-12-31 2017-12-31    2      44
ConsolidatedIncomeStatements                2015-12-31 2017-12-31    3      29
ConsolidatedStatementsOfCashFlows           2015-12-31 2017-12-31    3      42
ConsolidatedStatementsOfComprehensiveIncome 2015-12-31 2017-12-31    3      11</code></pre>
</div>
</div>
</section>
<section class="slide level2">

<h3 id="get-the-financial-statements">Get the financial statements</h3>
<div class="cell">
<details class="code-fold">
<summary>コード</summary>
<div class="sourceCode cell-code" id="cb17"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb17-1"><a href="" aria-hidden="true" tabindex="-1"></a><span class="co"># 連結貸借対照表を取得</span></span>
<span id="cb17-2"><a href="" aria-hidden="true" tabindex="-1"></a>balance_sheet2017 <span class="ot">&lt;-</span> st2017<span class="sc">$</span>ConsolidatedBalanceSheets</span>
<span id="cb17-3"><a href="" aria-hidden="true" tabindex="-1"></a>balance_sheet2016 <span class="ot">&lt;-</span> st2016<span class="sc">$</span>ConsolidatedBalanceSheets</span>
<span id="cb17-4"><a href="" aria-hidden="true" tabindex="-1"></a><span class="co"># 連結損益計算書</span></span>
<span id="cb17-5"><a href="" aria-hidden="true" tabindex="-1"></a>income2017 <span class="ot">&lt;-</span> st2017<span class="sc">$</span>ConsolidatedIncomeStatements</span>
<span id="cb17-6"><a href="" aria-hidden="true" tabindex="-1"></a>income2016 <span class="ot">&lt;-</span> st2016<span class="sc">$</span>ConsolidatedIncomeStatements</span>
<span id="cb17-7"><a href="" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb17-8"><a href="" aria-hidden="true" tabindex="-1"></a><span class="do">## 貸借対照表を出力</span></span>
<span id="cb17-9"><a href="" aria-hidden="true" tabindex="-1"></a><span class="fu">capture.output</span>(</span>
<span id="cb17-10"><a href="" aria-hidden="true" tabindex="-1"></a>    bs_table <span class="ot">&lt;-</span> <span class="fu">print</span>( <span class="co"># 出力</span></span>
<span id="cb17-11"><a href="" aria-hidden="true" tabindex="-1"></a>        balance_sheet2017, <span class="co"># オブジェクト名</span></span>
<span id="cb17-12"><a href="" aria-hidden="true" tabindex="-1"></a>        <span class="at">html =</span> <span class="cn">FALSE</span>, <span class="co"># html出力しない</span></span>
<span id="cb17-13"><a href="" aria-hidden="true" tabindex="-1"></a>        <span class="at">big.mark =</span> <span class="st">","</span>, <span class="co"># 3桁区切りにカンマを使用</span></span>
<span id="cb17-14"><a href="" aria-hidden="true" tabindex="-1"></a>        <span class="at">dateFormat =</span> <span class="st">"%Y"</span>), <span class="co"># 日付のフォーマット</span></span>
<span id="cb17-15"><a href="" aria-hidden="true" tabindex="-1"></a>        <span class="at">file=</span> <span class="st">"NUL"</span>) <span class="co"># 出力先をNULにする</span></span>
<span id="cb17-16"><a href="" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb17-17"><a href="" aria-hidden="true" tabindex="-1"></a>    bs_table <span class="sc">|&gt;</span></span>
<span id="cb17-18"><a href="" aria-hidden="true" tabindex="-1"></a>    <span class="fu">head</span>(<span class="dv">10</span>) <span class="sc">|&gt;</span> <span class="co"># 先頭10行を表示</span></span>
<span id="cb17-19"><a href="" aria-hidden="true" tabindex="-1"></a>        <span class="fu">kable</span>(</span>
<span id="cb17-20"><a href="" aria-hidden="true" tabindex="-1"></a>            <span class="at">longtable =</span> T, <span class="co"># ページまたぎ</span></span>
<span id="cb17-21"><a href="" aria-hidden="true" tabindex="-1"></a>            <span class="at">caption =</span> <span class="st">"Balance Sheet"</span>, <span class="co"># タイトル</span></span>
<span id="cb17-22"><a href="" aria-hidden="true" tabindex="-1"></a>            <span class="at">booktabs =</span> T</span>
<span id="cb17-23"><a href="" aria-hidden="true" tabindex="-1"></a>            ) <span class="sc">|&gt;</span></span>
<span id="cb17-24"><a href="" aria-hidden="true" tabindex="-1"></a>        <span class="fu">kable_styling</span>(</span>
<span id="cb17-25"><a href="" aria-hidden="true" tabindex="-1"></a>            <span class="at">bootstrap_options =</span> <span class="fu">c</span>(<span class="st">"striped"</span>, <span class="st">"hover"</span>, <span class="st">"condensed"</span>),</span>
<span id="cb17-26"><a href="" aria-hidden="true" tabindex="-1"></a>            <span class="at">full_width =</span> F,</span>
<span id="cb17-27"><a href="" aria-hidden="true" tabindex="-1"></a>            <span class="at">font_siz =</span> <span class="dv">18</span></span>
<span id="cb17-28"><a href="" aria-hidden="true" tabindex="-1"></a>            )</span></code><button title="コピー" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output-display">
<table class="table table-striped table-hover table-condensed caption-top" data-quarto-postprocess="true" style="font-size: 18px; width: auto !important; margin-left: auto; margin-right: auto;">
<caption>Balance Sheet</caption>
<thead>
<tr class="header">
<th style="text-align: left;" data-quarto-table-cell-role="th">Element</th>
<th style="text-align: right;" data-quarto-table-cell-role="th">2017-12-31</th>
<th style="text-align: right;" data-quarto-table-cell-role="th">2016-12-31</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td style="text-align: left;">Assets =</td>
<td style="text-align: right;">212482</td>
<td style="text-align: right;">221690</td>
</tr>
<tr class="even">
<td style="text-align: left;">+ AssetsCurrent =</td>
<td style="text-align: right;">68744</td>
<td style="text-align: right;">76203</td>
</tr>
<tr class="odd">
<td style="text-align: left;">+ CashAndCashEquivalentsAtCarryingValue</td>
<td style="text-align: right;">15512</td>
<td style="text-align: right;">12574</td>
</tr>
<tr class="even">
<td style="text-align: left;">+ MarketableSecuritiesCurrent</td>
<td style="text-align: right;">8313</td>
<td style="text-align: right;">11841</td>
</tr>
<tr class="odd">
<td style="text-align: left;">+ AccountsNotesAndLoansReceivableNetCurrent</td>
<td style="text-align: right;">8164</td>
<td style="text-align: right;">8700</td>
</tr>
<tr class="even">
<td style="text-align: left;">+ InventoryNet</td>
<td style="text-align: right;">10663</td>
<td style="text-align: right;">11040</td>
</tr>
<tr class="odd">
<td style="text-align: left;">+ gm_AssetsSubjecttoorAvailableforOperatingLeaseNetCurrent</td>
<td style="text-align: right;">1106</td>
<td style="text-align: right;">1110</td>
</tr>
<tr class="even">
<td style="text-align: left;">+ OtherAssetsCurrent</td>
<td style="text-align: right;">4465</td>
<td style="text-align: right;">3633</td>
</tr>
<tr class="odd">
<td style="text-align: left;">+ AssetsOfDisposalGroupIncludingDiscontinuedOperationCurrent</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">11178</td>
</tr>
<tr class="even">
<td style="text-align: left;">+ NotesAndLoansReceivableNetCurrent</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">0</td>
</tr>
</tbody>
</table>


</div>
</div>
</section>
<section class="slide level2">

<ul>
<li>Planning review looks for changes from prior years, or trends that may be important in the current year’s audit. <!-- 監査計画立案時における分析的手続では、前年度からの変化や、当年度の監査で重要と思われる傾向を調べる。 --></li>
<li>The <code>merge()</code> command consolidates the information from different .XML files into single files (Table 2). <!-- merge()コマンドを利用することで、異なる.XMLファイルからの情報を単一のファイルに統合することができる(表2)。 --></li>
</ul>
</section>
<section class="slide level2">

<div class="cell">
<details class="code-fold">
<summary>コード</summary>
<div class="sourceCode cell-code" id="cb18"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb18-1"><a href="" aria-hidden="true" tabindex="-1"></a>balance_sheet <span class="ot">&lt;-</span> <span class="fu">merge</span>(balance_sheet2017, balance_sheet2016)</span>
<span id="cb18-2"><a href="" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb18-3"><a href="" aria-hidden="true" tabindex="-1"></a><span class="fu">capture.output</span>(</span>
<span id="cb18-4"><a href="" aria-hidden="true" tabindex="-1"></a>    bs_table <span class="ot">&lt;-</span> <span class="fu">print</span>(</span>
<span id="cb18-5"><a href="" aria-hidden="true" tabindex="-1"></a>        balance_sheet,</span>
<span id="cb18-6"><a href="" aria-hidden="true" tabindex="-1"></a>        <span class="at">html =</span> <span class="cn">FALSE</span>,</span>
<span id="cb18-7"><a href="" aria-hidden="true" tabindex="-1"></a>        <span class="at">big.mark =</span> <span class="st">","</span>,</span>
<span id="cb18-8"><a href="" aria-hidden="true" tabindex="-1"></a>        <span class="at">dateFormat =</span> <span class="st">"%Y"</span></span>
<span id="cb18-9"><a href="" aria-hidden="true" tabindex="-1"></a>        ),</span>
<span id="cb18-10"><a href="" aria-hidden="true" tabindex="-1"></a>    <span class="at">file =</span> <span class="st">"NUL"</span></span>
<span id="cb18-11"><a href="" aria-hidden="true" tabindex="-1"></a>    )</span>
<span id="cb18-12"><a href="" aria-hidden="true" tabindex="-1"></a>bs_table <span class="sc">|&gt;</span></span>
<span id="cb18-13"><a href="" aria-hidden="true" tabindex="-1"></a>    <span class="fu">head</span>(<span class="dv">10</span>) <span class="sc">|&gt;</span></span>
<span id="cb18-14"><a href="" aria-hidden="true" tabindex="-1"></a>    <span class="fu">kable</span>(</span>
<span id="cb18-15"><a href="" aria-hidden="true" tabindex="-1"></a>        <span class="at">longtable =</span> T,</span>
<span id="cb18-16"><a href="" aria-hidden="true" tabindex="-1"></a>        <span class="at">caption=</span><span class="st">"Merged Balance Sheet"</span>,</span>
<span id="cb18-17"><a href="" aria-hidden="true" tabindex="-1"></a>        <span class="co"># "latex",</span></span>
<span id="cb18-18"><a href="" aria-hidden="true" tabindex="-1"></a>        <span class="at">booktabs =</span> T) <span class="sc">|&gt;</span></span>
<span id="cb18-19"><a href="" aria-hidden="true" tabindex="-1"></a>    <span class="fu">kable_styling</span>(</span>
<span id="cb18-20"><a href="" aria-hidden="true" tabindex="-1"></a>        <span class="at">bootstrap_options =</span> <span class="fu">c</span>(<span class="st">"striped"</span>, <span class="st">"hover"</span>, <span class="st">"condensed"</span>),</span>
<span id="cb18-21"><a href="" aria-hidden="true" tabindex="-1"></a>        <span class="at">full_width =</span> F,</span>
<span id="cb18-22"><a href="" aria-hidden="true" tabindex="-1"></a>        <span class="at">font_size =</span> <span class="dv">18</span></span>
<span id="cb18-23"><a href="" aria-hidden="true" tabindex="-1"></a>        )</span></code><button title="コピー" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output-display">
<table class="table table-striped table-hover table-condensed caption-top" data-quarto-postprocess="true" style="font-size: 18px; width: auto !important; margin-left: auto; margin-right: auto;">
<caption>Merged Balance Sheet</caption>
<thead>
<tr class="header">
<th style="text-align: left;" data-quarto-table-cell-role="th">Element</th>
<th style="text-align: right;" data-quarto-table-cell-role="th">2017-12-31</th>
<th style="text-align: right;" data-quarto-table-cell-role="th">2016-12-31</th>
<th style="text-align: right;" data-quarto-table-cell-role="th">2015-12-31</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td style="text-align: left;">Assets =</td>
<td style="text-align: right;">212482</td>
<td style="text-align: right;">221690</td>
<td style="text-align: right;">194338</td>
</tr>
<tr class="even">
<td style="text-align: left;">+ AssetsCurrent =</td>
<td style="text-align: right;">68744</td>
<td style="text-align: right;">76203</td>
<td style="text-align: right;">69408</td>
</tr>
<tr class="odd">
<td style="text-align: left;">+ CashAndCashEquivalentsAtCarryingValue</td>
<td style="text-align: right;">15512</td>
<td style="text-align: right;">12960</td>
<td style="text-align: right;">15238</td>
</tr>
<tr class="even">
<td style="text-align: left;">+ MarketableSecuritiesCurrent</td>
<td style="text-align: right;">8313</td>
<td style="text-align: right;">11841</td>
<td style="text-align: right;">8163</td>
</tr>
<tr class="odd">
<td style="text-align: left;">+ AccountsNotesAndLoansReceivableNetCurrent</td>
<td style="text-align: right;">8164</td>
<td style="text-align: right;">9638</td>
<td style="text-align: right;">8337</td>
</tr>
<tr class="even">
<td style="text-align: left;">+ InventoryNet</td>
<td style="text-align: right;">10663</td>
<td style="text-align: right;">13788</td>
<td style="text-align: right;">13764</td>
</tr>
<tr class="odd">
<td style="text-align: left;">+ gm_AssetsSubjecttoorAvailableforOperatingLeaseNetCurrent</td>
<td style="text-align: right;">1106</td>
<td style="text-align: right;">1896</td>
<td style="text-align: right;">2783</td>
</tr>
<tr class="even">
<td style="text-align: left;">+ OtherAssetsCurrent</td>
<td style="text-align: right;">4465</td>
<td style="text-align: right;">4015</td>
<td style="text-align: right;">3072</td>
</tr>
<tr class="odd">
<td style="text-align: left;">+ AssetsOfDisposalGroupIncludingDiscontinuedOperationCurrent</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">0</td>
</tr>
<tr class="even">
<td style="text-align: left;">+ NotesAndLoansReceivableNetCurrent</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">0</td>
</tr>
</tbody>
</table>


</div>
</div>
</section>
<section class="slide level2">

<p>The <code>check_statement()</code> command in finstr will automatically validate internal consistency of transaction lines and summary lines in the EDGAR filings. <!-- finstrの`check_statement()`関数を利用することで、EDGAR提出書類の勘定の数値と（勘定を分類して）集計した数値の内的整合性を自動的に検証することができる。 --></p>
<div class="cell">
<div class="sourceCode cell-code" id="cb19"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb19-1"><a href="" aria-hidden="true" tabindex="-1"></a>check <span class="ot">&lt;-</span> <span class="fu">check_statement</span>(balance_sheet2017)</span>
<span id="cb19-2"><a href="" aria-hidden="true" tabindex="-1"></a>check</span></code><button title="コピー" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</section>
<section class="slide level2">

<div class="cell">
<div class="sourceCode cell-code" id="cb20"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb20-1"><a href="" aria-hidden="true" tabindex="-1"></a><span class="fu">check_statement</span>(</span>
<span id="cb20-2"><a href="" aria-hidden="true" tabindex="-1"></a>    <span class="fu">within</span>(balance_sheet2017, InventoryNet <span class="ot">&lt;-</span> InventoryNet <span class="sc">*</span> <span class="dv">2</span>)</span>
<span id="cb20-3"><a href="" aria-hidden="true" tabindex="-1"></a>    )</span></code><button title="コピー" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>Number of errors:  8 
Number of elements in errors:  4 

Element: AssetsCurrent  =  + CashAndCashEquivalentsAtCarryingValue + MarketableSecuritiesCurrent + AccountsNotesAndLoansReceivableNetCurrent + InventoryNet + gm_AssetsSubjecttoorAvailableforOperatingLeaseNetCurrent + OtherAssetsCurrent + AssetsOfDisposalGroupIncludingDiscontinuedOperationCurrent + NotesAndLoansReceivableNetCurrent 
        date   original calculated     error
3 2016-12-31 7.6203e+10 7.1116e+10 5.087e+09
4 2017-12-31 6.8744e+10 5.8886e+10 9.858e+09

Element: AssetsNoncurrent  =  + EquityMethodInvestments + PropertyPlantAndEquipmentNet + IntangibleAssetsNetIncludingGoodwill + DeferredIncomeTaxAssetsNet + OtherAssetsNoncurrent + DisposalGroupIncludingDiscontinuedOperationAssetsNoncurrent + NotesAndLoansReceivableNetNoncurrent + PropertySubjectToOrAvailableForOperatingLeaseNet 
        date    original  calculated      error
5 2016-12-31 1.45487e+11 1.28486e+11 1.7001e+10
6 2017-12-31 1.43738e+11 1.22530e+11 2.1208e+10

Element: LiabilitiesCurrent  =  + AccountsPayableCurrent + AccruedLiabilitiesCurrent + LiabilitiesOfDisposalGroupIncludingDiscontinuedOperationCurrent + DebtCurrent 
         date   original calculated      error
11 2016-12-31 8.5181e+10 6.1384e+10 2.3797e+10
12 2017-12-31 7.6890e+10 4.9925e+10 2.6965e+10

Element: LiabilitiesNoncurrent  =  + OtherPostretirementDefinedBenefitPlanLiabilitiesNoncurrent + DefinedBenefitPensionPlanLiabilitiesNoncurrent + OtherLiabilitiesNoncurrent + LiabilitiesOfDisposalGroupIncludingDiscontinuedOperationNoncurrent + LongTermDebtAndCapitalLeaseObligations 
         date   original calculated      error
13 2016-12-31 9.2434e+10 4.1108e+10 5.1326e+10
14 2017-12-31 9.9392e+10 3.2138e+10 6.7254e+10</code></pre>
</div>
</div>
</section>
<section class="slide level2">

<div class="cell">
<div class="sourceCode cell-code" id="cb22"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb22-1"><a href="" aria-hidden="true" tabindex="-1"></a>check <span class="ot">&lt;-</span> <span class="fu">check_statement</span>(income2017, <span class="at">element_id =</span> <span class="st">"OperatingIncomeLoss"</span>)</span>
<span id="cb22-2"><a href="" aria-hidden="true" tabindex="-1"></a>check</span></code><button title="コピー" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>Number of errors:  0 
Number of elements in errors:  0 </code></pre>
</div>
</div>
</section>
<section class="slide level2">

<div class="cell">
<div class="sourceCode cell-code" id="cb24"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb24-1"><a href="" aria-hidden="true" tabindex="-1"></a>check<span class="sc">$</span>expression[<span class="dv">1</span>]</span></code><button title="コピー" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] "+ Revenues - CostsAndExpenses"</code></pre>
</div>
<div class="sourceCode cell-code" id="cb26"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb26-1"><a href="" aria-hidden="true" tabindex="-1"></a>check<span class="sc">$</span>calculated <span class="sc">/</span> <span class="dv">10</span><span class="sc">^</span><span class="dv">6</span></span></code><button title="コピー" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1]  5538  9962 10016</code></pre>
</div>
</div>
</section>
<section id="rearranging-the-statement" class="slide level2">
<h2>Rearranging the Statement</h2>
<p>Rearranging statements is often a useful step before actual calculations. Rearrangements can offer several advantages in ad hoc analyses such as analytical review: <!-- 財務諸表の再構成は、実際の計算の前に、しばしば有効なステップとなる。再構成は、分析レビューのような特定の目的のための分析において、いくつかの利点がある。 --></p>
<ul>
<li>We can avoid errors in formulas with many variables, <!-- - 分析者は、変数の多い計算式を利用する分析においてミスを避けることができる。 --></li>
<li>Accounting taxonomies do change and using many formulas on original statement is harder to support than using custom hierarchy for analysis starting point, <!-- - 勘定科目の体系は変化するものであり、（公表前の）オリジナルの財務諸表に多くの計算式を使用する（ことで様々な表示を行う）よりは、分析開始時に分析者独自の前処理段階を入れる方が、簡単にサポートできる。 --></li>
<li>When sharing analyses it is easier to print fewer values. <!-- - 分析を共有する場合、表示する値が少ない方が分かりやすい。 --></li>
</ul>
</section>
<section id="expose-function" class="slide level2">
<h2><code>expose()</code> function</h2>
<p>To rearrange the statement to simple two-level hierarchy use the expose function. <!-- 財務諸表を単純な2階層に再構成するには、`expose()`関数を使用する。 --></p>
<div class="cell">
<div class="sourceCode cell-code" id="cb28"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb28-1"><a href="" aria-hidden="true" tabindex="-1"></a><span class="fu">expose</span>(balance_sheet,</span>
<span id="cb28-2"><a href="" aria-hidden="true" tabindex="-1"></a>    <span class="co"># Assets</span></span>
<span id="cb28-3"><a href="" aria-hidden="true" tabindex="-1"></a>    <span class="st">"Current Assets"</span> <span class="ot">=</span> <span class="st">"AssetsCurrent"</span>,</span>
<span id="cb28-4"><a href="" aria-hidden="true" tabindex="-1"></a>    <span class="st">"Noncurrent Assets"</span> <span class="ot">=</span> <span class="fu">other</span>(<span class="st">"Assets"</span>),</span>
<span id="cb28-5"><a href="" aria-hidden="true" tabindex="-1"></a>    <span class="co"># Liabilites and equity</span></span>
<span id="cb28-6"><a href="" aria-hidden="true" tabindex="-1"></a>    <span class="st">"Current Liabilities"</span> <span class="ot">=</span> <span class="st">"LiabilitiesCurrent"</span>,</span>
<span id="cb28-7"><a href="" aria-hidden="true" tabindex="-1"></a>    <span class="st">"Noncurrent Liabilities"</span> <span class="ot">=</span> <span class="fu">other</span>(<span class="fu">c</span>(<span class="st">"Liabilities"</span>, <span class="st">"CommitmentsAndContingencies"</span>)),</span>
<span id="cb28-8"><a href="" aria-hidden="true" tabindex="-1"></a>    <span class="st">"Stockholders Equity"</span> <span class="ot">=</span> <span class="st">"StockholdersEquity"</span></span>
<span id="cb28-9"><a href="" aria-hidden="true" tabindex="-1"></a>)</span></code><button title="コピー" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>

</section>
<section id="expose-function-output" class="slide level2 output-location-slide"><h2><code>expose()</code> function</h2><div class="cell output-location-slide">
<div class="cell-output cell-output-stdout">
<pre><code>Financial statement: 3 observations from 2015-12-31 to 2017-12-31 
 Element                                  2017-12-31 2016-12-31 2015-12-31
 Assets =                                 212482     221690     194338    
 + Current.Assets                          48223      54138      51357    
 + Noncurrent.Assets                      122530      90237      86258    
 LiabilitiesAndStockholdersEquity =       212482     221690     194338    
 + Current.Liabilities                     49925      56153      51655    
 + Noncurrent.Liabilities                  32138      36834      39249    
 + Stockholders.Equity                     35001      43836      39871    
 + OtherLiabilitiesAndStockholdersEquity_   1199        239        452    </code></pre>
</div>
</div></section><section class="slide level2">

<ul>
<li><p>Here, the balance sheet stays divided by assets, liabilities, and equity. For the second level we are exposing current assets from noncurrent and similarly for the liabilities. We choose to separate equity. <!--
ここで、貸借対照表は資産、負債、および資本に区分できる。つぎに、（資産区分において）流動資産は固定資産から分離（expose）でき、負債についても同様に分離する。（貸方については）資本を負債と区分する。
--></p></li>
<li><p>Function <code>expose()</code> expects a list of vectors with element names. <!--
`expose()`関数は、要素名を持つベクトルのリストを受け取る。
--></p></li>
<li><p>Function <code>other()</code> helps us identify elements without enumerating every single element. <!-- `other()`関数を使えば、すべての要素を列挙することなく、要素を特定することができる。--></p></li>
<li><p>Using <code>other()</code> reduces potential errors, as the function knows which elements are not specified and keeps the balance sheet complete. <!-- `other()`を使うことで、どの要素が指定されていないかがわかるので、潜在的なミスを減らすことができ、貸借対照表を（漏れのない）完全なものに保つことができる。 --></p></li>
<li><p>Sometimes it is easier to define a complement than a list of elements. In this case we can use the <code>%without%</code> operator. <!-- 要素のリストよりも（特定の要素の）補数を定義する方が簡単な場合もある。この場合、演算子`%without%`が利用可能である。 --></p></li>
<li><p>Let us expose, for example, tangible and then intangible assets (Table 3): <!-- 例えば、（下記のコードチャンクにより）有形固定資産、無形固定資産の順に表示してみよう（表3）。 --></p></li>
</ul>
</section>
<section class="slide level2">

<div class="cell">
<div class="sourceCode cell-code" id="cb30"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb30-1"><a href="" aria-hidden="true" tabindex="-1"></a><span class="fu">expose</span>( balance_sheet,</span>
<span id="cb30-2"><a href="" aria-hidden="true" tabindex="-1"></a>    <span class="co"># Assets</span></span>
<span id="cb30-3"><a href="" aria-hidden="true" tabindex="-1"></a>    <span class="st">"Tangible Assets"</span> <span class="ot">=</span> <span class="st">"Assets"</span> <span class="sc">%without%</span> <span class="fu">c</span>(</span>
<span id="cb30-4"><a href="" aria-hidden="true" tabindex="-1"></a>        <span class="st">"AssetsOfDisposalGroupIncludingDiscontinuedOperationCurrent"</span>,</span>
<span id="cb30-5"><a href="" aria-hidden="true" tabindex="-1"></a>        <span class="st">"NotesAndLoansReceivableNetCurrent"</span>,</span>
<span id="cb30-6"><a href="" aria-hidden="true" tabindex="-1"></a>        <span class="st">"gm_AssetsSubjecttoorAvailableforOperatingLeaseNetCurrent"</span></span>
<span id="cb30-7"><a href="" aria-hidden="true" tabindex="-1"></a>        ),</span>
<span id="cb30-8"><a href="" aria-hidden="true" tabindex="-1"></a>    <span class="st">"Intangible Assets"</span> <span class="ot">=</span> <span class="fu">other</span>(<span class="st">"Assets"</span>),</span>
<span id="cb30-9"><a href="" aria-hidden="true" tabindex="-1"></a>   <span class="co"># Liabilites and equity</span></span>
<span id="cb30-10"><a href="" aria-hidden="true" tabindex="-1"></a>    <span class="st">"Liabilities"</span> <span class="ot">=</span> <span class="fu">c</span>(<span class="st">"Liabilities"</span>, <span class="st">"CommitmentsAndContingencies"</span>),</span>
<span id="cb30-11"><a href="" aria-hidden="true" tabindex="-1"></a>    <span class="st">"Stockholders Equity"</span> <span class="ot">=</span> <span class="st">"StockholdersEquity"</span></span>
<span id="cb30-12"><a href="" aria-hidden="true" tabindex="-1"></a>    )</span></code><button title="コピー" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>Financial statement: 3 observations from 2015-12-31 to 2017-12-31 
 Element                                  2017-12-31 2016-12-31 2015-12-31
 Assets =                                 212482     221690     194338    
 + Tangible.Assets                        169647     142479     134832    
 + Intangible.Assets                        1106       1896       2783    
 LiabilitiesAndStockholdersEquity =       212482     221690     194338    
 + Liabilities                             82063      92987      90904    
 + Stockholders.Equity                     35001      43836      39871    
 + OtherLiabilitiesAndStockholdersEquity_   1199        239        452    </code></pre>
</div>
</div>
</section>
<section class="slide level2">

<div class="cell">
<div class="sourceCode cell-code" id="cb32"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb32-1"><a href="" aria-hidden="true" tabindex="-1"></a>diff_bs <span class="ot">&lt;-</span> <span class="fu">diff</span>(balance_sheet)</span>
<span id="cb32-2"><a href="" aria-hidden="true" tabindex="-1"></a><span class="fu">capture.output</span>(</span>
<span id="cb32-3"><a href="" aria-hidden="true" tabindex="-1"></a>    bs_table <span class="ot">&lt;-</span> <span class="fu">print</span>(</span>
<span id="cb32-4"><a href="" aria-hidden="true" tabindex="-1"></a>        diff_bs,</span>
<span id="cb32-5"><a href="" aria-hidden="true" tabindex="-1"></a>        <span class="at">html =</span> <span class="cn">FALSE</span>,</span>
<span id="cb32-6"><a href="" aria-hidden="true" tabindex="-1"></a>        <span class="at">big.mark =</span> <span class="st">","</span>,</span>
<span id="cb32-7"><a href="" aria-hidden="true" tabindex="-1"></a>        <span class="at">dateFormat =</span> <span class="st">"%Y"</span></span>
<span id="cb32-8"><a href="" aria-hidden="true" tabindex="-1"></a>        ), <span class="at">file =</span> <span class="st">"NUL"</span>)</span>
<span id="cb32-9"><a href="" aria-hidden="true" tabindex="-1"></a>bs_table <span class="sc">|&gt;</span></span>
<span id="cb32-10"><a href="" aria-hidden="true" tabindex="-1"></a>    <span class="fu">head</span>(<span class="dv">10</span>) <span class="sc">|&gt;</span></span>
<span id="cb32-11"><a href="" aria-hidden="true" tabindex="-1"></a>    <span class="fu">kable</span>(<span class="at">longtable =</span> T,</span>
<span id="cb32-12"><a href="" aria-hidden="true" tabindex="-1"></a>    <span class="at">caption =</span> <span class="st">"Lagged Differences in Balance Sheets"</span>,</span>
<span id="cb32-13"><a href="" aria-hidden="true" tabindex="-1"></a>    <span class="co"># "latex",</span></span>
<span id="cb32-14"><a href="" aria-hidden="true" tabindex="-1"></a>    <span class="at">booktabs =</span> T) <span class="sc">|&gt;</span></span>
<span id="cb32-15"><a href="" aria-hidden="true" tabindex="-1"></a>    <span class="fu">kable_styling</span>(</span>
<span id="cb32-16"><a href="" aria-hidden="true" tabindex="-1"></a>        <span class="at">bootstrap_options =</span> <span class="fu">c</span>(<span class="st">"striped"</span>, <span class="st">"hover"</span>, <span class="st">"condensed"</span>),</span>
<span id="cb32-17"><a href="" aria-hidden="true" tabindex="-1"></a>        <span class="at">full_width =</span> F,</span>
<span id="cb32-18"><a href="" aria-hidden="true" tabindex="-1"></a>        <span class="at">font_size =</span> <span class="dv">18</span>)</span></code><button title="コピー" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>

</section>
<section id="" class="slide level2 output-location-slide"><div class="cell output-location-slide">
<div class="cell-output-display">
<table class="table table-striped table-hover table-condensed caption-top" data-quarto-postprocess="true" style="font-size: 18px; width: auto !important; margin-left: auto; margin-right: auto;">
<caption>Lagged Differences in Balance Sheets</caption>
<thead>
<tr class="header">
<th style="text-align: left;" data-quarto-table-cell-role="th">Element</th>
<th style="text-align: right;" data-quarto-table-cell-role="th">2017-12-31</th>
<th style="text-align: right;" data-quarto-table-cell-role="th">2016-12-31</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td style="text-align: left;">Assets =</td>
<td style="text-align: right;">-9208</td>
<td style="text-align: right;">27352</td>
</tr>
<tr class="even">
<td style="text-align: left;">+ AssetsCurrent =</td>
<td style="text-align: right;">-7459</td>
<td style="text-align: right;">6795</td>
</tr>
<tr class="odd">
<td style="text-align: left;">+ CashAndCashEquivalentsAtCarryingValue</td>
<td style="text-align: right;">2552</td>
<td style="text-align: right;">-2278</td>
</tr>
<tr class="even">
<td style="text-align: left;">+ MarketableSecuritiesCurrent</td>
<td style="text-align: right;">-3528</td>
<td style="text-align: right;">3678</td>
</tr>
<tr class="odd">
<td style="text-align: left;">+ AccountsNotesAndLoansReceivableNetCurrent</td>
<td style="text-align: right;">-1474</td>
<td style="text-align: right;">1301</td>
</tr>
<tr class="even">
<td style="text-align: left;">+ InventoryNet</td>
<td style="text-align: right;">-3125</td>
<td style="text-align: right;">24</td>
</tr>
<tr class="odd">
<td style="text-align: left;">+ gm_AssetsSubjecttoorAvailableforOperatingLeaseNetCurrent</td>
<td style="text-align: right;">-790</td>
<td style="text-align: right;">-887</td>
</tr>
<tr class="even">
<td style="text-align: left;">+ OtherAssetsCurrent</td>
<td style="text-align: right;">450</td>
<td style="text-align: right;">943</td>
</tr>
<tr class="odd">
<td style="text-align: left;">+ AssetsOfDisposalGroupIncludingDiscontinuedOperationCurrent</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">0</td>
</tr>
<tr class="even">
<td style="text-align: left;">+ NotesAndLoansReceivableNetCurrent</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">0</td>
</tr>
</tbody>
</table>


</div>
</div></section><section class="slide level2">

<ul>
<li>These are the basic tools that you need to access the information on <code>sec.gov</code>.</li>
<li>Note that there are numerous reports on <strong>EDGAR</strong>; finstr will be able to access and format any financial statements in <strong>XBRL</strong> format on the EDGAR database.</li>
<li>Almost all of the EDGAR information is maintained in <strong>HTML</strong> format, and I will provide code later in this chapter to access and parse HTML files in EDGAR. <!-- これらは、（SECのウェブサイトである）sec.govの情報にアクセスするために必要な基本ツールである。EDGARには数多くの報告書があることに注意してほしい。finstrを利用することで、EDGARデータベース上のXBRL形式の財務諸表にアクセスし、形式化されたデータを扱うことができる。ほぼすべてのEDGAR情報はHTML形式で管理されており、EDGARのHTMLファイルにアクセスして解析するコードをこの章の後半で説明する。 --></li>
</ul>
</section>
<section id="caveats-on-accessing-edgar-with-r" class="slide level2">
<h2>Caveats on accessing EDGAR with R</h2>
<!-- ## 第4節 Rを利用したEDGAR情報へのアクセスの注意事項 -->
<ul>
<li>One of the most useful functions that R and its packages offer auditors and accountants is the ability to quickly and directly access SEC filings with very simple R code. <!-- 監査人や会計士がRとそのパッケージを利用する際に最も便利な機能の一つは、非常にシンプルなRコードでSEC提出書類に素早く直接アクセスできることである。 --></li>
<li>This comes with caveats, as EDGAR’s database formatting and naming conventions are not always stable, and can change without warning. <!-- ただし、これには注意点があり、EDGARのデータベースのフォーマットや命名規則（naming convention）は常に一定ではなく、警告なしに変更されることがある。 --></li>
<li>Additionally, the R packages which support access to SEC databases are not always reliably maintained, and changes at the SEC may not be reflected in the code. <!-- さらに、SECデータベースへのアクセスをサポートするRパッケージは、常に確実にメンテナンスされているわけではなく、SECでの変更がRパッケージのコードに反映されないこともある。 --></li>
<li>When you run into problems using the EDGAR related code chunks in this chapter, it is advisable to visit <a href="https://www.sec.gov/edgar/">https://www.sec.gov/edgar/</a> to look at the files in the SEC’s repositories, and see whether they conform to the expectations of R’s packages. <!-- 本章のEDGAR関連のコードチャンクを使用して問題が発生した場合は、ウェブサイト(https://www.sec.gov/edgar/)にアクセスし、SECのリポジトリにあるファイルを見て、Rのパッケージで想定されているコードに適合しているかどうかを確認することをお勧めする。 --> <!-- - Though useful, the EDGAR functions in R require the auditor to be both flexible and willing to debug errant routines. --> <!-- 便利ではあるがRのEDGAR関数を使う限り、監査人は、柔軟に対応し、誤ったパッケージのコードのデバッグをしなければならない。 --></li>
</ul>
</section>
<section class="slide level2">

<ul>
<li>The following are some problems and workarounds I have found in my own use of these packages.</li>
<li>For example, an auditor might run into problems accessing Tesla’s data in XML format, during a time that the SEC seems to have changed naming conventions.</li>
<li>Access of Tesla data up to 2018 works properly, as shown in the following code chunk. <!-- 以下は、私自身がこれらのRパッケージを使用する際に発見したいくつかの問題と解決策である。
例えば、SECが命名規則を変更したと思われる時期、監査人はTesla社のXML形式のデータにアクセスする際に問題に遭遇する可能性がある。
2018年までのTesla社データへのアクセスは、以下のコード・チャンクに示すように適切に機能する。 --></li>
</ul>
</section>
<section class="slide level2">

<div class="cell">
<div class="sourceCode cell-code" id="cb33"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb33-1"><a href="" aria-hidden="true" tabindex="-1"></a><span class="co"># install.packages("finreportr")</span></span>
<span id="cb33-2"><a href="" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(finreportr)</span>
<span id="cb33-3"><a href="" aria-hidden="true" tabindex="-1"></a><span class="co"># The following commands will directly load</span></span>
<span id="cb33-4"><a href="" aria-hidden="true" tabindex="-1"></a><span class="co"># EDGAR information into the R workspace for analysis tesla_co &lt;- CompanyInfo("TSLA")</span></span>
<span id="cb33-5"><a href="" aria-hidden="true" tabindex="-1"></a>tesla_ann <span class="ot">&lt;-</span> <span class="fu">AnnualReports</span>(<span class="st">"TSLA"</span>)</span>
<span id="cb33-6"><a href="" aria-hidden="true" tabindex="-1"></a>tesla_ann</span>
<span id="cb33-7"><a href="" aria-hidden="true" tabindex="-1"></a>tesla_inc <span class="ot">&lt;-</span> <span class="fu">GetIncome</span>(<span class="st">"TSLA"</span>, <span class="dv">2018</span>)</span>
<span id="cb33-8"><a href="" aria-hidden="true" tabindex="-1"></a>tesla_bs <span class="ot">&lt;-</span> <span class="fu">GetBalanceSheet</span>(<span class="st">"TSLA"</span>, <span class="dv">2018</span>)</span>
<span id="cb33-9"><a href="" aria-hidden="true" tabindex="-1"></a>tesla_cf <span class="ot">&lt;-</span> <span class="fu">GetCashFlow</span>(<span class="st">"TSLA"</span>, <span class="dv">2018</span>)</span>
<span id="cb33-10"><a href="" aria-hidden="true" tabindex="-1"></a><span class="fu">head</span>(tesla_inc)</span></code><button title="コピー" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p>But this code will not be able to access Tesla’s 2019 reports, because it throws an error: <!-- しかしこのコードでは、Tesla社の2019年レポートにアクセスすることはできず、エラーメッセージが表示される。 --></p>
</section>
<section class="slide level2">

<ul>
<li><p>What has happened: rather than asking for <code>tsla-20191231.xml</code> the package should have asked for <code>tsla-10k_20191231_htm.xml</code>.</p></li>
<li><p>EDGAR either made a mistake in their index files, or changed naming conventions.</p></li>
<li><p>You can explore this further by going to their website.</p></li>
<li><p>You can also use the <code>xml2</code> package to read what is in the correct file, bypassing <code>finreportr</code> altogether (or just wait for the repositories to be updated with corrected code).</p></li>
<li><p>Consider this workaround to access 2019 data.</p></li>
</ul>
<aside class="notes">
<p>何が起きたのかというと、「tsla-20191231.xml」を要求するのではなく、「tsla10k_20191231_htm.xml」を要求すべきであった。したがって、EDGARシステムがインデックスファイルの名前を間違ったか、命名規則を変更した可能性がある。EDGARのウェブサイトに行けば、さらに詳しく調べることができる。 また、finreportrの使用をやめて、xml2パッケージを使用することで、正しいファイルの内容を読み取ることもできる（あるいは、修正されたコードでfinreportrのリポジトリが更新されるのを待つだけでよい）。2019年のデータにアクセスするための解決策を考えてみよう。</p>
<style type="text/css">
        span.MJX_Assistive_MathML {
          position:absolute!important;
          clip: rect(1px, 1px, 1px, 1px);
          padding: 1px 0 0 0!important;
          border: 0!important;
          height: 1px!important;
          width: 1px!important;
          overflow: hidden!important;
          display:block!important;
      }</style></aside>
</section>
<section id="edgar-package" class="slide level2">
<h2><code>edgar</code> package</h2>
<div class="cell">
<div class="sourceCode cell-code" id="cb34"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb34-1"><a href="" aria-hidden="true" tabindex="-1"></a>pacman<span class="sc">::</span><span class="fu">p_load</span>(xml2, curl)</span>
<span id="cb34-2"><a href="" aria-hidden="true" tabindex="-1"></a>u1 <span class="ot">&lt;-</span> <span class="st">"https://www.sec.gov/Archives/edgar/data/1318605/000156459020004475/tsla-10k_20191231_htm.xml"</span></span>
<span id="cb34-3"><a href="" aria-hidden="true" tabindex="-1"></a>url_file <span class="ot">&lt;-</span> <span class="fu">curl_download</span>(u1, <span class="at">destfile =</span> <span class="st">"~/Downloads/u1.xml"</span>) <span class="co"># to download and save</span></span>
<span id="cb34-4"><a href="" aria-hidden="true" tabindex="-1"></a>list_url_1 <span class="ot">&lt;-</span> <span class="fu">as_list</span>(<span class="fu">read_xml</span>(u1)) <span class="co"># to read into R</span></span></code><button title="コピー" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<ul>
<li>If you would rather avoid the challenge of working with XML altogether, there is another workaround.</li>
<li>The EDGAR package allows you to download the 10-K in text or HTML in computer readable form on your computer. <!-- XMLでの作業を避けたいのであれば、別の解決策がある。EDGARパッケージを利用することで、テキストまたはHTMLの10-Kをコンピュータで読み取り可能な形式でダウンロードすることができる。 --></li>
</ul>
</section>
<section class="slide level2">

<div class="cell">
<div class="sourceCode cell-code" id="cb35"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb35-1"><a href="" aria-hidden="true" tabindex="-1"></a><span class="co"># install.packages("edgar")</span></span>
<span id="cb35-2"><a href="" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(edgar)</span>
<span id="cb35-3"><a href="" aria-hidden="true" tabindex="-1"></a>cik.no <span class="ot">&lt;-</span> <span class="dv">0001318605</span> <span class="co"># Tesla</span></span>
<span id="cb35-4"><a href="" aria-hidden="true" tabindex="-1"></a>form.type <span class="ot">&lt;-</span> <span class="st">"10-K"</span></span>
<span id="cb35-5"><a href="" aria-hidden="true" tabindex="-1"></a>filing.year <span class="ot">=</span> <span class="dv">2019</span></span>
<span id="cb35-6"><a href="" aria-hidden="true" tabindex="-1"></a>quarter <span class="ot">=</span> <span class="fu">c</span>(<span class="dv">1</span>,<span class="dv">2</span>,<span class="dv">3</span>,<span class="dv">4</span>)</span>
<span id="cb35-7"><a href="" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb35-8"><a href="" aria-hidden="true" tabindex="-1"></a><span class="fu">getFilings</span>(</span>
<span id="cb35-9"><a href="" aria-hidden="true" tabindex="-1"></a>    cik.no,</span>
<span id="cb35-10"><a href="" aria-hidden="true" tabindex="-1"></a>    form.type,</span>
<span id="cb35-11"><a href="" aria-hidden="true" tabindex="-1"></a>    filing.year,</span>
<span id="cb35-12"><a href="" aria-hidden="true" tabindex="-1"></a>    quarter,</span>
<span id="cb35-13"><a href="" aria-hidden="true" tabindex="-1"></a>    <span class="at">downl.permit =</span> <span class="st">"y"</span></span>
<span id="cb35-14"><a href="" aria-hidden="true" tabindex="-1"></a>    )</span></code><button title="コピー" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p><code>NULL</code>になりました。</p>
<p>Additionally, you may wish to look at stock prices, and this is easy to do with the tseries package. <!-- さらに、株価を調べたい場合、`tseries`パッケージを使えば簡単にできる。 --></p>
</section>
<section id="audit-staffing-and-budgets" class="slide level2">
<h2>Audit Staffing and Budgets</h2>
<!-- ## 第5節 監査チームの編成と監査契約の予算 -->
<ul>
<li>The audit program lays out in advance of mid-year and year-end tests, the procedures that will be used to collect evidence and to analyze it with the objective of reporting the “correct” audit opinion, while keeping costs within the contracted audit budget.</li>
<li>This section provides an example of an audit program that might be created after the risk assessment. In addition to auditing steps on samples drawn from specific computer files, the example demonstrates the sort of results that the audit would produce, and describes the corrective steps or reporting that would accompany the audit results. <!-- 監査計画において、監査契約の予算の範囲内でコストを抑えつつ、「正しい」監査意見を報告することを目的として、期中および期末の監査手続に先立ち、監査証拠の収集とその分析に使用する手順を示す。本節では、リスク評価の後に作成される監査計画の例を示す。特定のコンピュータ・ファイルから抽出したサンプルの監査の手順に加え、この例では、監査がどのような結果をもたらすかを示し、監査結果に伴う是正措置や報告について説明する。 --></li>
</ul>
</section>
<section class="slide level2">

<ul>
<li>Audit budgeting, which primarily is determined by the allocation of audit staff, is too often made in an ad hoc manner.</li>
<li>Prior years’ budgets and assignments influence staffing; so does availability of knowledgeable staff. Human resource problems, especially in specialized, knowledge intensive industries such as auditing, will never be an exact science.</li>
<li>Nonetheless, management should attempt to instill a reasonable level of cost–benefit discipline in staffing decisions.</li>
</ul>
<aside class="notes">
<p>監査予算は、主に監査スタッフの割り当てによって決定されるが、アドホックな方法で決定されることが多い。前年度の予算と割り当てが監査チームの編成に影響し、知識豊富なスタッフの利用可能性も影響する。人的資源の問題は、特に監査のような専門的で知識集約型の産業においては、決して完全で厳密な科学的手法により決定できるわけではない。それにもかかわらず、監査事務所の監査業務の経営層は、監査チームの編成の意思決定において、合理的なレベルのコスト・ベネフィットの原則を浸透させるよう努めるべきである。</p>
<style type="text/css">
        span.MJX_Assistive_MathML {
          position:absolute!important;
          clip: rect(1px, 1px, 1px, 1px);
          padding: 1px 0 0 0!important;
          border: 0!important;
          height: 1px!important;
          width: 1px!important;
          overflow: hidden!important;
          display:block!important;
      }</style></aside>
</section>
<section class="slide level2">

<ul>
<li>At the planning stage, audit managers will determine the scope of each audit test. From a statistical perspective, this can be estimated as a cost proportional to the sample sizes that are decided on for the tests.</li>
<li>From a staffing perspective, this is proportional to the number of auditors assigned to the audit tasks.</li>
<li>Similarly, the benefit derived from that expenditure can be perceived in terms of the monetary error that could be detected; typically a percentage of the value of the account or years transaction stream.</li>
</ul>
<aside class="notes">
<p>計画段階で、監査マネジャーは各監査手続の範囲を決定する。統計的な観点からは、これは監査手続のために決定されるサンプルサイズに比例するコストとして見積もることができる。監査チームの編成の観点からは、これは監査業務に割り当てられる監査人の人数に比例する。同様に、その費用から得られる便益は、検出される可能性のある誤謬額（典型的には、勘定の金額のまたは年間の取引量の割合）という点で捉えることができる。</p>
<style type="text/css">
        span.MJX_Assistive_MathML {
          position:absolute!important;
          clip: rect(1px, 1px, 1px, 1px);
          padding: 1px 0 0 0!important;
          border: 0!important;
          height: 1px!important;
          width: 1px!important;
          overflow: hidden!important;
          display:block!important;
      }</style></aside>
</section>
<section class="slide level2">

<ul>
<li>Audit programs are collections of audit tests that test different critical transaction and systems processing features in the client’s accounting systems.</li>
<li>I assume that audit planning required for each of the individual audit tests is set to a scope which overall <strong>maximizes the audit risk reduction</strong> for a given cost of conducting the audit with this program.</li>
<li>Staffing is “lumpy” in the sense that you typically get whole auditors assigned to an audit.</li>
<li>The number of auditors assigned to an audit will be commensurate with their potential for detecting monetary error—the benefit received from an audit test. <!-- - We would hope to see the following sort of relation between the potential benefit derived from performing a set of audit tasks, and the person-months of audit staff assigned to a specific audit program. --> <!-- (and thus the cost) (Fig. 1). --></li>
</ul>
<aside class="notes">
<p>監査計画とは、被監査会社の会計システムにおける様々な重要な取引やシステム処理の機能を検証する監査手続の総体である。 監査計画における個々の監査手続に必要な範囲は、この監査計画を用いて監査を実施するために与えられたコストに対して、全体として監査リスクを最小化するような範囲に設定されると仮定している。 監査チームの編成は、通常、監査人全員が監査に割り当てられるという意味で「ざっくりとしたもの（lumpy）」である。 監査に割り当てられる監査人の数は、（監査手続から得られる利益である）金銭的誤謬の発見の可能性に見合ったものとなる。 本書では、一連の監査業務の実施から得られる潜在的便益と、（コストである）特定の監査計画に割り当てられる監査スタッフの人月（person-month）との間に、以下のような関係があることを想定している（図1）。</p>
<style type="text/css">
        span.MJX_Assistive_MathML {
          position:absolute!important;
          clip: rect(1px, 1px, 1px, 1px);
          padding: 1px 0 0 0!important;
          border: 0!important;
          height: 1px!important;
          width: 1px!important;
          overflow: hidden!important;
          display:block!important;
      }</style></aside>
</section>
<section class="slide level2">

<h3 id="audit-staffing-and-budgets-1">Audit Staffing and Budgets</h3>
<div class="cell">
<div class="sourceCode cell-code" id="cb36"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb36-1"><a href="" aria-hidden="true" tabindex="-1"></a>benefit <span class="ot">&lt;-</span> <span class="fu">seq</span>(<span class="dv">10</span>, <span class="dv">10000</span>, <span class="dv">10</span>) <span class="co"># 10から10000まで10刻み</span></span>
<span id="cb36-2"><a href="" aria-hidden="true" tabindex="-1"></a>staff_allocated <span class="ot">&lt;-</span> <span class="fu">data.frame</span>(benefit, <span class="fu">floor</span>(<span class="dv">10</span> <span class="sc">*</span> (<span class="fu">log</span>(benefit<span class="sc">^</span>.<span class="dv">06</span>))))</span>
<span id="cb36-3"><a href="" aria-hidden="true" tabindex="-1"></a><span class="fu">ggplot</span>(staff_allocated, <span class="fu">aes</span>(staff_allocated[,<span class="dv">1</span>],staff_allocated[,<span class="dv">2</span>]) ) <span class="sc">+</span></span>
<span id="cb36-4"><a href="" aria-hidden="true" tabindex="-1"></a>    <span class="fu">geom_line</span>() <span class="sc">+</span> <span class="fu">labs</span>(<span class="at">x =</span><span class="st">"Audit Risk Reduction"</span>,  <span class="at">y =</span><span class="st">"Staff Auditor Person-Months"</span>)</span></code><button title="コピー" class="code-copy-button"><i class="bi"></i></button></pre></div>

</div>
<img data-src="gaisho_2024_04_files/figure-revealjs/unnamed-chunk-18-1.png" width="960" class="r-stretch"></section>
<section id="the-risk-assessment-matrix" class="slide level2">
<h2>The Risk Assessment Matrix</h2>
<!-- ## 第6節 リスク評価マトリクス -->
<ul>
<li>A <strong>Risk Assessment Matrix</strong> is constructed prior to and during the <strong>analytical review</strong> phase of the audit (see Fig. 2 for an example of a RAM dashboard).</li>
<li>During this phase, the auditor will scan any business intelligence from media and Internet sources that would be relevant to potential risks to be encountered in the audit of the client. Prior years’ working papers will also be perused for ascertain experiences, client specific risks, and application of the “rule of 3’s” to adjust any anticipated risks and expectations during the current year audit.</li>
</ul>
<aside class="notes">
<p>リスク評価マトリクスは、監査の分析的手続の前段階およびその実施中に 作成される（RAMダッシュボードの例については、図 2を参照）。 この段階において、監査人は、メディアやインターネット上の情報源から、当該被監査会社の監査で遭遇する潜在的なリスクに関連するビジネス情報を調べ上げる。ま た、過年度の監査調書を閲覧し、経験やクライアント固有のリスクを確認し、「3つの法則（rules of three）」を適用して、当年度の監査で想定されるリスクや 予想事項を調整する。</p>
<style type="text/css">
        span.MJX_Assistive_MathML {
          position:absolute!important;
          clip: rect(1px, 1px, 1px, 1px);
          padding: 1px 0 0 0!important;
          border: 0!important;
          height: 1px!important;
          width: 1px!important;
          overflow: hidden!important;
          display:block!important;
      }</style></aside>
</section>
<section class="slide level2">

<ul>
<li>Audit firms tend to enforce firm specific procedures in auditing.</li>
<li>Each of the “Big 4” audit firms <!-- (which audit almost all of the listed firms on US exchanges) --> displayed unique biases in rendering adverse attestations:
<ul>
<li>Ernst and Young focused on accounts receivables, revenue recognition, taxes, and fixed assets;</li>
<li>PricewaterhouseCoopers focused on accounts receivables, revenue recognition, taxes, and payables;</li>
<li>KPMG focused on accounts receivables, revenue recognition, taxes, and inventory; and</li>
<li>Deloitte and Touche focused on revenue recognition, taxes, liabilities, inventory, and executive compensation (Cheffers 2012).</li>
</ul></li>
</ul>
<aside class="notes">
<p>監査事務所は、監査事務所特有の手続を実施する傾向がある。（米国証券取引所の上場企業のほとんどを監査している）4大監査事務所は、不適正意見を行う際にそれぞれ独自の傾向がある。 それぞれ、EY監査事務所（Ernst &amp; Young）は売掛金、収益認識、税金、および固定資産、 PwC監査事務所（PricewaterhouseCoopers）は売掛金、収益認識、税金、および買掛金、 KPMG監査事務所は売掛金、収益認識、税金、および棚卸資産、 Deloitte監査事務所（Deloitte &amp; Touche）は収益認識、税金、負債、棚卸資産、および役員報酬に重点を置いている（Cheffers 2012）。</p>
<style type="text/css">
        span.MJX_Assistive_MathML {
          position:absolute!important;
          clip: rect(1px, 1px, 1px, 1px);
          padding: 1px 0 0 0!important;
          border: 0!important;
          height: 1px!important;
          width: 1px!important;
          overflow: hidden!important;
          display:block!important;
      }</style></aside>
</section>
<section class="slide level2">

<ul>
<li>These biases are likely to reflect signature audit methods, internal forms and checklists, and audit histories that are unique to individual firms.</li>
<li>These firms will consequently allocate larger portions of the audit budget to certain accounts at the expense of others.</li>
<li>Additionally, auditors tend to allocate more time to auditing debit balance accounts, assuming double-entry will assure the accuracy of the credit accounts.</li>
<li>The specific accounts selected for audit depend on firm policy, procedures, and managing partners.</li>
</ul>
<aside class="notes">
<p>このような監査事務所は、その結果、監査予算の多くを特定の勘定科目に割り当て、他の勘定科目を犠牲にすることになる。 さらに、監査人は、複式簿記の法則により貸方勘定の正確性を確保するために、借方勘定残高の監査に多くの時間を割く傾向がある。 監査対象として選択される勘定科目は、監査事務所の方針、手続、パートナーによって異なる。</p>
<style type="text/css">
        span.MJX_Assistive_MathML {
          position:absolute!important;
          clip: rect(1px, 1px, 1px, 1px);
          padding: 1px 0 0 0!important;
          border: 0!important;
          height: 1px!important;
          width: 1px!important;
          overflow: hidden!important;
          display:block!important;
      }</style></aside>
</section>
<section class="slide level2">

<ul>
<li>In this section, I will show how to construct a Risk Assessment Matrix on a <em>client–server dashboard</em>.</li>
<li>Dashboards are well suited to auditing—they accommodate the information needs of auditors (and their laptops) in the field, while assuring the security, integrity, completeness, and privacy of client and audit records behind firewalls.</li>
<li>The Risk Assessment Matrix will assume we are planning the audit of the simulated system presented in chapter “Simulated Transactions for Auditing Service Organizations” (Fig. 2).</li>
</ul>
<aside class="notes">
<p>本節では、クライアントサーバーのダッシュボード上でリスク評価マトリクスを作成する方法を紹介する。<memo>client-serverはクライアントサーバー ダッシュボードは監査に適している。ファイアウォールの背後にある被監査会社と監査調書記録のセキュリティ、一貫性、完全性、およびプライバシーを保証しながら、現場の監査人（とそのノートパソコン）の情報ニーズに対応する。 後にシステムの監査を行っていると仮定した場合のリスク評価マトリクスを示す。</memo></p>
<style type="text/css">
        span.MJX_Assistive_MathML {
          position:absolute!important;
          clip: rect(1px, 1px, 1px, 1px);
          padding: 1px 0 0 0!important;
          border: 0!important;
          height: 1px!important;
          width: 1px!important;
          overflow: hidden!important;
          display:block!important;
      }</style></aside>
</section></section>
<section>
<section id="using-shiny-to-create-a-risk-assessment-matrix-dashboard" class="title-slide slide level1 center">
<h1>Using Shiny to create a Risk Assessment Matrix Dashboard</h1>

</section>
<section id="ram" class="slide level2">
<h2>RAM</h2>
<!-- ## 第7節 リスク評価マトリクス作成のためのShinyの利用 -->
<ul>
<li>Auditors face a particular problem in the field, in that much of the information they need may be in prior years’ workpapers, in proprietary client files, in central locations in the audit firm and on powerful servers or cloud platforms. <!-- - To secure the clients records and address privacy concerns, it is important that only the necessary information be maintained on mobile platforms such as laptops that are used in the field. --> <!-- 監査人が現場で特に問題に直面するのは、必要な情報の多くが、過年度の監査調書、被監査会社の機密ファイル、監査事務所内の中枢部、ファイアウォールの向こう側、および強力なサーバーやクラウドプラットフォーム上に存在する可能性があるという点である。
被監査会社の記録を保護し、プライバシーの問題に対処するためには、必要な情報のみを、現場で使用されるノートパソコンなどの モバイル機器の環境で管理することが重要である。 --></li>
<li>The standard solution to such problems is found in client–server systems that place secure systems on a centralized server, and provide the field auditor with light, client software that runs on a laptop, communicating with the server over the Internet.</li>
<li><code>Shiny</code> is the client–server extension of the <em>R</em>, and as with the rest of the <em>R</em>, is uniquely suited to handling the ad hoc nature of audits, where each audit often represents an entirely new set of analyses. <!-- このような問題に対する標準的な解決策には、高性能で安全なシステムを集中管理されたサーバーに置き、現場の監査人には（インターネットを介してサーバーと通信して）ラップトップ上で動作する動作の軽いクライアント・ソフトウェアを提供するクライアントサーバーシステムがある。 --></li>
</ul>
</section>
<section id="shiny-app" class="slide level2">
<h2>Shiny App</h2>
<ul>
<li><code>Shiny</code> is a tool for fast prototyping of digital dashboards, giving you a large number of HTML Widgets at your disposal which lend themselves really well to building general-purpose web applications.</li>
<li><code>Shiny</code> is particularly suited for fast prototyping and is fairly easy to use for someone who is not a programmer. Dashboards locally display some data (such as in a database or a file) providing a variety of metrics in an interactive way. <!-- ShinyはR言語のクライアントサーバーの拡張であり、R言語の他の部分と同様に、監査のアドホックな性質を扱うのに独自の適性がある。Shinyは、デジタル・ダッシュボードのプロトタイプを素早く作成するためのツールであり、自由に使える多数のHTMLウィジェットを提供し、汎用のウェブ・アプリケーションを構築するのに非常に適している。Shynyは特に高速なプロトタイプの作成に適しており、プログラマーでなくてもかなり簡単に使うことができる。ダッシュボードは、（データベースやファイルなどの）データをローカルに表示し、インタラクティブな方法で様々な指標を示す。 --></li>
</ul>
</section>
<section class="slide level2">

<h3 id="create-a-ram-dashboard">Create a RAM Dashboard</h3>
<ul>
<li>Reactive programming starts with reactive values that change in response to user input <!-- (such as positioning the confidence and cost sliders)  --> and builds on top of them with reactive expressions that access reactive values and execute other reactive expressions.</li>
<li>Reactivity based code for the Risk Assessment Matrix dashboard appears below.</li>
<li>This has two parts:
<ol type="1">
<li>the <strong>user interface</strong> “ui” which conceivably would operate on the field auditor’s laptop, and</li>
<li>the <strong>server-side “server” operations</strong> that would take place at the audit firms headquarters and with access to firm and client files. <!-- - First I will look at the user interface. --></li>
</ol></li>
</ul>
<aside class="notes">
<p>リアクティブプログラミング（Reactive programming）は、ユーザーの入力に反応して変化するリアクティブ値（信頼度スライダーやコストスライダーの位置決めなど）から始まり、リアクティブ値に反応して他のリアクティブ表現を実行するリアクティブ表現によりダッシュボードの良く見える場所に作成される。 リスク評価マトリクス・ダッシュボードのリアクティブベースのコードを以下で示す。2つの部分から構成されている。 すなわち、(1)現場の監査人のノートパソコンで動作すると考えられる「ユーザインタフェース（user interface：UI）」、および(2)ファイアウォールで保護された監査事務所の本部で行われ、監査事務所と被監査会社のファイルにアクセスできるサーバサイドの「サーバ（server：server）」操作である。まず、ユーザーインターフェースを見てみよう。</p>
<style type="text/css">
        span.MJX_Assistive_MathML {
          position:absolute!important;
          clip: rect(1px, 1px, 1px, 1px);
          padding: 1px 0 0 0!important;
          border: 0!important;
          height: 1px!important;
          width: 1px!important;
          overflow: hidden!important;
          display:block!important;
      }</style></aside>
</section>
<section id="shiny-app-1" class="slide level2">
<h2>Shiny App</h2>
<div class="cell">
<div class="sourceCode cell-code" id="cb37"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb37-1"><a href="" aria-hidden="true" tabindex="-1"></a><span class="co"># Define UI for application</span></span>
<span id="cb37-2"><a href="" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(shiny) <span class="co"># Load the shiny package</span></span>
<span id="cb37-3"><a href="" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb37-4"><a href="" aria-hidden="true" tabindex="-1"></a>ui <span class="ot">&lt;-</span> <span class="fu">fluidPage</span>(</span>
<span id="cb37-5"><a href="" aria-hidden="true" tabindex="-1"></a>    <span class="fu">titlePanel</span>(<span class="st">"Risk Assessment Matrix"</span>),</span>
<span id="cb37-6"><a href="" aria-hidden="true" tabindex="-1"></a>    <span class="fu">sidebarLayout</span>(</span>
<span id="cb37-7"><a href="" aria-hidden="true" tabindex="-1"></a>        <span class="fu">sidebarPanel</span>(</span>
<span id="cb37-8"><a href="" aria-hidden="true" tabindex="-1"></a>            <span class="co"># Input: 監査テストの統計的信頼水準</span></span>
<span id="cb37-9"><a href="" aria-hidden="true" tabindex="-1"></a>            <span class="fu">sliderInput</span>(<span class="st">"confidence"</span>, <span class="st">"Confidence:"</span>,</span>
<span id="cb37-10"><a href="" aria-hidden="true" tabindex="-1"></a>                        <span class="at">min =</span> .<span class="dv">7</span>,</span>
<span id="cb37-11"><a href="" aria-hidden="true" tabindex="-1"></a>                        <span class="at">max =</span> .<span class="dv">999</span>,</span>
<span id="cb37-12"><a href="" aria-hidden="true" tabindex="-1"></a>                        <span class="at">value =</span> .<span class="dv">95</span>),</span>
<span id="cb37-13"><a href="" aria-hidden="true" tabindex="-1"></a>            <span class="co"># Input: サンプル取引ごとの監査コスト</span></span>
<span id="cb37-14"><a href="" aria-hidden="true" tabindex="-1"></a>            <span class="fu">sliderInput</span>(<span class="st">"cost"</span>, <span class="st">"Audit $ / transaction:"</span>,</span>
<span id="cb37-15"><a href="" aria-hidden="true" tabindex="-1"></a>                        <span class="at">min =</span> <span class="dv">0</span>,</span>
<span id="cb37-16"><a href="" aria-hidden="true" tabindex="-1"></a>                        <span class="at">max =</span> <span class="dv">500</span>,</span>
<span id="cb37-17"><a href="" aria-hidden="true" tabindex="-1"></a>                        <span class="at">value =</span> <span class="dv">100</span>),</span>
<span id="cb37-18"><a href="" aria-hidden="true" tabindex="-1"></a>            <span class="co"># Input: Text for providing a caption for the RAM</span></span>
<span id="cb37-19"><a href="" aria-hidden="true" tabindex="-1"></a>            <span class="fu">textInput</span>(</span>
<span id="cb37-20"><a href="" aria-hidden="true" tabindex="-1"></a>                <span class="at">inputId =</span> <span class="st">"caption"</span>,</span>
<span id="cb37-21"><a href="" aria-hidden="true" tabindex="-1"></a>                <span class="at">label =</span> <span class="st">"クライアント:"</span>,</span>
<span id="cb37-22"><a href="" aria-hidden="true" tabindex="-1"></a>                <span class="at">value =</span> <span class="st">"XYZ Corp."</span>)</span>
<span id="cb37-23"><a href="" aria-hidden="true" tabindex="-1"></a>        ),</span>
<span id="cb37-24"><a href="" aria-hidden="true" tabindex="-1"></a>        <span class="co"># Main panel for displaying outputs</span></span>
<span id="cb37-25"><a href="" aria-hidden="true" tabindex="-1"></a>        <span class="fu">mainPanel</span>(</span>
<span id="cb37-26"><a href="" aria-hidden="true" tabindex="-1"></a>            <span class="co"># Output: slider values entered</span></span>
<span id="cb37-27"><a href="" aria-hidden="true" tabindex="-1"></a>            <span class="fu">tableOutput</span>(<span class="st">"values"</span>),</span>
<span id="cb37-28"><a href="" aria-hidden="true" tabindex="-1"></a>            <span class="co"># Output: Formatted text for caption</span></span>
<span id="cb37-29"><a href="" aria-hidden="true" tabindex="-1"></a>            <span class="fu">h3</span>(<span class="fu">textOutput</span>(<span class="st">"caption"</span>, <span class="at">container =</span> span)),</span>
<span id="cb37-30"><a href="" aria-hidden="true" tabindex="-1"></a>            <span class="co"># Output: total cost of the audit</span></span>
<span id="cb37-31"><a href="" aria-hidden="true" tabindex="-1"></a>            <span class="fu">textOutput</span>(<span class="st">"view"</span>),</span>
<span id="cb37-32"><a href="" aria-hidden="true" tabindex="-1"></a>            <span class="co"># Output: RAM summary with sample sizes (scope) and cost</span></span>
<span id="cb37-33"><a href="" aria-hidden="true" tabindex="-1"></a>            <span class="fu">verbatimTextOutput</span>(<span class="st">"summary"</span>),</span>
<span id="cb37-34"><a href="" aria-hidden="true" tabindex="-1"></a>            <span class="fu">h6</span>(<span class="st">"リスク選択: 1 = 低, 2 = 中, 3 = 高"</span>),</span>
<span id="cb37-35"><a href="" aria-hidden="true" tabindex="-1"></a>            <span class="fu">h6</span>(<span class="st">"リスク知能 = ビジネス・インテリジェンス・スキャンニングで示されるリスク水準"</span>),</span>
<span id="cb37-36"><a href="" aria-hidden="true" tabindex="-1"></a>            <span class="fu">h6</span>(<span class="st">"前年度リスク = 前期に監査人が示したリスク水準"</span>),</span>
<span id="cb37-37"><a href="" aria-hidden="true" tabindex="-1"></a>            <span class="fu">h6</span>(<span class="st">"Scope = estimated discovery sample size that will be needed in the audit of this account"</span>),</span>
<span id="cb37-38"><a href="" aria-hidden="true" tabindex="-1"></a>            <span class="fu">h6</span>(<span class="st">"Audit cost = audit labor dollars per sampled transaction"</span>),</span>
<span id="cb37-39"><a href="" aria-hidden="true" tabindex="-1"></a>            <span class="fu">h6</span>(<span class="st">"Confidence = statistical confidence"</span>),</span>
<span id="cb37-40"><a href="" aria-hidden="true" tabindex="-1"></a>            <span class="fu">h6</span>(<span class="st">"Account Amount and the Ave. Transaction size are in $ without decimals or 000 dividers"</span>)</span>
<span id="cb37-41"><a href="" aria-hidden="true" tabindex="-1"></a>        )</span>
<span id="cb37-42"><a href="" aria-hidden="true" tabindex="-1"></a>    )</span>
<span id="cb37-43"><a href="" aria-hidden="true" tabindex="-1"></a>)</span></code><button title="コピー" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</section>
<section class="slide level2">

<ul>
<li>The mathematics of scope assessment takes place on the server.</li>
<li>I used a very simple “discovery sampling” inspired model (see chapter “Design of Audit Programs”) to compute audit scope which I interpret as sample sizes for various transaction flows, computed as: <!-- 監査範囲の評価の計算は、サーバー上で行われる。本書では、非常に単純な「発見サンプリング」に着想を得たモデル（「監査計画の設計」の章を参照）を使用して、様々な取引フローに対するサンプルサイズとして解釈される監査範囲を計算する。具体的には、次の式により計算した。 --></li>
</ul>
<p><span class="math display">
n \approx  \frac{log(1-confidence)}{log(1-\frac{10-risk_{intelligence} \times risk_{prior}}{100})}
</span></p>
<ul>
<li>These are dynamically (reactively in the Shiny vernacular) updated for changes in confidence level and transaction auditing costs established by the auditor. <!-- これらは、監査人による信頼度と取引監査コストの設定の変更に対して、動的に（Shiny流に言えばリアクティブに）更新される。 --></li>
<li>A total audit cost of field tests is computed, to be incorporated into the overall budget of the audit. <!-- 実証手続の総監査費用が計算され、監査全体の予算に組み込まれる。 --></li>
</ul>
</section></section>
<section>
<section id="確率の補足" class="title-slide slide level1 center">
<h1>確率の補足</h1>
<ul>
<li>この式は、<strong>二項分布</strong>に基づく発見サンプルサイズ (discovery sample size)」を計算するための公式で，二項分布とはあるイベントが <span class="math inline">n</span> 回の試行の中で何回発生するかを表す確率分布</li>
<li>成功確率を<span class="math inline">p</span>としたとき、試行回数 <span class="math inline">n</span> の中で少なくとも1回そのイベントが発生する確率を求める。</li>
<li>サンプリングにおいて問題となるのは、「ある許容誤差率」以上のエラーが存在するかどうかを確認するために、どれだけのサンプルサイズを用意すればよいか、という点</li>
<li>この場合、誤り率 <span class="math inline">p = 0.05</span> であり、これを発見するために必要なサンプルサイズ <span class="math inline">n</span> を求めています。</li>
</ul>
</section>
<section id="少なくとも1つの誤りを見つける確率" class="slide level2">
<h2>少なくとも1つの誤りを見つける確率</h2>
<p>あるサンプルサイズ <span class="math inline">n</span> を持ち、誤り率が <span class="math inline">p = 0.05</span> であると仮定 <!-- 少なくとも1つの誤りが検出される確率を計算する。 --></p>
<ol type="1">
<li><p><strong>誤りが1つも見つからない確率</strong>: 各サンプルで誤りが発生しない確率は<span class="math inline">1 - p</span>で，<span class="math inline">n</span>の全てにおいて誤りが1つも発生しない確率は<span class="math inline">(1 - p)^n</span></p></li>
<li><p><strong>少なくとも1つの誤りが見つかる確率</strong>:</p>
<ul>
<li>少なくとも1つの誤りが発生する確率は、1から「誤りが1つも見つからない確率」を引いたもの。<span class="math inline">1 - (1 - p)^n</span></li>
</ul></li>
<li><p><strong>信頼水準<span class="math inline">\text{confidence}</span></strong>: 「少なくとも1つの誤りを検出できる確率」が信頼水準<span class="math inline">\text{confidence}</span>以上であるために必要なサンプルサイズ<span class="math inline">n</span>を計算 <span class="math display">
1 - (1 - p)^n = \text{confidence}
</span></p></li>
</ol>
</section>
<section id="サンプルサイズnを求める" class="slide level2">
<h2>サンプルサイズ<span class="math inline">n</span>を求める</h2>
<p>サンプルサイズ<span class="math inline">n</span>を解く。両辺から1を引いて整理して，対数をとる。 <span class="math display">
\begin{aligned}
(1 - p)^n &amp;= 1 - \text{confidence}\\
\log((1 - p)^n) &amp;= \log(1 - \text{confidence})\\
n \log(1 - p) &amp;= \log(1 - \text{confidence})
\end{aligned}
</span></p>
<p><span class="math inline">n</span> を求めるために、両辺を <span class="math inline">\log(1 - p)</span> で割ると， <span class="math display">
n = \frac{\log(1 - \text{confidence})}{\log(1 - p)}
</span> <!-- これが、サンプルサイズ$n$を計算する公式です。 --></p>
</section>
<section class="slide level2">

<p>許容誤差率<span class="math inline">p = 0.05</span>と信頼水準<span class="math inline">\text{confidence} = 0.95</span>を使うと次のようになる。 <span class="math display">
n = \frac{\log(1 - 0.95)}{\log(1 - 0.05)}
</span></p>
<p>この計算結果は、発見サンプルサイズ<span class="math inline">n</span>を示しており、監査などにおいて設定された許容誤差率（5%）を 95% の確信で検出するために必要なサンプル数を表している。 この式は、二項分布に基づき「少なくとも1つの誤りを検出する確率が信頼水準<span class="math inline">\text{confidence}</span>に達するために必要なサンプルサイズ<span class="math inline">n</span>」を計算するためのものです。 <!-- 信頼水準が高いほど、許容誤差率が低いほど、必要なサンプルサイズは大きくなります。 --></p>
<!-- In practice, the server side of the Risk Assessment Matrix will have access to prior years working papers (assuming they are digitized) and to client accounting files, as well as proprietary audit firm data and technologies. -->
<!-- 実際には、リスク評価マトリクスのサーバーサイドは、監査事務所の機密データや技術だけでなく、（デジタル化されていることが前提であるが）過年度の監査調書や被監査会社の会計ファイルにアクセスすることができる。 -->
</section>
<section id="shiny-app-server" class="slide level2">
<h2>Shiny App (Server)</h2>
<div class="cell">
<details class="code-fold">
<summary>コード</summary>
<div class="sourceCode cell-code" id="cb38"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb38-1"><a href="" aria-hidden="true" tabindex="-1"></a>server <span class="ot">&lt;-</span> <span class="cf">function</span>(input, output) {</span>
<span id="cb38-2"><a href="" aria-hidden="true" tabindex="-1"></a>    ram <span class="ot">&lt;-</span> <span class="fu">read.csv</span>(<span class="fu">system.file</span>(<span class="st">"extdata"</span>,</span>
<span id="cb38-3"><a href="" aria-hidden="true" tabindex="-1"></a>        <span class="st">"risk_asst_matrix.csv"</span>,</span>
<span id="cb38-4"><a href="" aria-hidden="true" tabindex="-1"></a>        <span class="at">package =</span> <span class="st">"auditanalytics"</span>,</span>
<span id="cb38-5"><a href="" aria-hidden="true" tabindex="-1"></a>        <span class="at">mustWork =</span> <span class="cn">TRUE</span>)</span>
<span id="cb38-6"><a href="" aria-hidden="true" tabindex="-1"></a>        )</span>
<span id="cb38-7"><a href="" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb38-8"><a href="" aria-hidden="true" tabindex="-1"></a>    sliderValues <span class="ot">&lt;-</span> <span class="fu">reactive</span>({</span>
<span id="cb38-9"><a href="" aria-hidden="true" tabindex="-1"></a>        <span class="fu">data.frame</span>(</span>
<span id="cb38-10"><a href="" aria-hidden="true" tabindex="-1"></a>            <span class="at">Audit_Parameter =</span> <span class="fu">c</span>(<span class="st">"confidence"</span>, <span class="st">"cost"</span>),</span>
<span id="cb38-11"><a href="" aria-hidden="true" tabindex="-1"></a>            <span class="at">Value =</span> <span class="fu">as.character</span>(<span class="fu">c</span>(input<span class="sc">$</span>confidence, input<span class="sc">$</span>cost)),</span>
<span id="cb38-12"><a href="" aria-hidden="true" tabindex="-1"></a>            <span class="at">stringsAsFactors =</span> <span class="cn">FALSE</span>)</span>
<span id="cb38-13"><a href="" aria-hidden="true" tabindex="-1"></a>        })</span>
<span id="cb38-14"><a href="" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb38-15"><a href="" aria-hidden="true" tabindex="-1"></a>    output<span class="sc">$</span>values <span class="ot">&lt;-</span> <span class="fu">renderTable</span>({</span>
<span id="cb38-16"><a href="" aria-hidden="true" tabindex="-1"></a>        <span class="fu">sliderValues</span>()</span>
<span id="cb38-17"><a href="" aria-hidden="true" tabindex="-1"></a>        })</span>
<span id="cb38-18"><a href="" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb38-19"><a href="" aria-hidden="true" tabindex="-1"></a>    output<span class="sc">$</span>caption <span class="ot">&lt;-</span> <span class="fu">renderText</span>({</span>
<span id="cb38-20"><a href="" aria-hidden="true" tabindex="-1"></a>        input<span class="sc">$</span>caption</span>
<span id="cb38-21"><a href="" aria-hidden="true" tabindex="-1"></a>        })</span>
<span id="cb38-22"><a href="" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb38-23"><a href="" aria-hidden="true" tabindex="-1"></a>    output<span class="sc">$</span>summary <span class="ot">&lt;-</span> <span class="fu">renderPrint</span>({</span>
<span id="cb38-24"><a href="" aria-hidden="true" tabindex="-1"></a>        ram <span class="ot">&lt;-</span> ram</span>
<span id="cb38-25"><a href="" aria-hidden="true" tabindex="-1"></a>        conf <span class="ot">&lt;-</span> input<span class="sc">$</span>confidence</span>
<span id="cb38-26"><a href="" aria-hidden="true" tabindex="-1"></a>        cost <span class="ot">&lt;-</span> input<span class="sc">$</span>cost</span>
<span id="cb38-27"><a href="" aria-hidden="true" tabindex="-1"></a>        risk <span class="ot">&lt;-</span> (<span class="dv">10</span> <span class="sc">-</span> (<span class="fu">as.numeric</span>(ram[,<span class="dv">2</span>]) <span class="sc">*</span> <span class="fu">as.numeric</span>(ram[,<span class="dv">3</span>])) )<span class="sc">/</span><span class="dv">100</span></span>
<span id="cb38-28"><a href="" aria-hidden="true" tabindex="-1"></a>        Scope <span class="ot">&lt;-</span>  <span class="fu">ceiling</span>( <span class="fu">log</span>(<span class="dv">1</span><span class="sc">-</span>conf) <span class="sc">/</span> <span class="fu">log</span>( <span class="dv">1</span><span class="sc">-</span> risk))</span>
<span id="cb38-29"><a href="" aria-hidden="true" tabindex="-1"></a>        ram <span class="ot">&lt;-</span> <span class="fu">cbind</span>(ram[,<span class="dv">1</span><span class="sc">:</span><span class="dv">5</span>], Scope)</span>
<span id="cb38-30"><a href="" aria-hidden="true" tabindex="-1"></a>        Min_cost <span class="ot">&lt;-</span> Scope <span class="sc">*</span> cost</span>
<span id="cb38-31"><a href="" aria-hidden="true" tabindex="-1"></a>        ram <span class="ot">&lt;-</span> <span class="fu">cbind</span>(ram[,<span class="dv">1</span><span class="sc">:</span><span class="dv">6</span>], Min_cost)</span>
<span id="cb38-32"><a href="" aria-hidden="true" tabindex="-1"></a>        ram</span>
<span id="cb38-33"><a href="" aria-hidden="true" tabindex="-1"></a>        })</span>
<span id="cb38-34"><a href="" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb38-35"><a href="" aria-hidden="true" tabindex="-1"></a>    output<span class="sc">$</span>view <span class="ot">&lt;-</span> <span class="fu">renderText</span>({ <span class="co"># 監査費用を表示</span></span>
<span id="cb38-36"><a href="" aria-hidden="true" tabindex="-1"></a>        ram <span class="ot">&lt;-</span> ram <span class="co"># リスク評価行列を読み込む</span></span>
<span id="cb38-37"><a href="" aria-hidden="true" tabindex="-1"></a>        conf <span class="ot">&lt;-</span> input<span class="sc">$</span>confidence <span class="co"># 監査の信頼度</span></span>
<span id="cb38-38"><a href="" aria-hidden="true" tabindex="-1"></a>        cost <span class="ot">&lt;-</span> input<span class="sc">$</span>cost <span class="co"># 監査費用</span></span>
<span id="cb38-39"><a href="" aria-hidden="true" tabindex="-1"></a>        risk <span class="ot">&lt;-</span> (<span class="dv">10</span> <span class="sc">-</span> (<span class="fu">as.numeric</span>(ram[,<span class="dv">2</span>]) <span class="sc">*</span> <span class="fu">as.numeric</span>(ram[,<span class="dv">3</span>])) )<span class="sc">/</span><span class="dv">100</span> <span class="co"># リスク</span></span>
<span id="cb38-40"><a href="" aria-hidden="true" tabindex="-1"></a>        Scope <span class="ot">&lt;-</span>  <span class="fu">ceiling</span>( <span class="fu">log</span>(<span class="dv">1</span><span class="sc">-</span>conf) <span class="sc">/</span> <span class="fu">log</span>( <span class="dv">1</span><span class="sc">-</span> risk)) <span class="co"># 範囲</span></span>
<span id="cb38-41"><a href="" aria-hidden="true" tabindex="-1"></a>        ram <span class="ot">&lt;-</span> <span class="fu">cbind</span>(ram[,<span class="dv">1</span><span class="sc">:</span><span class="dv">5</span>], Scope) <span class="co"># リスク評価行列に範囲を追加</span></span>
<span id="cb38-42"><a href="" aria-hidden="true" tabindex="-1"></a>        Min_cost <span class="ot">&lt;-</span> Scope <span class="sc">*</span> cost <span class="co"># 最小監査費用を計算</span></span>
<span id="cb38-43"><a href="" aria-hidden="true" tabindex="-1"></a>        minimum_audit_cost <span class="ot">&lt;-</span> <span class="fu">sum</span>(Min_cost) <span class="co"># 最小監査費用を合計</span></span>
<span id="cb38-44"><a href="" aria-hidden="true" tabindex="-1"></a>        <span class="fu">c</span>(<span class="st">"Minimum estimated audit cost = "</span>,minimum_audit_cost) <span class="co"># 最小監査費用を表示</span></span>
<span id="cb38-45"><a href="" aria-hidden="true" tabindex="-1"></a>        })</span>
<span id="cb38-46"><a href="" aria-hidden="true" tabindex="-1"></a>}</span></code><button title="コピー" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
</div>
<p>R Studio gives you various options for assembling Shiny apps, including apps with server side code resident on either an RStudio or a bespoke server, and stand-alone client side apps which can be constructed with the following code.</p>
<!-- R Studioでは、Shinyアプリを組み立てるための様々なオプション（サーバーサイドのコードをR Studioまたは特注のサーバーに常駐させるアプリや、下記のコードで構築できるスタンドアローンのクライアントサイドアプリなど）を提供している。 -->
</section>
<section class="slide level2">

<div class="cell" data-context="server">
<div class="sourceCode cell-code" id="cb39"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb39-1"><a href="" aria-hidden="true" tabindex="-1"></a><span class="fu">shinyApp</span>(<span class="at">ui =</span> ui, <span class="at">server =</span> server)</span></code><button title="コピー" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<p></p><div style="width: 100% ; height: 400px ; text-align: center; box-sizing: border-box; -moz-box-sizing: border-box; -webkit-box-sizing: border-box;" class="muted well">Shiny applications not supported in static R Markdown documents</div><p></p>
</div>
</div>
</section>
<section class="slide level2">

<iframe src="https://u66nae-soichi-matsuura.shinyapps.io/Audit_Analytics_chap4/" width="100%" height="1200" frameborder="0">
</iframe>
</section></section>
<section>
<section id="generating-the-audit-budget-from-the-risk-assessment-matrix" class="title-slide slide level1 center">
<h1>Generating the Audit Budget from the Risk Assessment Matrix</h1>
<!-- ## 第8節 リスク評価マトリクスからの監査契約の予算の策定 -->
</section>
<section id="audit-budgets" class="slide level2">
<h2>Audit Budgets</h2>
<ul>
<li><strong>The Risk Assessment Matrix</strong> (RAM) will generate qualitative measures of risk along with initial estimates of minimum (discovery) sample sizes.</li>
<li>This will generally not be sufficient to accurately budget the audit, since higher risk accounts will require audit scope beyond mere “discovery” of errors.</li>
</ul>
<!-- リスク評価マトリックス(RAM)は、最小の（発見サンプリングにおける）サンプルサイズの最初の見積りと共に、リスクの定性的尺度を示すことができる。リスクが高い勘定科目では、単なる虚偽表示の「発見」以上に監査範囲を広げる必要があるため、一般的に、これだけでは正確な監査契約の予算を編成するには不十分である。さらに、監査計画の策定においては、下記に関するコストを見積もる必要がある。 -->
</section>
<section class="slide level2">

<p>In addition, planning will need to estimate costs associated with:</p>
<ol type="1">
<li>Estimating the rates of errors from control weaknesses of all specific types (in interim tests), <!-- 1. （運用評価手続において）すべての種類の統制上の脆弱性から逸脱率を推定する。 --></li>
<li>Assessing the existence and amount of errors in trial balance accounts (in substantive tests), and <!-- 2. （実証手続において）試算表の勘定における虚偽表示の有無と金額の評価を行うこと。 --></li>
<li>Generally assessing structural and qualitative problems in financial information consolidation and presentation. <!-- 3. 財務情報の連結と表示における構造的・質的問題について全般的な評価を行うこと。 --></li>
</ol>
</section>
<section class="slide level2">

<ul>
<li>The third item is beyond the scope of simple technical metrics, and will require <em>the experience and judgment of audit managers</em>. <!-- 3つ目の項目は、単純な技術的な指標の範囲を超えるものであり、監査マネージャーの経験と判断が必要となる。 --></li>
<li>It can probably best be estimated by reviewing prior years’ budgets and assuming similar costs for the current year audit. <!-- 過年度の予算を検討し、当年度の監査に同様の費用がかかると想定することで、最も適切に見積ることができる可能性が高い。 --></li>
<li>The first two items, though, can be budgeted through a relatively <em>simple linear model</em> with assumptions which reflects the cost structure of a particular audit firm. <!-- しかしながら、最初の2つの項目は、各監査事務所のコスト構造を反映した仮定を用いた比較的単純な線形モデルによって予算化することができる。 --></li>
<li>Though each RAM will be auditor and client specific, the prior interactive RAM software can easily be programmed to incorporate such a linear model. <!-- それぞれのリスク評価マトリクスは、監査人および被監査会社に固有のものであるが、既存のインタラクティブなリスク評価マトリクスのソフトウェアは、このような線形モデルを組み込むように簡単にプログラムすることができる。 --> <!-- - This makes it possible to write the technical parts of the audit program and budgets (items 1 and 2 above) automatically from the interactive RAM software. --> <!-- これにより、監査計画と監査契約の予算の技術的な部分（上記の項目1と2）を、インタラクティブなリスク評価マトリクスのソフトウェアから自動的に作成することが可能になる。 --> <!-- - The code chunks, models, and algorithms provided below comprise the building blocks to facilitate such an automatic generation. --> <!-- 以下に示すコードチャンク、モデル、およびアルゴリズムは、このような自動生成を容易にするための基本的な要素を構成している。 --></li>
</ul>
</section>
<section id="technical-sampling-structure-of-the-audit-program" class="slide level2">
<h2>Technical Sampling Structure of the Audit Program</h2>
<!-- ## 監査計画の技術的なサンプリング構造 -->
<ul>
<li>The technical tests of internal control (interim testing) and account balances (substantive testing) consist of audit work investigating the items in transaction samples. <!-- - they are transaction-centric.  --> <!-- 内部統制の技術的な検証（運用評価手続）と勘定残高の監査手続（実証手続）は、取引サンプルの項目（それらは取引中心である）を調査する監査業務から構成されている。 --></li>
<li>The unit of audit work is a sampled transaction, and each type of transaction will be subject to <strong>misaccounting through a variety of control weaknesses</strong>. <!-- 監査作業の単位はサンプリングされた取引であり、各取引の種類は、様々な統制上の脆弱性によって虚偽表示の原因となる。 --></li>
</ul>
</section>
<section class="slide level2">

<h3 id="example-salse-transaciton">Example : salse transaciton</h3>
<!-- Consider a sales transaction. -->
<!-- 売上取引を例として考えてみよう。 -->
<ul>
<li>A sale could be <em>recorded at the wrong amount</em>, or <em>the wrong item sold could have been recorded</em>, or the sale could have been shipped to <em>the wrong customer</em>, or be recorded in <em>the wrong period</em>. <!-- 売上が誤った金額で計上されていたり、誤った商品の品目が計上されていたり、売上が誤った顧客に出荷されたことになっていたり、誤った期間に計上されていたりする可能性がある。 --></li>
<li>Each of these problems reflect a specific audit risk, control weakness, and audit procedure. <!-- これらの問題はそれぞれ、特定の監査リスク、統制上の脆弱性、および監査手続を反映している。 --></li>
<li>Auditors’ concern with such errors differs in the interim and substantive tests. <!-- このような虚偽表示に対する監査人の関心は、運用評価手続と実証手続では異なる。 --> <!-- - In interim tests, the auditor is concerned with estimating the rate at which each type of error occurs. --> <!-- 運用評価手続では、監査人は各種の逸脱率を推定することに関心を持つ。 --></li>
<li>Where this rate suggests a control weakness is significant, the auditor needs to expand the scope of substantive auditing of account balances that are affected by the control weakness. <!-- この逸脱率が、統制上の脆弱性が重要であることを示唆している場合、監査人は、統制上の脆弱性の影響を受ける勘定残高の実証手続の範囲を拡大する必要がある。 --></li>
</ul>
</section>
<section class="slide level2">

<ul>
<li>Placing these considerations in a <em>more formal mathematical setting</em>, let <span class="math inline">T_{i,j}</span> represent a particular control weakness <span class="math inline">j</span> in transaction type <span class="math inline">i</span>. <!-- これらの検討をより正式な数学的設定に置き換え、$T_{i,j}$ を取引種類$i$における特定の統制上の脆弱性$j$を表すとする。 --></li>
<li>Let <span class="math inline">S_{i,j}</span> be the <strong>interim testing sample size</strong> suggested by the RAM to test for control weakness <span class="math inline">j</span> in transaction type <span class="math inline">i</span>. <!-- 取引種類$i$における統制上の脆弱性$j$を検証するためにリスク評価マトリクスが提案する運用評価手続のサンプルサイズを$S_{i,j}$ とする。 --></li>
<li>Let <span class="math inline">C_{i,j}</span> be the <strong>audit cost</strong> to test for control weakness <span class="math inline">j</span> in a single transaction of type <span class="math inline">i</span>.</li>
</ul>
<p>Then a simple linear cost model would be: <!-- ここで、$C_{i,j}$を$i$の種類の取引における統制上の脆弱性$j$を検証するための監査手続のコストとする。この場合、単純な線形コストモデルは下記のようになる。 --></p>
<p><span class="math display">
\text{total cost of technical interim test} = \sum _{i,j} S_{i,j} \times C_{i,j}
</span></p>
</section>
<section class="slide level2">

<p>The matrix form is typically more useful in writing R language code, because the transaction, cost, and sample values are matrices that can directly use the fast BLAS/LAPACK implementations in R for linear algebra, rather than coding slow, messy, nested for statements. The matrix form is:</p>
<p><span class="math display">
\text{total cost of technical interim test} = 1_{(i)}^{\top} \times \left (T \times S^{\top} \times C \right ) \times 1_{(j)}
</span></p>
<p>where <span class="math inline">1_{(i)}^{\top}</span> is the row <span class="math inline">i</span>-vector whose entries are all <span class="math inline">1</span>’s, <span class="math inline">1_(j)</span> is the column <span class="math inline">j</span>-vector whose entries are all <span class="math inline">1</span>’s, <span class="math inline">T = \{T_{i,j} \}</span>, <span class="math inline">S = \{ S_{i,j} \}</span>, and <span class="math inline">C = \{ C_{i,j} \}</span>.</p>
<aside class="notes">
<p>行列形式は、遅くて面倒な入れ子になったfor文をコーディングするよりも、R言語のコードを書く際には通常より有用である。なぜならば、取引、コスト、およびサンプルの値は行列であり、線形代数のためのRの高速なBLAS/LAPACK実装を直接使うことができるからである。行列の形式は以下の通りである。 ここで、<span class="math inline">1_{(i)}^T</span>は要素がすべて1の<span class="math inline">i</span>行ベクトル、<span class="math inline">1_(j)</span>は要素がすべて<span class="math inline">1</span>の<span class="math inline">j</span>列のベクトル、<span class="math inline">T = \{T_{i,j} \}</span>、<span class="math inline">S = \{ S_{i,j} \}</span>、<span class="math inline">C = \{ C_{i,j} \}</span>である。</p>
<style type="text/css">
        span.MJX_Assistive_MathML {
          position:absolute!important;
          clip: rect(1px, 1px, 1px, 1px);
          padding: 1px 0 0 0!important;
          border: 0!important;
          height: 1px!important;
          width: 1px!important;
          overflow: hidden!important;
          display:block!important;
      }</style></aside>
</section>
<section id="sample-sizes-for-budgeting" class="slide level2">
<h2>Sample Sizes for Budgeting</h2>
<!-- ### 予算策定のためのサンプルサイズの決定 -->
<p>There are two types of sampling in interim tests: <!-- 運用評価手続におけるサンプリングには2種類ある。 --></p>
<ol type="1">
<li>Discovery sampling for discovery of <em>out-of-control</em> transaction streams <!-- 1. 統制から逸脱している取引を発見するための発見サンプリング --></li>
<li>Attribute sampling for estimating transaction error rate <!-- 2. 取引の逸脱率を推定するための属性サンプリング --></li>
</ol>
<p><em>Discovery sampling</em> sets a sample size that is likely to discover at least one error in the sample if the actual transaction error rate exceeds the minimum acceptable error-rate (alternatively called the out-of-control* rate of error). <!-- 発見サンプリングでは、実際の取引の逸脱率が最低許容逸脱率（minimum acceptable error rate）を超えた場合に（統制上の逸脱率（control rate of error）とも呼ばれる）、サンプルの中に少なくとも1つの逸脱を発見する可能性のあるサンプルサイズを設定する。 --> Discovery tests helps the auditor decide whether the systems processing a particular transaction stream are in or out of control. <!-- 発見サンプリングによる手続は、監査人が、個々の取引を処理するシステムが統制されているのか、または内部統制から逸脱しているかを判断するのに役立つ。 --></p>
<aside class="notes">
<p>許容逸脱率とは、母集団において不備の発生が許容される割合の上限値となり、内部統制の実施基準では前述の通り10%未満となります。 内部統制の実務上は、実施基準上、90%以上の信頼性確保が必要となるため、許容逸脱率は9%が上限です。</p>
<p>発見サンプリングは、目標となるエラー水準を固定して行うサンプリングである。 目標エラー割合は０％かそれに近く設定されるため１件のエラー発見時に目標未達が確定するので、テストは停止される。</p>
<style type="text/css">
        span.MJX_Assistive_MathML {
          position:absolute!important;
          clip: rect(1px, 1px, 1px, 1px);
          padding: 1px 0 0 0!important;
          border: 0!important;
          height: 1px!important;
          width: 1px!important;
          overflow: hidden!important;
          display:block!important;
      }</style></aside>
</section>
<section class="slide level2">

<ul>
<li>Budgeted sample sizes in interim testing will depend on whether the RAM suggests that control risk is <em>low or high</em>.</li>
<li>If it is low, then the discovery sample size plus a <strong>‘security’ factor</strong> for cases where error is discovered will estimated the scope of auditing.</li>
</ul>
<aside class="notes">
<p>運用評価手続におけるサンプルサイズの予算は、リスク評価マトリクスにおいて統制リスクが低い/高いことを示唆しているかによって決定する。 リスクが低い場合には、監査の範囲は、発見サンプリングにおけるサンプルサイズに、逸脱が発見された場合の「安全性（security）」ファクターを加えたものによって推定される。</p>
<style type="text/css">
        span.MJX_Assistive_MathML {
          position:absolute!important;
          clip: rect(1px, 1px, 1px, 1px);
          padding: 1px 0 0 0!important;
          border: 0!important;
          height: 1px!important;
          width: 1px!important;
          overflow: hidden!important;
          display:block!important;
      }</style></aside>
<div class="cell">
<div class="sourceCode cell-code" id="cb40"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb40-1"><a href="" aria-hidden="true" tabindex="-1"></a>confidence <span class="ot">&lt;-</span> <span class="fu">seq</span>(.<span class="dv">99</span>, <span class="fl">0.7</span>, <span class="sc">-</span><span class="fl">0.01</span>) <span class="co"># 0.99から0.7まで0.01刻みのベクトル</span></span>
<span id="cb40-2"><a href="" aria-hidden="true" tabindex="-1"></a>n <span class="ot">&lt;-</span> (<span class="fu">log</span>(<span class="dv">1</span> <span class="sc">-</span> confidence)) <span class="sc">/</span> <span class="fu">log</span>(<span class="dv">1</span> <span class="sc">-</span> <span class="fl">0.05</span>) <span class="co"># 発見サンプルサイズを計算</span></span>
<span id="cb40-3"><a href="" aria-hidden="true" tabindex="-1"></a><span class="fu">plot</span>(confidence,n, <span class="at">type=</span><span class="st">"l"</span>) <span class="co"># 発見サンプルサイズをプロット</span></span></code><button title="コピー" class="code-copy-button"><i class="bi"></i></button></pre></div>

</div>
<img data-src="gaisho_2024_04_files/figure-revealjs/unnamed-chunk-22-1.png" width="960" class="r-stretch"></section>
<section class="slide level2">

<p>So for a 5% intolerable error rate at 95% confidence we have: <!-- したがって、信頼度95％で許容不能な逸脱率5％のサンプルサイズは、以下のように計算することができる。 --></p>
<div class="cell">
<div class="sourceCode cell-code" id="cb41"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb41-1"><a href="" aria-hidden="true" tabindex="-1"></a>confidence <span class="ot">&lt;-</span> <span class="fl">0.95</span></span>
<span id="cb41-2"><a href="" aria-hidden="true" tabindex="-1"></a>n <span class="ot">&lt;-</span> (<span class="fu">log</span>(<span class="dv">1</span> <span class="sc">-</span> confidence)) <span class="sc">/</span> <span class="fu">log</span>(<span class="dv">1</span> <span class="sc">-</span> <span class="fl">0.05</span>)</span>
<span id="cb41-3"><a href="" aria-hidden="true" tabindex="-1"></a><span class="fu">cat</span>(<span class="st">"</span><span class="sc">\n</span><span class="st"> Discovery sample size = "</span>, <span class="fu">ceiling</span>(n))</span></code><button title="コピー" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>
 Discovery sample size =  59</code></pre>
</div>
</div>
<p>Where the RAM assesses control risk to be anything higher, the auditor can assume that scope will be expanded to include attribute sampling.</p>
<aside class="notes">
<p>リスク評価マトリクスが統制リスクをより高く評価する場合には、監査人は、属性サンプリングを実施する範囲を拡大することを前提とする可能性がある。</p>
<p>ここでの log(1 - confidence) と log(1 - 0.05) は、それぞれ信頼水準と許容誤差率を基に、どれだけのサンプルが必要かを対数で計算しています。 これは「二項分布」を利用した計算方法であり、ある確率（この場合、許容誤差率が5%）のイベントが95%の確信で検出されるために必要なサンプル数を算出しています。</p>
<style type="text/css">
        span.MJX_Assistive_MathML {
          position:absolute!important;
          clip: rect(1px, 1px, 1px, 1px);
          padding: 1px 0 0 0!important;
          border: 0!important;
          height: 1px!important;
          width: 1px!important;
          overflow: hidden!important;
          display:block!important;
      }</style></aside>
</section>
<section class="slide level2">

<ul>
<li>Attribute sampling estimates the error rate in the entire transaction population with some confidence (e.g., 95%) that the estimate is within the <em>out-of-control error-rate cutoff</em> for that transaction stream.</li>
<li>If it is found that a particular transaction stream is out of control, then attribute estimation will help us decide on the actual error rate of the systems that process this transaction stream.</li>
<li>If discovery sampling suggests that a particular transaction stream is out of control, then attribute estimation will help us decide on the actual error rate of the systems that process this transaction stream.</li>
<li>Errors estimates from attribute samples may either be <em>rates</em> or <em>amounts</em> or both.</li>
</ul>
<aside class="notes">
<p>属性サンプリングは、ある信頼度（例えば95％）により、母集団である取引全体における逸脱率を推定する。ここで信頼度は、その推定値が当該取引ストリームの許容逸脱率（閾値）以内であることに関するものである。 （発見サンプリングにより）特定の取引ストリームが統制から逸脱していることが判明した場合、属性推定はこの取引ストリームを処理するシステムの実際の逸脱率を決定するのに役立つ。属性サンプルから推定される逸脱は、逸脱率または逸脱数のいずれか、あるいは両方である。 （発見サンプリングにより）特定の取引ストリームが統制から逸脱していることが判明した場合、属性推定はこの取引ストリームを処理するシステムの実際の逸脱率を決定するのに役立つ。 属性サンプルから推定される逸脱は、逸脱率または逸脱数のいずれか、あるいは両方である。</p>
<style type="text/css">
        span.MJX_Assistive_MathML {
          position:absolute!important;
          clip: rect(1px, 1px, 1px, 1px);
          padding: 1px 0 0 0!important;
          border: 0!important;
          height: 1px!important;
          width: 1px!important;
          overflow: hidden!important;
          display:block!important;
      }</style></aside>
</section>
<section class="slide level2">

<p><em>Attribute sampling size</em> is determined using Cohen’s power analysis (Cohen 1992) which is implemented in R’s <em>pwr</em> package, We compute both in the following code chunk <!-- 属性サンプリングにおけるサンプルサイズは、R のpwrパッケージに実装されている Cohenの検出力分析（Cohen 1992）を使用して決定する。以下のコードチャンクで両者を計算することができる。 --></p>
<div class="cell">
<details class="code-fold">
<summary>コード</summary>
<div class="sourceCode cell-code" id="cb43"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb43-1"><a href="" aria-hidden="true" tabindex="-1"></a><span class="co"># install.packages("pwr") # first time only</span></span>
<span id="cb43-2"><a href="" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(pwr)　<span class="co"># Cohen本のpower analysis</span></span>
<span id="cb43-3"><a href="" aria-hidden="true" tabindex="-1"></a>size <span class="ot">&lt;-</span> <span class="dv">1000</span> <span class="co"># トランザクションの総数</span></span>
<span id="cb43-4"><a href="" aria-hidden="true" tabindex="-1"></a>Delta <span class="ot">&lt;-</span> <span class="fl">0.05</span> <span class="sc">*</span> size <span class="co"># 5%の許容エラー率を検出する</span></span>
<span id="cb43-5"><a href="" aria-hidden="true" tabindex="-1"></a>sigma <span class="ot">&lt;-</span> <span class="fl">0.3</span> <span class="sc">*</span> size <span class="co"># 変動（おそらく1/3）を推測する</span></span>
<span id="cb43-6"><a href="" aria-hidden="true" tabindex="-1"></a>effect <span class="ot">&lt;-</span> Delta<span class="sc">/</span>sigma <span class="co"># 許容度÷変動</span></span>
<span id="cb43-7"><a href="" aria-hidden="true" tabindex="-1"></a>sample <span class="ot">&lt;-</span> <span class="fu">pwr.t.test</span>( <span class="co"># pwr.t.test関数を使用</span></span>
<span id="cb43-8"><a href="" aria-hidden="true" tabindex="-1"></a>    <span class="at">d =</span> effect, <span class="at">sig.level =</span> <span class="fl">0.05</span>, <span class="at">power =</span> <span class="fl">0.8</span>,</span>
<span id="cb43-9"><a href="" aria-hidden="true" tabindex="-1"></a>    <span class="at">type =</span> <span class="st">"one.sample"</span>,</span>
<span id="cb43-10"><a href="" aria-hidden="true" tabindex="-1"></a>    <span class="at">alternative =</span> <span class="st">"greater"</span> <span class="do">## look for overstatement of earnings</span></span>
<span id="cb43-11"><a href="" aria-hidden="true" tabindex="-1"></a>    )</span>
<span id="cb43-12"><a href="" aria-hidden="true" tabindex="-1"></a><span class="fu">cat</span>(<span class="st">"</span><span class="sc">\n</span><span class="st"> Attribute sample size for occurrence of error = "</span>, <span class="fu">ceiling</span>(sample<span class="sc">$</span>n))</span></code><button title="コピー" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output cell-output-stdout">
<pre><code>
 Attribute sample size for occurrence of error =  224</code></pre>
</div>
</div>
</section>
<section class="slide level2">

<p>Attribute sampling determines sample size to estimate the <em>error amount</em> in a transaction stream. <!-- # エラーの'金額'を推定するための属性サンプル --></p>
<div class="cell">
<div class="sourceCode cell-code" id="cb45"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb45-1"><a href="" aria-hidden="true" tabindex="-1"></a>size <span class="ot">&lt;-</span> <span class="dv">100000</span>     <span class="do">## total amount of transactions</span></span>
<span id="cb45-2"><a href="" aria-hidden="true" tabindex="-1"></a>mu <span class="ot">&lt;-</span> <span class="dv">50</span>           <span class="do">## average value of transaction</span></span>
<span id="cb45-3"><a href="" aria-hidden="true" tabindex="-1"></a>Delta <span class="ot">&lt;-</span> <span class="fl">0.05</span> <span class="sc">*</span> mu <span class="do">## detect 5% amount intolerrable error</span></span>
<span id="cb45-4"><a href="" aria-hidden="true" tabindex="-1"></a>sigma <span class="ot">&lt;-</span> <span class="dv">30</span>        <span class="do">## variability</span></span>
<span id="cb45-5"><a href="" aria-hidden="true" tabindex="-1"></a>effect <span class="ot">&lt;-</span> Delta<span class="sc">/</span>sigma</span>
<span id="cb45-6"><a href="" aria-hidden="true" tabindex="-1"></a>sample <span class="ot">&lt;-</span> <span class="fu">pwr.t.test</span>(</span>
<span id="cb45-7"><a href="" aria-hidden="true" tabindex="-1"></a>  <span class="at">d =</span> effect, <span class="at">sig.level =</span> <span class="fl">0.05</span>, <span class="at">power =</span> <span class="fl">0.8</span>,</span>
<span id="cb45-8"><a href="" aria-hidden="true" tabindex="-1"></a>  <span class="at">type =</span> <span class="st">"one.sample"</span>, <span class="at">alternative =</span> <span class="st">"greater"</span>)</span>
<span id="cb45-9"><a href="" aria-hidden="true" tabindex="-1"></a><span class="fu">cat</span>(<span class="st">"</span><span class="sc">\n</span><span class="st"> Attribute sample size for amount of error = "</span>, <span class="fu">ceiling</span>(sample<span class="sc">$</span>n))</span></code><button title="コピー" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>
 Attribute sample size for amount of error =  892</code></pre>
</div>
</div>
</section>
<section class="slide level2">

<ul>
<li>The auditor faces different decisions in <em>substantive testing</em>. <!-- 監査人は、実証手続において様々な意思決定に直面する。 --></li>
<li>The particular type of account determines the impact of <em>control weaknesses</em> found in interim testing. <!-- 特定の勘定科目の種類によって、運用評価手続で発見された統制上の脆弱性の影響の評価が決まる。 --></li>
<li>For example, a 5% error rate in a $1 million sales account discovered in interim testing implies a $50,000 error in annual sales on the trial balance. <!-- 例えば、運用評価手続で発見された100万ドルの売上勘定における5％の逸脱率は、試算表上の年間売上高に5万ドルの虚偽表示額を意味する。 --></li>
<li>Assume that accounts receivable turn over 10 times annually, then that 5% error rate implies only a $5000 misstatement in accounts receivable. <!-- 一方、売掛金回転率が年間10回と仮定すると、5％の逸脱率は（売掛金の残高が10万ドルなので）売掛金に5000ドルの虚偽表示額を意味するだけである。 --></li>
<li>Whether sales or accounts receivable are ‘fairly stated’ depends on the immateriality level set by the auditor – a $10,000 materiality level would imply that sales is not fairly presented, while accounts receivable is fairly stated. <!-- 売上高または売掛金が「公正に表示」されているかは、監査人が設定する重要性の基準によって決まる。 --> <!-- 重要性の基準が1万ドルであれば、売上高は公正に表示されていないが、売掛金は公正に表示されていることになる。 --></li>
</ul>
</section>
<section class="slide level2">

<ul>
<li>At year-end where there will be a complete set of transactions available for the year, and substantive samples are typically focused on acceptance sampling to determine of the account balance is ‘fairly stated’ (does not contain intolerable or material error). <!-- 年度末にはその年度の完全な取引のすべてが入手可能であり、実証手続のサンプルは通常、勘定残高が「公正に記載されている」（許容できない虚偽表示や重要な虚偽表示が含まれていない）かどうかを判断するための採択サンプリングに重点が置かれる。 --></li>
<li>The approach is the same as attribute sampling of amounts, and is inherently more straightforward than interim control tests. <!-- このアプローチは、金額についての属性サンプリングと同じであり、運用評価手続よりも本質的に単純である。 --></li>
<li>Substantive tests estimate the error rate in an account balance with some confidence (e.g., 95%) that the estimate is within the ‘materiality’ or ‘intolerable error’ cutoff for that account balance <!-- 実証手続は、ある勘定残高の虚偽表示率を推定し、その推定値がその勘定残高の「重要性」または「許容不可能な虚偽表示」の閾値以内であることを一定の信頼度（例えば95％）で確信するものである。 --></li>
</ul>
</section>
<section class="slide level2">

<ul>
<li>For example, consider sampling sales invoices from the accounts receivable aging report and comparing them to supporting documentation to see if they were billed in the correct amounts, to the correct customers, and on the correct dates. <!-- 　例えば、売掛金滞留報告書から売掛金請求書をサンプリングし、それらを証憑書類と比較して、正しい金額、正しい顧客、正しい日付で請求されたかどうかを確認することを検討する。 --></li>
<li>Additionally, auditors might trace invoices to shipping log, and match invoice dates to the shipment dates for those items in the shipping log, to see if sales are being recorded in the correct accounting period. <!-- さらに、監査人は、請求書から出荷記録をたどり、請求書の日付と出荷記録にある商品の出荷日を照合し、売上が正しい会計期間に計上されているかどうかを確認する。 --></li>
<li>This can include an examination of invoices issued after the period being audited, to see if they should have been included in a prior period. <!-- これには、監査対象期間の後に発行された請求書が、以前の期間に含まれるべきものであるかどうかの調査も含まれる。 --></li>
</ul>
</section>
<section class="slide level2">

<ul>
<li><strong>Acceptance sampling size</strong> is determined using Cohen’s power analysis which is implemented in R’s <em>pwr</em> package, If <strong>discovery sampling</strong> suggests that a particular transaction stream is out of control, then attribute estimation will help us decide on the actual error rate of the systems that process this transaction stream. <!-- 採択サンプリングにおけるサイズは、Rの`pwr`パッケージに実装されているCohenの検出力分析（Cohen 1992）を使用して決定される。 --> <!-- 発見サンプリングが特定の取引ストリームが統制から逸脱していることを示唆している場合、属性推定はこのトランザクションの流れを処理するシステムの実際の逸脱率を決定するのに役立つ。 --></li>
<li>Errors estimates from attribute samples may either be <em>rates of erroneous transactions</em> or from a monetary unit sampling perspective, can be <em>rates of monetary error in the transaction stream</em>. <!-- 属性サンプリングから推定されるエラーは、誤った取引の率である場合もあれば、金額単位サンプリングの観点からは、取引ストリームの虚偽表示額の割合である場合もある。 --></li>
</ul>
</section>
<section class="slide level2">

<p>We compute both in the following code chunk <!-- 以下のコードチャンクで両方を計算する。 --></p>
<div class="cell">
<details class="code-fold">
<summary>コード</summary>
<div class="sourceCode cell-code" id="cb47"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb47-1"><a href="" aria-hidden="true" tabindex="-1"></a>size   <span class="ot">&lt;-</span> <span class="dv">100000</span>      <span class="co"># 取引の総額</span></span>
<span id="cb47-2"><a href="" aria-hidden="true" tabindex="-1"></a>mu     <span class="ot">&lt;-</span> <span class="dv">50</span>          <span class="co"># 取引の平均値</span></span>
<span id="cb47-3"><a href="" aria-hidden="true" tabindex="-1"></a>Delta  <span class="ot">&lt;-</span> <span class="fl">0.05</span> <span class="sc">*</span> mu   <span class="co"># 5%の金額の許容誤差を検出</span></span>
<span id="cb47-4"><a href="" aria-hidden="true" tabindex="-1"></a>sigma  <span class="ot">&lt;-</span> <span class="dv">30</span>          <span class="co"># 変動</span></span>
<span id="cb47-5"><a href="" aria-hidden="true" tabindex="-1"></a>effect <span class="ot">&lt;-</span> Delta <span class="sc">/</span> sigma <span class="co"># 許容度÷変動</span></span>
<span id="cb47-6"><a href="" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb47-7"><a href="" aria-hidden="true" tabindex="-1"></a>sample <span class="ot">&lt;-</span> <span class="fu">pwr.t.test</span>( <span class="co"># Cohenのpower analysis</span></span>
<span id="cb47-8"><a href="" aria-hidden="true" tabindex="-1"></a>  <span class="at">d =</span> effect,       <span class="co"># Cohenのd</span></span>
<span id="cb47-9"><a href="" aria-hidden="true" tabindex="-1"></a>  <span class="at">sig.level =</span> <span class="fl">0.05</span>, <span class="co"># 有意水準</span></span>
<span id="cb47-10"><a href="" aria-hidden="true" tabindex="-1"></a>  <span class="at">power =</span> <span class="fl">0.8</span>,      <span class="co"># 効果量</span></span>
<span id="cb47-11"><a href="" aria-hidden="true" tabindex="-1"></a>  <span class="at">type =</span> <span class="st">"one.sample"</span>, <span class="co"># 一標本検定</span></span>
<span id="cb47-12"><a href="" aria-hidden="true" tabindex="-1"></a>  <span class="at">alternative =</span> <span class="st">"greater"</span> <span class="co"># 偽陽性</span></span>
<span id="cb47-13"><a href="" aria-hidden="true" tabindex="-1"></a>  )</span>
<span id="cb47-14"><a href="" aria-hidden="true" tabindex="-1"></a><span class="fu">cat</span>(<span class="st">"</span><span class="sc">\n</span><span class="st"> Attribute sample size for amount of error = "</span>, <span class="fu">ceiling</span>(sample<span class="sc">$</span>n))</span></code><button title="コピー" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output cell-output-stdout">
<pre><code>
 Attribute sample size for amount of error =  892</code></pre>
</div>
</div>
</section></section>
<section>
<section id="notable-audit-failures-and-why-they-occurred" class="title-slide slide level1 center">
<h1>Notable Audit Failures and Why They Occurred</h1>
<!-- 注目すべき監査の失敗とその原因 -->
<ul>
<li>Audit and accounting practice have been strongly influenced by a string of scandals that have occurred nearly every 7 years since the Reagan reforms of the early 1980s.</li>
<li>The medical, legal and accounting professions were opened up to free-market forces when all three professions were allowed direct-to-consumer marketing and brand-building.</li>
<li>Rules regarding pricing and competition for talent were also relaxed.</li>
</ul>
<aside class="notes">
<p>監査実務と会計実務は、1980年代初頭のレーガン改革以来、ほぼ7年ごとに発生している一連のスキャンダルに強く影響を受けてきた。 医療、法律、会計の各専門職は、直接消費者向けのマーケティングとブランド構築が許可されたとき、自由市場の力によって開かれた。 価格設定や人材の競争に関する規則も緩和された。</p>
<style type="text/css">
        span.MJX_Assistive_MathML {
          position:absolute!important;
          clip: rect(1px, 1px, 1px, 1px);
          padding: 1px 0 0 0!important;
          border: 0!important;
          height: 1px!important;
          width: 1px!important;
          overflow: hidden!important;
          display:block!important;
      }</style></aside>
</section>
<section class="slide level2">

<ul>
<li>In auditing the repeal of AICPA Ethics Rules Section 501 on advertising, recruiting from other firms and other free-market innovations moved the industry from its cossetted clubby culture to a profit-oriented business. − By the late 1990s audit firms were averaging $7 of IT revenue for every $1 of audit revenue.</li>
<li>The year 2001 witnessed a series of financial frauds involving Enron Corporation auditing firm Arthur Andersen, the telecommunications company WorldCom, Qwest, and Sunbeam among other well-known corporations.</li>
</ul>
<aside class="notes">
<p>監査において、AICPA倫理規則第501条（広告、他の企業からの採用など）の廃止、他の企業からの採用などの自由市場の革新により、業界は、保護されたクラブ文化から利益志向のビジネスへと移行した。 1990年代後半には、監査会社は監査収益1ドルに対してIT収益7ドルを平均していた。 2001年には、エンロン社、監査会社アーサー・アンダーセン、通信会社ワールドコム、クエスト、サンビームなどの他の有名な企業を巻き込んだ一連の財務詐欺事件が発生した。</p>
<style type="text/css">
        span.MJX_Assistive_MathML {
          position:absolute!important;
          clip: rect(1px, 1px, 1px, 1px);
          padding: 1px 0 0 0!important;
          border: 0!important;
          height: 1px!important;
          width: 1px!important;
          overflow: hidden!important;
          display:block!important;
      }</style></aside>
</section>
<section class="slide level2">

<ul>
<li>These problems highlighted the need to review <strong>the effectiveness</strong> of accounting standards, auditing regulations and corporate governance principles.</li>
<li>In some cases, management manipulated the figures shown in financial reports to indicate a better economic performance.</li>
<li>In others, tax and regulatory incentives encouraged over-leveraging of companies and decisions to bear extraordinary and unjustified risk.</li>
</ul>
<aside class="notes">
<p>これらの問題は、会計基準、監査規制、企業ガバナンス原則の有効性を見直す必要性を浮き彫りにした。 一部の場合、経営陣は財務報告書に表示される数字を操作して、より良い経済的成績を示そうとした。 他の場合、税制や規制上のインセンティブが企業の過剰レバレッジや非常識なリスクを負う決定を促した。</p>
<style type="text/css">
        span.MJX_Assistive_MathML {
          position:absolute!important;
          clip: rect(1px, 1px, 1px, 1px);
          padding: 1px 0 0 0!important;
          border: 0!important;
          height: 1px!important;
          width: 1px!important;
          overflow: hidden!important;
          display:block!important;
      }</style></aside>
</section>
<section class="slide level2">

<ul>
<li>The <strong>Enron scandal</strong> deeply influenced the development of new regulations to improve the reliability of financial reporting and increased public awareness about the importance of having accounting standards that show the financial reality of companies and the objectivity and independence of auditing firms.</li>
<li>In addition to being the largest bankruptcy reorganization in American history, the Enron scandal undoubtedly is the biggest audit failure. The scandal caused <em>the dissolution of Arthur Andersen</em> which at the time was one of the five largest accounting firms in the world.</li>
<li>One consequence of these events was the passage of the <strong>Sarbanes–Oxley Act in 2002</strong>. <!-- The act significantly raises criminal penalties for securities fraud for destroying, altering, or fabricating records in federal investigations or any scheme or attempt to defraud shareholders. --></li>
</ul>
<aside class="notes">
<p>エンロンの不祥事は、会計基準が企業の財務の実態を示し、監査会社の客観性と独立性を示すことの重要性についての公衆の認識を高めるための新しい規制の開発に大きな影響を与えた。 アメリカ史上最大の破産再編であるだけでなく、エンロンの不祥事は間違いなく最大の監査失敗である。 この不祥事は、当時世界で5番目に大きな会計事務所の1つであったアーサー・アンダーセンの解散を引き起こした。 これらの出来事の一つの結果は、2002年にサーベインズ・オクスリー法が成立したことである。 この法律は、連邦捜査で記録を破壊、変更、または偽造し、株主を詐欺しようとするあらゆる計画や試みに対する証券詐欺の刑事罰を大幅に引き上げている。</p>
<style type="text/css">
        span.MJX_Assistive_MathML {
          position:absolute!important;
          clip: rect(1px, 1px, 1px, 1px);
          padding: 1px 0 0 0!important;
          border: 0!important;
          height: 1px!important;
          width: 1px!important;
          overflow: hidden!important;
          display:block!important;
      }</style></aside>
</section></section>
<section>
<section id="auditing-a-wicked-problem" class="title-slide slide level1 center">
<h1>Auditing: A Wicked Problem</h1>

</section>
<section id="wicked-problem" class="slide level2">
<h2>Wicked Problem</h2>
<ul>
<li>In theory, independent audits increase the value and credibility of the financial statements, reduce investor risk, and reduce the cost of capital of audited firms.</li>
<li>They are often required under securities law and by investors and creditors.</li>
<li>But such assertions have grown increasingly contentious over time as the definitions and usage of financial statements have evolved and changed.</li>
<li>Scholars are increasingly aware that many of auditing’s difficulties reflect its status as a wicked problem.</li>
</ul>
<aside class="notes">
<p>理論上では，独立した監査は，財務諸表の価値と信頼性を高め，投資家のリスクを低減し，監査対象企業の資本コストを低減する。 これらは，証券法によって要求されることが多く，投資家や債権者によっても要求される。 しかし，これらの主張は，財務諸表の定義や使用法が進化し変化するにつれて，ますます論争の的となってきている。 学者たちは，監査の多くの困難が，それが悪い問題であるという状況を反映していることにますます気づいている。</p>
<style type="text/css">
        span.MJX_Assistive_MathML {
          position:absolute!important;
          clip: rect(1px, 1px, 1px, 1px);
          padding: 1px 0 0 0!important;
          border: 0!important;
          height: 1px!important;
          width: 1px!important;
          overflow: hidden!important;
          display:block!important;
      }</style></aside>
</section>
<section class="slide level2">

<ul>
<li>Wicked problems are difficult or impossible to solve because of incomplete, contradictory and changing requirements that are often difficult to recognize.</li>
<li>The term <strong>wicked</strong> is used not in the sense of evil but rather <strong>its resistance to resolution</strong>.</li>
<li>Moreover because of complex interdependencies, the effort to solve one aspect of a wicked problem may reveal or create other problems.</li>
<li>Contrast this with relatively tame soluble problems in mathematics, chess or puzzle solving (Coyne 2005; Ludwig 2001; Rittel and Webber 1973).</li>
</ul>
<aside class="notes">
<p>悪い問題は，不完全で矛盾した要件や変化する要件によって解決が困難または不可能であり，これらの要件はしばしば認識が難しい。 「悪い」という用語は，悪意のあるという意味ではなく，むしろ解決に対する抵抗という意味で使われている。 さらに，複雑な相互依存関係のため，悪い問題の一つの側面を解決しようとする努力は，他の問題を明らかにしたり作り出したりするかもしれない。 これに対して，数学，チェス，パズル解決などの比較的穏やかな解決可能な問題とは対照的である（Coyne 2005; Ludwig 2001; Rittel and Webber 1973）。</p>
<style type="text/css">
        span.MJX_Assistive_MathML {
          position:absolute!important;
          clip: rect(1px, 1px, 1px, 1px);
          padding: 1px 0 0 0!important;
          border: 0!important;
          height: 1px!important;
          width: 1px!important;
          overflow: hidden!important;
          display:block!important;
      }</style></aside>
</section>
<section id="wicked-problems" class="slide level2">
<h2>Wicked Problems</h2>
<ul>
<li>Audits are classic <strong>wicked problems</strong> sharing the following characteristics (Rittel and Webber 1973):</li>
</ul>
<ol type="1">
<li>There is no definitive formulation of auditing.</li>
<li>Audits have no stopping rule.</li>
<li>Audit products are not true-or-false rather are opinions.</li>
<li>There is no immediate and no ultimate test of an audit conclusion.</li>
<li>Each audit is a one-shot operation.</li>
</ol>
<aside class="notes">
<p>監査は、次の特徴を共有する古典的な「悪い問題」である（Rittel and Webber 1973）。</p>
<ol type="1">
<li>監査の明確な定式化がない。</li>
<li>監査には停止規則がない。</li>
<li>監査の成果物は真偽ではなく意見である。</li>
<li>監査の結論には即時テストも最終テストもない。</li>
<li>各監査は一回限りの作業である。</li>
</ol>
<style type="text/css">
        span.MJX_Assistive_MathML {
          position:absolute!important;
          clip: rect(1px, 1px, 1px, 1px);
          padding: 1px 0 0 0!important;
          border: 0!important;
          height: 1px!important;
          width: 1px!important;
          overflow: hidden!important;
          display:block!important;
      }</style></aside>
</section>
<section class="slide level2">

<ol start="6" type="1">
<li>Audits do not have an enumerable or an exhaustively describable set of potential solutions nor is there a well-described set of permissible operations that may be incorporated into the audit program.</li>
<li>Every audit is essentially unique.</li>
<li>Every audit procedure can be considered to be a response to some other finding.</li>
<li>The existence of an audit discrepancy can be explained in numerous ways. The choice of explanation determines the nature of the problems resolution and the audit opinion.</li>
</ol>
<aside class="notes">
<ol start="6" type="1">
<li>監査には、列挙可能な、あるいは網羅的に記述可能な潜在的解決策の集合があるわけではなく、また監査プログラムに組み込むことができる許容される操作のセットも存在しない</li>
<li>すべての監査は本質的に一意である。</li>
<li>すべての監査手続は他の発見事項に対する対応であると考えることができる。</li>
<li>監査上の不一致の存在は、多くの方法で説明することができる。どの説明を選択するかによって、問題解決と監査意見の性質が決まる。説明の選択により、問題解決と監査意見の性質が決まる。</li>
</ol>
<style type="text/css">
        span.MJX_Assistive_MathML {
          position:absolute!important;
          clip: rect(1px, 1px, 1px, 1px);
          padding: 1px 0 0 0!important;
          border: 0!important;
          height: 1px!important;
          width: 1px!important;
          overflow: hidden!important;
          display:block!important;
      }</style></aside>
</section>
<section class="slide level2">

<ol start="10" type="1">
<li>The auditor has no right to be wrong and is ultimately liable for the consequences of audit opinions.</li>
<li>The solution depends on how the problem is framed and vice versa, i.e., the problem definition depends on the solution.</li>
<li>Stakeholders have radically different world views and different frames for understanding the problem.</li>
<li>The constraints that the problem is subject to and the resources needed to solve it change over time.</li>
</ol>
<aside class="notes">
<ol start="10" type="1">
<li>監査人は監査意見を誤る権利を有しておらず、監査意見の結果について最終的な責任を負う。</li>
<li>つまり問題の定義が解決策に依存している。</li>
<li>利害関係者は、根本的に異なる世界観を持っており、問題を理解するためのフレームも異なる。</li>
<li>問題の対象となる制約や、解決に必要な資源は、時間とともに変化する。 –&gt;</li>
</ol>
<style type="text/css">
        span.MJX_Assistive_MathML {
          position:absolute!important;
          clip: rect(1px, 1px, 1px, 1px);
          padding: 1px 0 0 0!important;
          border: 0!important;
          height: 1px!important;
          width: 1px!important;
          overflow: hidden!important;
          display:block!important;
      }</style></aside>
</section>
<section class="slide level2">

<h3 id="competitive-strategies">Competitive Strategies</h3>
<ul>
<li>Roberts (2002) and Roberts (2000) identified three strategies to address wicked problems: <strong>competitive, authoritative and collaborative</strong>. <!-- Roberts (2002)やRoberts (2000)は，悪い問題，:競争的，権威的，協調的に対処するための3つの戦略を特定している。 --></li>
<li><strong>Competitive strategies</strong> attempt to solve wicked problems by pitting opposing points of view against each other requiring parties that hold these views to come up with their preferred solutions. <!-- 競争戦略は、対立する視点を互いに対立させることで悪い問題を解決しようとする。これにより、これらの視点を持つ当事者は、自分たちの好ましい解決策を考え出さなければならない。 --></li>
<li>The advantage of this approach is that different solutions can be weighed up against each other and the best one chosen. <!-- このアプローチの利点は，異なる解決策を互いに比較し，最良の解決策を選択できることである。 --></li>
<li>The disadvantage is that this adversarial approach creates a confrontational environment in which knowledge sharing is discouraged. <!-- 欠点は，この対立的なアプローチが，知識共有が奨励されない対立的な環境を作り出すことである。 --> <!-- - Consequently the parties involved may not have an incentive to come up with their best possible solution. --> <!-- その結果，関係する当事者は，最善の解決策を考え出す動機付けを持たないかもしれない。 --></li>
</ul>
</section>
<section class="slide level2">

<h3 id="collaborative-strategies">Collaborative Strategies</h3>
<ul>
<li>Collaborative strategies try to engage all stakeholders in order to find the best possible solution for all stakeholders. <!-- 協調戦略は，すべての利害関係者を巻き込み，すべての利害関係者にとって最善の解決策を見つけることを試みる。 --></li>
<li>Typically these approaches involve meetings in which issues and ideas are discussed and a common agreed approach is formulated. <!-- 通常，これらのアプローチには，問題やアイデアが議論され，共通の合意されたアプローチが策定される会議が含まれる。 --></li>
<li>Such approaches share many of the disadvantages of competitive approaches and can be even more time consuming. <!-- このようなアプローチは，競争的アプローチの多くの欠点を共有しており，さらに時間がかかることがある。 --></li>
</ul>
</section>
<section class="slide level2">

<h3 id="authoritative-strategies">Authoritative Strategies</h3>
<ul>
<li>Authoritative strategies concentrate responsibility for solving the problems in the hands of a few people, for example Certified Public Accountants. <!-- 権威主義的戦略は，例えば公認会計士のようなわずかな人々に問題の解決責任を集中させる。 --></li>
<li>The reduction in the number of stakeholders reduces problem complexity as many competing points of view are eliminated at the start. <!-- 利害関係者の数の削減により，多くの競合する視点が最初から排除されることで，問題の複雑さが減少する。 --></li>
<li>The disadvantage is that authorities and experts charged with solving the problem lack all of the information needed to efficiently and completely solve the problem. <!-- 欠点は、問題を解決するために責任を負う権威と専門家が、問題を効率的かつ完全に解決するために必要な情報をすべて持っていないことである。 --></li>
</ul>
</section>
<section class="slide level2">

<h3 id="auditing-as-a-wicked-problem">Auditing as a Wicked Problem</h3>
<ul>
<li><p>Auditing for better or worse has chosen to couch the industrial organization of the audit business in an authoritarian structure. <!-- 監査は，良いか悪いかにかかわらず，監査業務の産業構造を権威主義的な構造で表現することを選択している。 --></p></li>
<li><p>Authority for rendering audit opinions is vested in a small number of firms; the Fortune 500 firms must typically be audited by one of the Big Four audit firms; <!-- firm employees must receive extensive training typically 4–5 years of college education and passage of a CPA certification examination. --> <!-- 監査意見の提出権限は，わずかな数の企業に委任されており，フォーチュン500企業は，通常，ビッグフォー監査法人のいずれかによって監査を受けなければならない。 --> <!-- 企業の従業員は，通常，4～5年の大学教育を受け，CPA資格試験に合格しなければならない。 --></p></li>
<li><p>Audits authoritative strategy for solving its wicked problem offers the advantage of substantially reduced cost and greater efficiency of audits. <!-- 監査の権威主義的な戦略は、監査のコストを大幅に削減し、監査の効率を向上させるという利点がある。 --></p></li>
<li><p>Its disadvantage is that no matter how well educated the auditors are they will not have as much information about IT storage and processing platforms. <!-- financial investment instruments, production operations, international law and so forth as dedicated professionals. --> <!-- その欠点は、監査人がどれだけ教育を受けていても、専門家にはITストレージや処理プラットフォーム、金融投資商品、生産運用、国際法などについての情報が十分にはないということである。 --> <!-- - Information technology along with the automation of audit tasks and decision- making are helping auditors respond to an increasingly complex business environment in the context of their authoritative strategy. --> <!-- 情報技術と監査業務および意思決定の自動化は、監査人が権威主義的戦略の文脈で、ますます複雑化するビジネス環境に対応するのを助けている。 --></p></li>
</ul>
</section>
<section id="final-thoughts-on-planning-and-budgets" class="slide level2">
<h2>Final Thoughts on Planning and Budgets</h2>
<ul>
<li>Planning and budgeting of audits is not an <em>exact science</em>, rather it is contextual, with uncertain outcomes, incomplete and asymmetric information, and ongoing negotiations with the client and between audit offices. <!-- 監査の計画と予算は精密科学ではなく、不確実な結果、不完全で非対称な情報、およびクライアントと監査事務所間の交渉が継続している文脈にある。 --></li>
<li>The judgment and experience of auditors, managers, and the profession are essential to a complete and effective planning process. <!-- 監査人、管理者、および専門家の判断と経験は、完全かつ効果的な計画プロセスに不可欠である。 --> <!-- The prior exposition moves us toward quantification and standardization of the process. --> <!-- - 前述の説明は、プロセスの定量化と標準化に向けて進んでいる。 --> <!-- It offers audit professionals computational and statistical tools to automate tedious, repetitive tasks, while allowing them to focus on critical issues that demand their expertise.  --> <!-- 監査専門家には、退屈で繰り返しの多いタスクを自動化するための計算と統計ツールを提供し、専門知識を要する重要な問題に焦点を当てることができる。 --></li>
<li>Since audit planning will often be highly collaborative, involving professionals in different offices around the world, computational tools to aid in standardizing and objectifying procedures across languages and cultures can be expected to improve efficiency and effectiveness of auditing. <!-- , while insuring against significant deficiencies and miscommunications in audit planning and structure. --> <!-- 監査計画はしばしば高度に協力的なものであり、世界中の異なるオフィスの専門家が関与するため、言語や文化を超えて監査手続を標準化し客観化するための計算ツールは、監査の効率性と有効性を向上させると期待される。 --> <!-- また、監査計画と構造における重大な欠陥や誤解を防ぐことにも寄与する。 --></li>
</ul>
<div class="quarto-auto-generated-content">
<p><img src="img/kobe_logo.png" class="slide-logo"></p>
<div class="footer footer-default">
<p>Kobe University, Business Administration</p>
</div>
</div>
</section></section>

    </div>
  </div>

  <script>window.backupDefine = window.define; window.define = undefined;</script>
  <script src="gaisho_2024_04_files/libs/revealjs/dist/reveal.js"></script>
  <!-- reveal.js plugins -->
  <script src="gaisho_2024_04_files/libs/revealjs/plugin/quarto-line-highlight/line-highlight.js"></script>
  <script src="gaisho_2024_04_files/libs/revealjs/plugin/pdf-export/pdfexport.js"></script>
  <script src="gaisho_2024_04_files/libs/revealjs/plugin/reveal-menu/menu.js"></script>
  <script src="gaisho_2024_04_files/libs/revealjs/plugin/reveal-menu/quarto-menu.js"></script>
  <script src="gaisho_2024_04_files/libs/revealjs/plugin/reveal-chalkboard/plugin.js"></script>
  <script src="gaisho_2024_04_files/libs/revealjs/plugin/quarto-support/support.js"></script>
  

  <script src="gaisho_2024_04_files/libs/revealjs/plugin/notes/notes.js"></script>
  <script src="gaisho_2024_04_files/libs/revealjs/plugin/search/search.js"></script>
  <script src="gaisho_2024_04_files/libs/revealjs/plugin/zoom/zoom.js"></script>
  <script>window.define = window.backupDefine; window.backupDefine = undefined;</script>

  <script>

      // Full list of configuration options available at:
      // https://revealjs.com/config/
      Reveal.initialize({
'controlsAuto': false,
'previewLinksAuto': false,
'pdfSeparateFragments': false,
'autoAnimateEasing': "ease",
'autoAnimateDuration': 1,
'autoAnimateUnmatched': true,
'menu': {"side":"left","useTextContentForMissingTitles":true,"markers":false,"loadIcons":false,"custom":[{"title":"Tools","icon":"<i class=\"fas fa-gear\"></i>","content":"<ul class=\"slide-menu-items\">\n<li class=\"slide-tool-item active\" data-item=\"0\"><a href=\"#\" onclick=\"RevealMenuToolHandlers.fullscreen(event)\"><kbd>f</kbd> Fullscreen</a></li>\n<li class=\"slide-tool-item\" data-item=\"1\"><a href=\"#\" onclick=\"RevealMenuToolHandlers.speakerMode(event)\"><kbd>s</kbd> Speaker View</a></li>\n<li class=\"slide-tool-item\" data-item=\"2\"><a href=\"#\" onclick=\"RevealMenuToolHandlers.overview(event)\"><kbd>o</kbd> Slide Overview</a></li>\n<li class=\"slide-tool-item\" data-item=\"3\"><a href=\"#\" onclick=\"RevealMenuToolHandlers.togglePdfExport(event)\"><kbd>e</kbd> PDF Export Mode</a></li>\n<li class=\"slide-tool-item\" data-item=\"4\"><a href=\"#\" onclick=\"RevealMenuToolHandlers.toggleChalkboard(event)\"><kbd>b</kbd> Toggle Chalkboard</a></li>\n<li class=\"slide-tool-item\" data-item=\"5\"><a href=\"#\" onclick=\"RevealMenuToolHandlers.toggleNotesCanvas(event)\"><kbd>c</kbd> Toggle Notes Canvas</a></li>\n<li class=\"slide-tool-item\" data-item=\"6\"><a href=\"#\" onclick=\"RevealMenuToolHandlers.downloadDrawings(event)\"><kbd>d</kbd> Download Drawings</a></li>\n<li class=\"slide-tool-item\" data-item=\"7\"><a href=\"#\" onclick=\"RevealMenuToolHandlers.keyboardHelp(event)\"><kbd>?</kbd> Keyboard Help</a></li>\n</ul>"}],"openButton":true},
'chalkboard': {"buttons":true},
'smaller': false,
 
        // Display controls in the bottom right corner
        controls: true,

        // Help the user learn the controls by providing hints, for example by
        // bouncing the down arrow when they first encounter a vertical slide
        controlsTutorial: false,

        // Determines where controls appear, "edges" or "bottom-right"
        controlsLayout: 'edges',

        // Visibility rule for backwards navigation arrows; "faded", "hidden"
        // or "visible"
        controlsBackArrows: 'faded',

        // Display a presentation progress bar
        progress: true,

        // Display the page number of the current slide
        slideNumber: 'c/t',

        // 'all', 'print', or 'speaker'
        showSlideNumber: 'all',

        // Add the current slide number to the URL hash so that reloading the
        // page/copying the URL will return you to the same slide
        hash: true,

        // Start with 1 for the hash rather than 0
        hashOneBasedIndex: false,

        // Flags if we should monitor the hash and change slides accordingly
        respondToHashChanges: true,

        // Push each slide change to the browser history
        history: true,

        // Enable keyboard shortcuts for navigation
        keyboard: true,

        // Enable the slide overview mode
        overview: true,

        // Disables the default reveal.js slide layout (scaling and centering)
        // so that you can use custom CSS layout
        disableLayout: false,

        // Vertical centering of slides
        center: false,

        // Enables touch navigation on devices with touch input
        touch: true,

        // Loop the presentation
        loop: false,

        // Change the presentation direction to be RTL
        rtl: false,

        // see https://revealjs.com/vertical-slides/#navigation-mode
        navigationMode: 'linear',

        // Randomizes the order of slides each time the presentation loads
        shuffle: false,

        // Turns fragments on and off globally
        fragments: true,

        // Flags whether to include the current fragment in the URL,
        // so that reloading brings you to the same fragment position
        fragmentInURL: false,

        // Flags if the presentation is running in an embedded mode,
        // i.e. contained within a limited portion of the screen
        embedded: false,

        // Flags if we should show a help overlay when the questionmark
        // key is pressed
        help: true,

        // Flags if it should be possible to pause the presentation (blackout)
        pause: true,

        // Flags if speaker notes should be visible to all viewers
        showNotes: false,

        // Global override for autoplaying embedded media (null/true/false)
        autoPlayMedia: null,

        // Global override for preloading lazy-loaded iframes (null/true/false)
        preloadIframes: null,

        // Number of milliseconds between automatically proceeding to the
        // next slide, disabled when set to 0, this value can be overwritten
        // by using a data-autoslide attribute on your slides
        autoSlide: 0,

        // Stop auto-sliding after user input
        autoSlideStoppable: true,

        // Use this method for navigation when auto-sliding
        autoSlideMethod: null,

        // Specify the average time in seconds that you think you will spend
        // presenting each slide. This is used to show a pacing timer in the
        // speaker view
        defaultTiming: null,

        // Enable slide navigation via mouse wheel
        mouseWheel: false,

        // The display mode that will be used to show slides
        display: 'block',

        // Hide cursor if inactive
        hideInactiveCursor: true,

        // Time before the cursor is hidden (in ms)
        hideCursorTime: 5000,

        // Opens links in an iframe preview overlay
        previewLinks: false,

        // Transition style (none/fade/slide/convex/concave/zoom)
        transition: 'convex',

        // Transition speed (default/fast/slow)
        transitionSpeed: 'default',

        // Transition style for full page slide backgrounds
        // (none/fade/slide/convex/concave/zoom)
        backgroundTransition: 'none',

        // Number of slides away from the current that are visible
        viewDistance: 3,

        // Number of slides away from the current that are visible on mobile
        // devices. It is advisable to set this to a lower number than
        // viewDistance in order to save resources.
        mobileViewDistance: 2,

        // The "normal" size of the presentation, aspect ratio will be preserved
        // when the presentation is scaled to fit different resolutions. Can be
        // specified using percentage units.
        width: 1400,

        height: 700,

        // Factor of the display size that should remain empty around the content
        margin: 0.1,

        // reveal.js plugins
        plugins: [QuartoLineHighlight, PdfExport, RevealMenu, RevealChalkboard, QuartoSupport,

          RevealNotes,
          RevealSearch,
          RevealZoom
        ]
      });
    </script>
    
    <script>
      // htmlwidgets need to know to resize themselves when slides are shown/hidden.
      // Fire the "slideenter" event (handled by htmlwidgets.js) when the current
      // slide changes (different for each slide format).
      (function () {
        // dispatch for htmlwidgets
        function fireSlideEnter() {
          const event = window.document.createEvent("Event");
          event.initEvent("slideenter", true, true);
          window.document.dispatchEvent(event);
        }

        function fireSlideChanged(previousSlide, currentSlide) {
          fireSlideEnter();

          // dispatch for shiny
          if (window.jQuery) {
            if (previousSlide) {
              window.jQuery(previousSlide).trigger("hidden");
            }
            if (currentSlide) {
              window.jQuery(currentSlide).trigger("shown");
            }
          }
        }

        // hookup for slidy
        if (window.w3c_slidy) {
          window.w3c_slidy.add_observer(function (slide_num) {
            // slide_num starts at position 1
            fireSlideChanged(null, w3c_slidy.slides[slide_num - 1]);
          });
        }

      })();
    </script>

    <script id="quarto-html-after-body" type="application/javascript">
    window.document.addEventListener("DOMContentLoaded", function (event) {
      const toggleBodyColorMode = (bsSheetEl) => {
        const mode = bsSheetEl.getAttribute("data-mode");
        const bodyEl = window.document.querySelector("body");
        if (mode === "dark") {
          bodyEl.classList.add("quarto-dark");
          bodyEl.classList.remove("quarto-light");
        } else {
          bodyEl.classList.add("quarto-light");
          bodyEl.classList.remove("quarto-dark");
        }
      }
      const toggleBodyColorPrimary = () => {
        const bsSheetEl = window.document.querySelector("link#quarto-bootstrap");
        if (bsSheetEl) {
          toggleBodyColorMode(bsSheetEl);
        }
      }
      toggleBodyColorPrimary();  
      const tabsets =  window.document.querySelectorAll(".panel-tabset-tabby")
      tabsets.forEach(function(tabset) {
        const tabby = new Tabby('#' + tabset.id);
      });
      const isCodeAnnotation = (el) => {
        for (const clz of el.classList) {
          if (clz.startsWith('code-annotation-')) {                     
            return true;
          }
        }
        return false;
      }
      const onCopySuccess = function(e) {
        // button target
        const button = e.trigger;
        // don't keep focus
        button.blur();
        // flash "checked"
        button.classList.add('code-copy-button-checked');
        var currentTitle = button.getAttribute("title");
        button.setAttribute("title", "コピーしました");
        let tooltip;
        if (window.bootstrap) {
          button.setAttribute("data-bs-toggle", "tooltip");
          button.setAttribute("data-bs-placement", "left");
          button.setAttribute("data-bs-title", "コピーしました");
          tooltip = new bootstrap.Tooltip(button, 
            { trigger: "manual", 
              customClass: "code-copy-button-tooltip",
              offset: [0, -8]});
          tooltip.show();    
        }
        setTimeout(function() {
          if (tooltip) {
            tooltip.hide();
            button.removeAttribute("data-bs-title");
            button.removeAttribute("data-bs-toggle");
            button.removeAttribute("data-bs-placement");
          }
          button.setAttribute("title", currentTitle);
          button.classList.remove('code-copy-button-checked');
        }, 1000);
        // clear code selection
        e.clearSelection();
      }
      const getTextToCopy = function(trigger) {
          const codeEl = trigger.previousElementSibling.cloneNode(true);
          for (const childEl of codeEl.children) {
            if (isCodeAnnotation(childEl)) {
              childEl.remove();
            }
          }
          return codeEl.innerText;
      }
      const clipboard = new window.ClipboardJS('.code-copy-button:not([data-in-quarto-modal])', {
        text: getTextToCopy
      });
      clipboard.on('success', onCopySuccess);
      if (window.document.getElementById('quarto-embedded-source-code-modal')) {
        // For code content inside modals, clipBoardJS needs to be initialized with a container option
        // TODO: Check when it could be a function (https://github.com/zenorocha/clipboard.js/issues/860)
        const clipboardModal = new window.ClipboardJS('.code-copy-button[data-in-quarto-modal]', {
          text: getTextToCopy,
          container: window.document.getElementById('quarto-embedded-source-code-modal')
        });
        clipboardModal.on('success', onCopySuccess);
      }
        var localhostRegex = new RegExp(/^(?:http|https):\/\/localhost\:?[0-9]*\//);
        var mailtoRegex = new RegExp(/^mailto:/);
          var filterRegex = new RegExp('/' + window.location.host + '/');
        var isInternal = (href) => {
            return filterRegex.test(href) || localhostRegex.test(href) || mailtoRegex.test(href);
        }
        // Inspect non-navigation links and adorn them if external
     	var links = window.document.querySelectorAll('a[href]:not(.nav-link):not(.navbar-brand):not(.toc-action):not(.sidebar-link):not(.sidebar-item-toggle):not(.pagination-link):not(.no-external):not([aria-hidden]):not(.dropdown-item):not(.quarto-navigation-tool):not(.about-link)');
        for (var i=0; i<links.length; i++) {
          const link = links[i];
          if (!isInternal(link.href)) {
            // undo the damage that might have been done by quarto-nav.js in the case of
            // links that we want to consider external
            if (link.dataset.originalHref !== undefined) {
              link.href = link.dataset.originalHref;
            }
          }
        }
      function tippyHover(el, contentFn, onTriggerFn, onUntriggerFn) {
        const config = {
          allowHTML: true,
          maxWidth: 500,
          delay: 100,
          arrow: false,
          appendTo: function(el) {
              return el.closest('section.slide') || el.parentElement;
          },
          interactive: true,
          interactiveBorder: 10,
          theme: 'light-border',
          placement: 'bottom-start',
        };
        if (contentFn) {
          config.content = contentFn;
        }
        if (onTriggerFn) {
          config.onTrigger = onTriggerFn;
        }
        if (onUntriggerFn) {
          config.onUntrigger = onUntriggerFn;
        }
          config['offset'] = [0,0];
          config['maxWidth'] = 700;
        window.tippy(el, config); 
      }
      const noterefs = window.document.querySelectorAll('a[role="doc-noteref"]');
      for (var i=0; i<noterefs.length; i++) {
        const ref = noterefs[i];
        tippyHover(ref, function() {
          // use id or data attribute instead here
          let href = ref.getAttribute('data-footnote-href') || ref.getAttribute('href');
          try { href = new URL(href).hash; } catch {}
          const id = href.replace(/^#\/?/, "");
          const note = window.document.getElementById(id);
          if (note) {
            return note.innerHTML;
          } else {
            return "";
          }
        });
      }
      const findCites = (el) => {
        const parentEl = el.parentElement;
        if (parentEl) {
          const cites = parentEl.dataset.cites;
          if (cites) {
            return {
              el,
              cites: cites.split(' ')
            };
          } else {
            return findCites(el.parentElement)
          }
        } else {
          return undefined;
        }
      };
      var bibliorefs = window.document.querySelectorAll('a[role="doc-biblioref"]');
      for (var i=0; i<bibliorefs.length; i++) {
        const ref = bibliorefs[i];
        const citeInfo = findCites(ref);
        if (citeInfo) {
          tippyHover(citeInfo.el, function() {
            var popup = window.document.createElement('div');
            citeInfo.cites.forEach(function(cite) {
              var citeDiv = window.document.createElement('div');
              citeDiv.classList.add('hanging-indent');
              citeDiv.classList.add('csl-entry');
              var biblioDiv = window.document.getElementById('ref-' + cite);
              if (biblioDiv) {
                citeDiv.innerHTML = biblioDiv.innerHTML;
              }
              popup.appendChild(citeDiv);
            });
            return popup.innerHTML;
          });
        }
      }
    });
    </script>
    

</body></html>