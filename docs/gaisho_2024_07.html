<!DOCTYPE html>
<html lang="ja"><head>
<script src="gaisho_2024_07_files/libs/clipboard/clipboard.min.js"></script>
<script src="gaisho_2024_07_files/libs/quarto-html/tabby.min.js"></script>
<script src="gaisho_2024_07_files/libs/quarto-html/popper.min.js"></script>
<script src="gaisho_2024_07_files/libs/quarto-html/tippy.umd.min.js"></script>
<link href="gaisho_2024_07_files/libs/quarto-html/tippy.css" rel="stylesheet">
<link href="gaisho_2024_07_files/libs/quarto-html/light-border.css" rel="stylesheet">
<link href="gaisho_2024_07_files/libs/quarto-html/quarto-syntax-highlighting-2486e1f0a3ee9ee1fc393803a1361cdb.css" rel="stylesheet" id="quarto-text-highlighting-styles"><meta charset="utf-8">
  <meta name="generator" content="quarto-1.6.32">

  <meta name="author" content="Soichi Matsuura">
  <meta name="dcterms.date" content="2024-11-20">
  <title>外国書購読 Day7   Chapter 6.   Analytical Review: Intelligence Scanning </title>
  <meta name="apple-mobile-web-app-capable" content="yes">
  <meta name="apple-mobile-web-app-status-bar-style" content="black-translucent">
  <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no, minimal-ui">
  <link rel="stylesheet" href="gaisho_2024_07_files/libs/revealjs/dist/reset.css">
  <link rel="stylesheet" href="gaisho_2024_07_files/libs/revealjs/dist/reveal.css">
  <style>
    code{white-space: pre-wrap;}
    span.smallcaps{font-variant: small-caps;}
    div.columns{display: flex; gap: min(4vw, 1.5em);}
    div.column{flex: auto; overflow-x: auto;}
    div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
    ul.task-list{list-style: none;}
    ul.task-list li input[type="checkbox"] {
      width: 0.8em;
      margin: 0 0.8em 0.2em -1em; /* quarto-specific, see https://github.com/quarto-dev/quarto-cli/issues/4556 */ 
      vertical-align: middle;
    }
    /* CSS for syntax highlighting */
    pre > code.sourceCode { white-space: pre; position: relative; }
    pre > code.sourceCode > span { line-height: 1.25; }
    pre > code.sourceCode > span:empty { height: 1.2em; }
    .sourceCode { overflow: visible; }
    code.sourceCode > span { color: inherit; text-decoration: inherit; }
    div.sourceCode { margin: 1em 0; }
    pre.sourceCode { margin: 0; }
    @media screen {
    div.sourceCode { overflow: auto; }
    }
    @media print {
    pre > code.sourceCode { white-space: pre-wrap; }
    pre > code.sourceCode > span { display: inline-block; text-indent: -5em; padding-left: 5em; }
    }
    pre.numberSource code
      { counter-reset: source-line 0; }
    pre.numberSource code > span
      { position: relative; left: -4em; counter-increment: source-line; }
    pre.numberSource code > span > a:first-child::before
      { content: counter(source-line);
        position: relative; left: -1em; text-align: right; vertical-align: baseline;
        border: none; display: inline-block;
        -webkit-touch-callout: none; -webkit-user-select: none;
        -khtml-user-select: none; -moz-user-select: none;
        -ms-user-select: none; user-select: none;
        padding: 0 4px; width: 4em;
        color: #aaaaaa;
      }
    pre.numberSource { margin-left: 3em; border-left: 1px solid #aaaaaa;  padding-left: 4px; }
    div.sourceCode
      { color: #003b4f; background-color: #f1f3f5; }
    @media screen {
    pre > code.sourceCode > span > a:first-child::before { text-decoration: underline; }
    }
    code span { color: #003b4f; } /* Normal */
    code span.al { color: #ad0000; } /* Alert */
    code span.an { color: #5e5e5e; } /* Annotation */
    code span.at { color: #657422; } /* Attribute */
    code span.bn { color: #ad0000; } /* BaseN */
    code span.bu { } /* BuiltIn */
    code span.cf { color: #003b4f; font-weight: bold; } /* ControlFlow */
    code span.ch { color: #20794d; } /* Char */
    code span.cn { color: #8f5902; } /* Constant */
    code span.co { color: #5e5e5e; } /* Comment */
    code span.cv { color: #5e5e5e; font-style: italic; } /* CommentVar */
    code span.do { color: #5e5e5e; font-style: italic; } /* Documentation */
    code span.dt { color: #ad0000; } /* DataType */
    code span.dv { color: #ad0000; } /* DecVal */
    code span.er { color: #ad0000; } /* Error */
    code span.ex { } /* Extension */
    code span.fl { color: #ad0000; } /* Float */
    code span.fu { color: #4758ab; } /* Function */
    code span.im { color: #00769e; } /* Import */
    code span.in { color: #5e5e5e; } /* Information */
    code span.kw { color: #003b4f; font-weight: bold; } /* Keyword */
    code span.op { color: #5e5e5e; } /* Operator */
    code span.ot { color: #003b4f; } /* Other */
    code span.pp { color: #ad0000; } /* Preprocessor */
    code span.sc { color: #5e5e5e; } /* SpecialChar */
    code span.ss { color: #20794d; } /* SpecialString */
    code span.st { color: #20794d; } /* String */
    code span.va { color: #111111; } /* Variable */
    code span.vs { color: #20794d; } /* VerbatimString */
    code span.wa { color: #5e5e5e; font-style: italic; } /* Warning */
  </style>
  <link rel="stylesheet" href="gaisho_2024_07_files/libs/revealjs/dist/theme/quarto-c3f8326322c1af3e281abcb81ab64f0a.css">
  <link rel="stylesheet" href="mystyle.css">
  <script>window.backupDefine = window.define; window.define = undefined;</script><script src="https://cdn.jsdelivr.net/npm/katex@latest/dist/katex.min.js"></script>
  <script>document.addEventListener("DOMContentLoaded", function () {
 var mathElements = document.getElementsByClassName("math");
 var macros = [];
 for (var i = 0; i < mathElements.length; i++) {
  var texText = mathElements[i].firstChild;
  if (mathElements[i].tagName == "SPAN") {
   katex.render(texText.data, mathElements[i], {
    displayMode: mathElements[i].classList.contains('display'),
    throwOnError: false,
    macros: macros,
    fleqn: false
   });
}}});
  </script>
  <script>window.define = window.backupDefine; window.backupDefine = undefined;</script><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/katex@latest/dist/katex.min.css">
  <link href="gaisho_2024_07_files/libs/revealjs/plugin/quarto-line-highlight/line-highlight.css" rel="stylesheet">
  <link href="gaisho_2024_07_files/libs/revealjs/plugin/reveal-menu/menu.css" rel="stylesheet">
  <link href="gaisho_2024_07_files/libs/revealjs/plugin/reveal-menu/quarto-menu.css" rel="stylesheet">
  <link href="gaisho_2024_07_files/libs/revealjs/plugin/reveal-chalkboard/font-awesome/css/all.css" rel="stylesheet">
  <link href="gaisho_2024_07_files/libs/revealjs/plugin/reveal-chalkboard/style.css" rel="stylesheet">
  <link href="gaisho_2024_07_files/libs/revealjs/plugin/quarto-support/footer.css" rel="stylesheet">
  <style type="text/css">

  .callout {
    margin-top: 1em;
    margin-bottom: 1em;  
    border-radius: .25rem;
  }

  .callout.callout-style-simple { 
    padding: 0em 0.5em;
    border-left: solid #acacac .3rem;
    border-right: solid 1px silver;
    border-top: solid 1px silver;
    border-bottom: solid 1px silver;
    display: flex;
  }

  .callout.callout-style-default {
    border-left: solid #acacac .3rem;
    border-right: solid 1px silver;
    border-top: solid 1px silver;
    border-bottom: solid 1px silver;
  }

  .callout .callout-body-container {
    flex-grow: 1;
  }

  .callout.callout-style-simple .callout-body {
    font-size: 1rem;
    font-weight: 400;
  }

  .callout.callout-style-default .callout-body {
    font-size: 0.9rem;
    font-weight: 400;
  }

  .callout.callout-titled.callout-style-simple .callout-body {
    margin-top: 0.2em;
  }

  .callout:not(.callout-titled) .callout-body {
      display: flex;
  }

  .callout:not(.no-icon).callout-titled.callout-style-simple .callout-content {
    padding-left: 1.6em;
  }

  .callout.callout-titled .callout-header {
    padding-top: 0.2em;
    margin-bottom: -0.2em;
  }

  .callout.callout-titled .callout-title  p {
    margin-top: 0.5em;
    margin-bottom: 0.5em;
  }
    
  .callout.callout-titled.callout-style-simple .callout-content  p {
    margin-top: 0;
  }

  .callout.callout-titled.callout-style-default .callout-content  p {
    margin-top: 0.7em;
  }

  .callout.callout-style-simple div.callout-title {
    border-bottom: none;
    font-size: .9rem;
    font-weight: 600;
    opacity: 75%;
  }

  .callout.callout-style-default  div.callout-title {
    border-bottom: none;
    font-weight: 600;
    opacity: 85%;
    font-size: 0.9rem;
    padding-left: 0.5em;
    padding-right: 0.5em;
  }

  .callout.callout-style-default div.callout-content {
    padding-left: 0.5em;
    padding-right: 0.5em;
  }

  .callout.callout-style-simple .callout-icon::before {
    height: 1rem;
    width: 1rem;
    display: inline-block;
    content: "";
    background-repeat: no-repeat;
    background-size: 1rem 1rem;
  }

  .callout.callout-style-default .callout-icon::before {
    height: 0.9rem;
    width: 0.9rem;
    display: inline-block;
    content: "";
    background-repeat: no-repeat;
    background-size: 0.9rem 0.9rem;
  }

  .callout-title {
    display: flex
  }
    
  .callout-icon::before {
    margin-top: 1rem;
    padding-right: .5rem;
  }

  .callout.no-icon::before {
    display: none !important;
  }

  .callout.callout-titled .callout-body > .callout-content > :last-child {
    padding-bottom: 0.5rem;
    margin-bottom: 0;
  }

  .callout.callout-titled .callout-icon::before {
    margin-top: .5rem;
    padding-right: .5rem;
  }

  .callout:not(.callout-titled) .callout-icon::before {
    margin-top: 1rem;
    padding-right: .5rem;
  }

  /* Callout Types */

  div.callout-note {
    border-left-color: #4582ec !important;
  }

  div.callout-note .callout-icon::before {
    background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAAgCAYAAABzenr0AAAAAXNSR0IArs4c6QAAAERlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAA6ABAAMAAAABAAEAAKACAAQAAAABAAAAIKADAAQAAAABAAAAIAAAAACshmLzAAAEU0lEQVRYCcVXTWhcVRQ+586kSUMMxkyaElstCto2SIhitS5Ek8xUKV2poatCcVHtUlFQk8mbaaziwpWgglJwVaquitBOfhQXFlqlzSJpFSpIYyXNjBNiTCck7x2/8/LeNDOZxDuEkgOXe++553zfefee+/OYLOXFk3+1LLrRdiO81yNqZ6K9cG0P3MeFaMIQjXssE8Z1JzLO9ls20MBZX7oG8w9GxB0goaPrW5aNMp1yOZIa7Wv6o2ykpLtmAPs/vrG14Z+6d4jpbSKuhdcSyq9wGMPXjonwmESXrriLzFGOdDBLB8Y6MNYBu0dRokSygMA/mrun8MGFN3behm6VVAwg4WR3i6FvYK1T7MHo9BK7ydH+1uurECoouk5MPRyVSBrBHMYwVobG2aOXM07sWrn5qgB60rc6mcwIDJtQrnrEr44kmy+UO9r0u9O5/YbkS9juQckLed3DyW2XV/qWBBB3ptvI8EUY3I9p/67OW+g967TNr3Sotn3IuVlfMLVnsBwH4fsnebJvyGm5GeIUA3jljERmrv49SizPYuq+z7c2H/jlGC+Ghhupn/hcapqmcudB9jwJ/3jvnvu6vu5lVzF1fXyZuZZ7U8nRmVzytvT+H3kilYvH09mLWrQdwFSsFEsxFVs5fK7A0g8gMZjbif4ACpKbjv7gNGaD8bUrlk8x+KRflttr22JEMRUbTUwwDQScyzPgedQHZT0xnx7ujw2jfVfExwYHwOsDTjLdJ2ebmeQIlJ7neo41s/DrsL3kl+W2lWvAga0tR3zueGr6GL78M3ifH0rGXrBC2aAR8uYcIA5gwV8zIE8onoh8u0Fca/ciF7j1uOzEnqcIm59sEXoGc0+z6+H45V1CvAvHcD7THztu669cnp+L0okAeIc6zjbM/24LgGM1gZk7jnRu1aQWoU9sfUOuhrmtaPIO3YY1KLLWZaEO5TKUbMY5zx8W9UJ6elpLwKXbsaZ4EFl7B4bMtDv0iRipKoDQT2sNQI9b1utXFdYisi+wzZ/ri/1m7QfDgEuvgUUEIJPq3DhX/5DWNqIXDOweC2wvIR90Oq3lDpdMIgD2r0dXvGdsEW5H6x6HLRJYU7C69VefO1x8Gde1ZFSJLfWS1jbCnhtOPxmpfv2LXOA2Xk2tvnwKKPFuZ/oRmwBwqRQDcKNeVQkYcOjtWVBuM/JuYw5b6isojIkYxyYAFn5K7ZBF10fea52y8QltAg6jnMqNHFBmGkQ1j+U43HMi2xMar1Nv0zGsf1s8nUsmUtPOOrbFIR8bHFDMB5zL13Gmr/kGlCkUzedTzzmzsaJXhYawnA3UmARpiYj5ooJZiUoxFRtK3X6pgNPv+IZVPcnwbOl6f+aBaO1CNvPW9n9LmCp01nuSaTRF2YxHqZ8DYQT6WsXT+RD6eUztwYLZ8rM+rcPxamv1VQzFUkzFXvkiVrySGQgJNvXHJAxiU3/NwiC03rSf05VBaPtu/Z7/B8Yn/w7eguloAAAAAElFTkSuQmCC');
  }

  div.callout-note.callout-style-default .callout-title {
    background-color: #dae6fb
  }

  div.callout-important {
    border-left-color: #d9534f !important;
  }

  div.callout-important .callout-icon::before {
    background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAAgCAYAAABzenr0AAAAAXNSR0IArs4c6QAAAERlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAA6ABAAMAAAABAAEAAKACAAQAAAABAAAAIKADAAQAAAABAAAAIAAAAACshmLzAAAEKklEQVRYCcVXTWhcVRS+575MJym48A+hSRFr00ySRQhURRfd2HYjk2SSTokuBCkU2o0LoSKKraKIBTcuFCoidGFD08nkBzdREbpQ1EDNIv8qSGMFUboImMSZd4/f9zJv8ibJMC8xJQfO3HPPPef7zrvvvnvviIkpC9nsw0UttFunbUhpFzFtarSd6WJkStVMw5xyVqYTvkwfzuf/5FgtkVoB0729j1rjXwThS7Vio+Mo6DNnvLfahoZ+i/o32lULuJ3NNiz7q6+pyAUkJaFF6JwaM2lUJlV0MlnQn5aTRbEu0SEqHUa0A4AdiGuB1kFXRfVyg5d87+Dg4DL6m2TLAub60ilj7A1Ec4odSAc8X95sHh7+ZRPCFo6Fnp7HfU/fBng/hi10CjCnWnJjsxvDNxWw0NfV6Rv5GgP3I3jGWXumdTD/3cbEOP2ZbOZp69yniG3FQ9z1jD7bnBu9Fc2tKGC2q+uAJOQHBDRiZX1x36o7fWBs7J9ownbtO+n0/qWkvW7UPIfc37WgT6ZGR++EOJyeQDSb9UB+DZ1G6DdLDzyS+b/kBCYGsYgJbSQHuThGKRcw5xdeQf8YdNHsc6ePXrlSYMBuSIAFTGAtQo+VuALo4BX83N190NWZWbynBjhOHsmNfFWLeL6v+ynsA58zDvvAC8j5PkbOcXCMg2PZFk3q8MjI7WAG/Dp9AwP7jdGBOOQkAvlFUB+irtm16I1Zw9YBcpGTGXYmk3kQIC/Cds55l+iMI3jqhjAuaoe+am2Jw5GT3Nbz3CkE12NavmzN5+erJW7046n/CH1RO/RVa8lBLozXk9uqykkGAyRXLWlLv5jyp4RFsG5vGVzpDLnIjTWgnRy2Rr+tDKvRc7Y8AyZq10jj8DqXdnIRNtFZb+t/ZRtXcDiVnzpqx8mPcDWxgARUqx0W1QB9MeUZiNrV4qP+Ehc+BpNgATsTX8ozYKL2NtFYAHc84fG7ndxUPr+AR/iQSns7uSUufAymwDOb2+NjK27lEFocm/EE2WpyIy/Hi66MWuMKJn8RvxIcj87IM5Vh9663ziW36kR0HNenXuxmfaD8JC7tfKbrhFr7LiZCrMjrzTeGx+PmkosrkNzW94ObzwocJ7A1HokLolY+AvkTiD/q1H0cN48c5EL8Crkttsa/AXQVDmutfyku0E7jShx49XqV3MFK8IryDhYVbj7Sj2P2eBxwcXoe8T8idsKKPRcnZw1b+slFTubwUwhktrfnAt7J++jwQtLZcm3sr9LQrjRzz6cfMv9aLvgmnAGvpoaGLxM4mAEaLV7iAzQ3oU0IvD5x9ix3yF2RAAuYAOO2f7PEFWCXZ4C9Pb2UsgDeVnFSpbFK7/IWu7TPTvBqzbGdCHOJQSxiEjt6IyZmxQyEJHv6xyQsYk//moVFsN2zP6fRImjfq7/n/wFDguUQFNEwugAAAABJRU5ErkJggg==');
  }

  div.callout-important.callout-style-default .callout-title {
    background-color: #f7dddc
  }

  div.callout-warning {
    border-left-color: #f0ad4e !important;
  }

  div.callout-warning .callout-icon::before {
    background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAAgCAYAAABzenr0AAAAAXNSR0IArs4c6QAAAERlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAA6ABAAMAAAABAAEAAKACAAQAAAABAAAAIKADAAQAAAABAAAAIAAAAACshmLzAAAETklEQVRYCeVWW2gcVRg+58yaTUnizqbipZeX4uWhBEniBaoUX1Ioze52t7sRq6APio9V9MEaoWlVsFasRq0gltaAPuxms8lu0gcviE/FFOstVbSIxgcv6SU7EZqmdc7v9+9mJtNks51NTUH84ed889/PP+cmxP+d5FIbMJmNbpREu4WUkiTtCicKny0l1pIKmBzovF2S+hIJHX8iEu3hZJ5lNZGqyRrGSIQpq15AzF28jgpeY6yk6GVdrfFqdrD6Iw+QlB8g0YS2g7dyQmXM/IDhBhT0UCiRf59lfqmmDvzRt6kByV/m4JjtzuaujMUM2c5Z2d6JdKrRb3K2q6mA+oYVz8JnDdKPmmNthzkAk/lN63sYPgevrguc72aZX/L9C6x09GYyxBgCX4NlvyGUHOKELlm5rXeR1kchuChJt4SSwyddZRXgvwMGvYo4QSlk3/zkHD8UHxwVJA6zjZZqP8v8kK8OWLnIZtLyCAJagYC4rTGW/9Pqj92N/c+LUaAj27movwbi19tk/whRCIE7Q9vyI6yvRpftAKVTdUjOW40X3h5OXsKCdmFcx0xlLJoSuQngnrJe7Kcjm4OMq9FlC7CMmScQANuNvjfP3PjGXDBaUQmbp296S5L4DrpbrHN1T87ZVEZVCzg1FF0Ft+dKrlLukI+/c9ENo+TvlTDbYFvuKPtQ9+l052rXrgKoWkDAFnvh0wTOmYn8R5f4k/jN/fZiCM1tQx9jQQ4ANhqG4hiL0qIFTGViG9DKB7GYzgubnpofgYRwO+DFjh0Zin2m4b/97EDkXkc+f6xYAPX0KK2I/7fUQuwzuwo/L3AkcjugPNixC8cHf0FyPjWlItmLxWw4Ou9YsQCr5fijMGoD/zpdRy95HRysyXA74MWOnscpO4j2y3HAVisw85hX5+AFBRSHt4ShfLFkIMXTqyKFc46xdzQM6XbAi702a7sy04J0+feReMFKp5q9esYLCqAZYw/k14E/xcLLsFElaornTuJB0svMuJINy8xkIYuL+xPAlWRceH6+HX7THJ0djLUom46zREu7tTkxwmf/FdOZ/sh6Q8qvEAiHpm4PJ4a/doJe0gH1t+aHRgCzOvBvJedEK5OFE5jpm4AGP2a8Dxe3gGJ/pAutug9Gp6he92CsSsWBaEcxGx0FHytmIpuqGkOpldqNYQK8cSoXvd+xLxXADw0kf6UkJNFtdo5MOgaLjiQOQHcn+A6h5NuL2s0qsC2LOM75PcF3yr5STuBSAcGG+meA14K/CI21HcS4LBT6tv0QAh8Dr5l93AhZzG5ZJ4VxAqdZUEl9z7WJ4aN+svMvwHHL21UKTd1mqvChH7/Za5xzXBBKrUcB0TQ+Ulgkfbi/H/YT5EptrGzsEK7tR1B7ln9BBwckYfMiuSqklSznIuoIIOM42MQO+QnduCoFCI0bpkzjCjddHPN/F+2Yu+sd9bKNpVwHhbS3LluK/0zgfwD0xYI5dXuzlQAAAABJRU5ErkJggg==');
  }

  div.callout-warning.callout-style-default .callout-title {
    background-color: #fcefdc
  }

  div.callout-tip {
    border-left-color: #02b875 !important;
  }

  div.callout-tip .callout-icon::before {
    background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAAgCAYAAABzenr0AAAAAXNSR0IArs4c6QAAAERlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAA6ABAAMAAAABAAEAAKACAAQAAAABAAAAIKADAAQAAAABAAAAIAAAAACshmLzAAADr0lEQVRYCe1XTWgTQRj9ZjZV8a9SPIkKgj8I1bMHsUWrqYLVg4Ue6v9BwZOxSYsIerFao7UiUryIqJcqgtpimhbBXoSCVxUFe9CTiogUrUp2Pt+3aUI2u5vdNh4dmMzOzHvvezuz8xNFM0mjnbXaNu1MvFWRXkXEyE6aYOYJpdW4IXuA4r0fo8qqSMDBU0v1HJUgVieAXxzCsdE/YJTdFcVIZQNMyhruOMJKXYFoLfIfIvVIMWdsrd+Rpd86ZmyzzjJmLStqRn0v8lzkb4rVIXvnpScOJuAn2ACC65FkPzEdEy4TPWRLJ2h7z4cArXzzaOdKlbOvKKX25Wl00jSnrwVxAg3o4dRxhO13RBSdNvH0xSARv3adTXbBdTf64IWO2vH0LT+cv4GR1DJt+DUItaQogeBX/chhbTBxEiZ6gftlDNXTrvT7co4ub5A6gp9HIcHvzTa46OS5fBeP87Qm0fQkr4FsYgVQ7Qg+ZayaDg9jhg1GkWj8RG6lkeSacrrHgDaxdoBiZPg+NXV/KifMuB6//JmYH4CntVEHy/keA6x4h4CU5oFy8GzrBS18cLJMXcljAKB6INjWsRcuZBWVaS3GDrqB7rdapVIeA+isQ57Eev9eCqzqOa81CY05VLd6SamW2wA2H3SiTbnbSxmzfp7WtKZkqy4mdyAlGx7ennghYf8voqp9cLSgKdqNfa6RdRsAAkPwRuJZNbpByn+RrJi1RXTwdi8RQF6ymDwGMAtZ6TVE+4uoKh+MYkcLsT0Hk8eAienbiGdjJHZTpmNjlbFJNKDVAp2fJlYju6IreQxQ08UJDNYdoLSl6AadO+fFuCQqVMB1NJwPm69T04Wv5WhfcWyfXQB+wXRs1pt+nCknRa0LVzSA/2B+a9+zQJadb7IyyV24YAxKp2Jqs3emZTuNnKxsah+uabKbMk7CbTgJx/zIgQYErIeTKRQ9yD9wxVof5YolPHqaWo7TD6tJlh7jQnK5z2n3+fGdggIOx2kaa2YI9QWarc5Ce1ipNWMKeSG4DysFF52KBmTNMmn5HqCFkwy34rDg05gDwgH3bBi+sgFhN/e8QvRn8kbamCOhgrZ9GJhFDgfcMHzFb6BAtjKpFhzTjwv1KCVuxHvCbsSiEz4CANnj84cwHdFXAbAOJ4LTSAawGWFn5tDhLMYz6nWeU2wJfIhmIJBefcd/A5FWQWGgrWzyORZ3Q6HuV+Jf0Bj+BTX69fm1zWgK7By1YTXchFDORywnfQ7GpzOo6S+qECrsx2ifVQAAAABJRU5ErkJggg==');
  }

  div.callout-tip.callout-style-default .callout-title {
    background-color: #ccf1e3
  }

  div.callout-caution {
    border-left-color: #fd7e14 !important;
  }

  div.callout-caution .callout-icon::before {
    background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAAgCAYAAABzenr0AAAAAXNSR0IArs4c6QAAAERlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAA6ABAAMAAAABAAEAAKACAAQAAAABAAAAIKADAAQAAAABAAAAIAAAAACshmLzAAACV0lEQVRYCdVWzWoUQRCuqp2ICBLJXgITZL1EfQDBW/bkzUMUD7klD+ATSHBEfAIfQO+iXsWDxJsHL96EHAwhgzlkg8nBg25XWb0zIb0zs9muYYWkoKeru+vn664fBqElyZNuyh167NXJ8Ut8McjbmEraKHkd7uAnAFku+VWdb3reSmRV8PKSLfZ0Gjn3a6Xlcq9YGb6tADjn+lUfTXtVmaZ1KwBIvFI11rRXlWlatwIAAv2asaa9mlB9wwygiDX26qaw1yYPzFXg2N1GgG0FMF8Oj+VIx7E/03lHx8UhvYyNZLN7BwSPgekXXLribw7w5/c8EF+DBK5idvDVYtEEwMeYefjjLAdEyQ3M9nfOkgnPTEkYU+sxMq0BxNR6jExrAI31H1rzvLEfRIdgcv1XEdj6QTQAS2wtstEALLG1yEZ3QhH6oDX7ExBSFEkFINXH98NTrme5IOaaA7kIfiu2L8A3qhH9zRbukdCqdsA98TdElyeMe5BI8Rs2xHRIsoTSSVFfCFCWGPn9XHb4cdobRIWABNf0add9jakDjQJpJ1bTXOJXnnRXHRf+dNL1ZV1MBRCXhMbaHqGI1JkKIL7+i8uffuP6wVQAzO7+qVEbF6NbS0LJureYcWXUUhH66nLR5rYmva+2tjRFtojkM2aD76HEGAD3tPtKM309FJg5j/K682ywcWJ3PASCcycH/22u+Bh7Aa0ehM2Fu4z0SAE81HF9RkB21c5bEn4Dzw+/qNOyXr3DCTQDMBOdhi4nAgiFDGCinIa2owCEChUwD8qzd03PG+qdW/4fDzjUMcE1ZpIAAAAASUVORK5CYII=');
  }

  div.callout-caution.callout-style-default .callout-title {
    background-color: #ffe5d0
  }

  </style>
  <style type="text/css">
    .reveal div.sourceCode {
      margin: 0;
      overflow: auto;
    }
    .reveal div.hanging-indent {
      margin-left: 1em;
      text-indent: -1em;
    }
    .reveal .slide:not(.center) {
      height: 100%;
    }
    .reveal .slide.scrollable {
      overflow-y: auto;
    }
    .reveal .footnotes {
      height: 100%;
      overflow-y: auto;
    }
    .reveal .slide .absolute {
      position: absolute;
      display: block;
    }
    .reveal .footnotes ol {
      counter-reset: ol;
      list-style-type: none; 
      margin-left: 0;
    }
    .reveal .footnotes ol li:before {
      counter-increment: ol;
      content: counter(ol) ". "; 
    }
    .reveal .footnotes ol li > p:first-child {
      display: inline-block;
    }
    .reveal .slide ul,
    .reveal .slide ol {
      margin-bottom: 0.5em;
    }
    .reveal .slide ul li,
    .reveal .slide ol li {
      margin-top: 0.4em;
      margin-bottom: 0.2em;
    }
    .reveal .slide ul[role="tablist"] li {
      margin-bottom: 0;
    }
    .reveal .slide ul li > *:first-child,
    .reveal .slide ol li > *:first-child {
      margin-block-start: 0;
    }
    .reveal .slide ul li > *:last-child,
    .reveal .slide ol li > *:last-child {
      margin-block-end: 0;
    }
    .reveal .slide .columns:nth-child(3) {
      margin-block-start: 0.8em;
    }
    .reveal blockquote {
      box-shadow: none;
    }
    .reveal .tippy-content>* {
      margin-top: 0.2em;
      margin-bottom: 0.7em;
    }
    .reveal .tippy-content>*:last-child {
      margin-bottom: 0.2em;
    }
    .reveal .slide > img.stretch.quarto-figure-center,
    .reveal .slide > img.r-stretch.quarto-figure-center {
      display: block;
      margin-left: auto;
      margin-right: auto; 
    }
    .reveal .slide > img.stretch.quarto-figure-left,
    .reveal .slide > img.r-stretch.quarto-figure-left  {
      display: block;
      margin-left: 0;
      margin-right: auto; 
    }
    .reveal .slide > img.stretch.quarto-figure-right,
    .reveal .slide > img.r-stretch.quarto-figure-right  {
      display: block;
      margin-left: auto;
      margin-right: 0; 
    }
  </style>
  <script src="gaisho_2024_07_files/libs/kePrint-0.0.1/kePrint.js"></script>
  <link href="gaisho_2024_07_files/libs/lightable-0.0.1/lightable.css" rel="stylesheet">
  <style>
  .v-center-container {
    display: flex;
    justify-content: center;
    align-items: center;
  }
  </style>
</head>
<body class="quarto-light">
  <div class="reveal">
    <div class="slides">

<section id="title-slide" class="quarto-title-block center">
  <h1 class="title"><p><b>外国書購読 Day7</b> <br> <span style="color: #282A36; "> Chapter 6. <br> Analytical Review: Intelligence Scanning </span></p></h1>

<div class="quarto-title-authors">
<div class="quarto-title-author">
<div class="quarto-title-author-name">
Soichi Matsuura 
</div>
</div>
</div>

  <p class="date">2024-11-20</p>
</section>
<section>
<section id="本日の学習内容" class="title-slide slide level1 center">
<h1>本日の学習内容</h1>
<ol type="1">
<li>HTML / CSS / XPath</li>
<li>Chapter 6. Analytical Review: Intelligence Scanning</li>
</ol>
<p>講義の最初に，ウェブサイトの仕組みを簡単に説明し，ウェブ・スクレイピングのための基礎知識を整理します。</p>
</section>
<section id="packages" class="slide level2">
<h2>packages</h2>
<!-- 必要なパッケージをインストールする -->
<p>I use <code>pacman::p_load()</code> to install packages from CRAN and <code>pacman::p_load_gh()</code> from GitHub.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb1"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb1-1"><a href="" aria-hidden="true" tabindex="-1"></a>pacman<span class="sc">::</span><span class="fu">p_load</span>(tidyverse, kableExtra)</span>
<span id="cb1-2"><a href="" aria-hidden="true" tabindex="-1"></a>pacman<span class="sc">::</span><span class="fu">p_load</span>(tidytext, textdata, htm2txt, tokenizers, wordcloud, rvest)</span>
<span id="cb1-3"><a href="" aria-hidden="true" tabindex="-1"></a>pacman<span class="sc">::</span><span class="fu">p_load_gh</span>(<span class="st">"mkearney/rtweet"</span>, <span class="st">"hrbrmstr/seymour"</span>,<span class="st">"mkearney/newsAPI"</span>)</span>
<span id="cb1-4"><a href="" aria-hidden="true" tabindex="-1"></a>pacman<span class="sc">::</span><span class="fu">p_load</span>(maps, tm, SnowballC, RColorBrewer, RCurl, stringr, httr, XML)</span></code><button title="コピー" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</section>
<section id="事前準備" class="slide level2">
<h2>事前準備</h2>
<p>ウェブスクレイピングについて学習する前に、必要な知識を整理します。</p>
<ul>
<li>HTML / CSS</li>
<li>XPath</li>
</ul>
<p>これらの知識があると、ウェブサイトから必要なデータを取得することができます。</p>
</section>
<section id="html" class="slide level2">
<h2>HTML</h2>
<ul>
<li><strong>HTML</strong>(HyperText Markup Language)は、Webページの内容を記述するためのマークアップ言語です。</li>
<li>基本的には、タグという記号を使って、テキストや画像などの要素を囲むことで、その要素の意味を示します。</li>
</ul>
<div class="cell">
<div class="sourceCode cell-code" id="cb2"><pre class="sourceCode html code-with-copy"><code class="sourceCode html"><span id="cb2-1"><a href="" aria-hidden="true" tabindex="-1"></a><span class="dt">&lt;!DOCTYPE</span> html<span class="dt">&gt;</span></span>
<span id="cb2-2"><a href="" aria-hidden="true" tabindex="-1"></a><span class="dt">&lt;</span><span class="kw">html</span><span class="ot"> lang</span><span class="op">=</span><span class="st">"ja"</span><span class="dt">&gt;</span></span>
<span id="cb2-3"><a href="" aria-hidden="true" tabindex="-1"></a><span class="dt">&lt;</span><span class="kw">head</span><span class="dt">&gt;</span></span>
<span id="cb2-4"><a href="" aria-hidden="true" tabindex="-1"></a>    <span class="dt">&lt;</span><span class="kw">meta</span><span class="ot"> charset</span><span class="op">=</span><span class="st">"UTF-8"</span><span class="dt">&gt;</span></span>
<span id="cb2-5"><a href="" aria-hidden="true" tabindex="-1"></a>    <span class="dt">&lt;</span><span class="kw">title</span><span class="dt">&gt;</span>外国書購読2024<span class="dt">&lt;/</span><span class="kw">title</span><span class="dt">&gt;</span></span>
<span id="cb2-6"><a href="" aria-hidden="true" tabindex="-1"></a><span class="dt">&lt;/</span><span class="kw">head</span><span class="dt">&gt;</span></span>
<span id="cb2-7"><a href="" aria-hidden="true" tabindex="-1"></a><span class="dt">&lt;</span><span class="kw">body</span><span class="dt">&gt;</span></span>
<span id="cb2-8"><a href="" aria-hidden="true" tabindex="-1"></a><span class="dt">&lt;</span><span class="kw">h1</span><span class="dt">&gt;</span>見出し1<span class="dt">&lt;/</span><span class="kw">h1</span><span class="dt">&gt;</span></span>
<span id="cb2-9"><a href="" aria-hidden="true" tabindex="-1"></a>  ここに本文</span>
<span id="cb2-10"><a href="" aria-hidden="true" tabindex="-1"></a><span class="dt">&lt;/</span><span class="kw">body</span><span class="dt">&gt;</span></span>
<span id="cb2-11"><a href="" aria-hidden="true" tabindex="-1"></a><span class="dt">&lt;/</span><span class="kw">html</span><span class="dt">&gt;</span></span></code><button title="コピー" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</section>
<section id="css" class="slide level2">
<h2>CSS</h2>
<ul>
<li><strong>CSS</strong>(Cascading Style Sheets)は、Webページの見た目を指定するための言語です。</li>
<li>HTMLで記述された要素に対して、色や大きさ、位置などのスタイルを指定することができます。</li>
</ul>
<div class="cell">
<div class="sourceCode cell-code" id="cb3"><pre class="sourceCode css code-with-copy"><code class="sourceCode css"><span id="cb3-1"><a href="" aria-hidden="true" tabindex="-1"></a>h1 {</span>
<span id="cb3-2"><a href="" aria-hidden="true" tabindex="-1"></a>  <span class="kw">color</span><span class="ch">:</span> <span class="cn">blue</span><span class="op">;</span></span>
<span id="cb3-3"><a href="" aria-hidden="true" tabindex="-1"></a>  <span class="kw">font-size</span><span class="ch">:</span> <span class="dv">24</span><span class="dt">px</span><span class="op">;</span></span>
<span id="cb3-4"><a href="" aria-hidden="true" tabindex="-1"></a>}</span></code><button title="コピー" class="code-copy-button"><i class="bi"></i></button></pre></div>
<style type="text/css">
h1 {
  color: blue;
  font-size: 24px;
}
</style>
</div>
<p>とすると、<code>&lt;h1&gt;</code>タグで囲まれたテキストが青色になり、フォントサイズが24pxになります。</p>
</section>
<section id="xpath" class="slide level2">
<h2>XPath</h2>
<ul>
<li><strong>XPath</strong>は、XML文書の中から要素を選択するための言語です。</li>
<li>XPathは、XML文書の構造を辿りながら、要素を指定することができます。</li>
<li>XPathは、Webスクレイピングの際に、特定の要素を取得するために使用されます。</li>
<li>XPathは、HTML文書にも適用することができます。</li>
</ul>
</section>
<section id="htmlの表" class="slide level2">
<h2>HTMLの表</h2>
<ul>
<li>HTMLの表は、<code>&lt;table&gt;</code>タグで囲まれた要素で構成されます。</li>
<li>表の行は<code>&lt;tr&gt;</code>タグで、列は<code>&lt;td&gt;</code>タグで囲まれます。</li>
<li>表の見出しは<code>&lt;th&gt;</code>タグで囲まれます。</li>
</ul>
<div class="cell">
<div class="sourceCode cell-code" id="cb4"><pre class="sourceCode html code-with-copy"><code class="sourceCode html"><span id="cb4-1"><a href="" aria-hidden="true" tabindex="-1"></a><span class="dt">&lt;</span><span class="kw">table</span><span class="ot"> id</span><span class="op">=</span><span class="st">"namelist"</span><span class="dt">&gt;</span></span>
<span id="cb4-2"><a href="" aria-hidden="true" tabindex="-1"></a>  <span class="dt">&lt;</span><span class="kw">caption</span><span class="dt">&gt;</span></span>
<span id="cb4-3"><a href="" aria-hidden="true" tabindex="-1"></a>    表1: 名前のリスト</span>
<span id="cb4-4"><a href="" aria-hidden="true" tabindex="-1"></a>  <span class="dt">&lt;/</span><span class="kw">caption</span><span class="dt">&gt;</span></span>
<span id="cb4-5"><a href="" aria-hidden="true" tabindex="-1"></a>  <span class="dt">&lt;</span><span class="kw">thead</span><span class="dt">&gt;</span></span>
<span id="cb4-6"><a href="" aria-hidden="true" tabindex="-1"></a>    <span class="dt">&lt;</span><span class="kw">tr</span><span class="dt">&gt;</span></span>
<span id="cb4-7"><a href="" aria-hidden="true" tabindex="-1"></a>      <span class="dt">&lt;</span><span class="kw">th</span><span class="dt">&gt;</span>氏名<span class="dt">&lt;/</span><span class="kw">th</span><span class="dt">&gt;&lt;</span><span class="kw">th</span><span class="dt">&gt;</span>属性<span class="dt">&lt;/</span><span class="kw">th</span><span class="dt">&gt;&lt;</span><span class="kw">th</span><span class="dt">&gt;</span>年齢<span class="dt">&lt;/</span><span class="kw">th</span><span class="dt">&gt;</span></span>
<span id="cb4-8"><a href="" aria-hidden="true" tabindex="-1"></a>    <span class="dt">&lt;/</span><span class="kw">tr</span><span class="dt">&gt;</span></span>
<span id="cb4-9"><a href="" aria-hidden="true" tabindex="-1"></a>  <span class="dt">&lt;/</span><span class="kw">thead</span><span class="dt">&gt;</span></span>
<span id="cb4-10"><a href="" aria-hidden="true" tabindex="-1"></a>  <span class="dt">&lt;</span><span class="kw">tbody</span><span class="dt">&gt;</span></span>
<span id="cb4-11"><a href="" aria-hidden="true" tabindex="-1"></a>    <span class="dt">&lt;</span><span class="kw">tr</span><span class="dt">&gt;</span></span>
<span id="cb4-12"><a href="" aria-hidden="true" tabindex="-1"></a>      <span class="dt">&lt;</span><span class="kw">td</span><span class="dt">&gt;</span>Chris<span class="dt">&lt;/</span><span class="kw">td</span><span class="dt">&gt;&lt;</span><span class="kw">td</span><span class="dt">&gt;</span>HTML tables<span class="dt">&lt;/</span><span class="kw">td</span><span class="dt">&gt;&lt;</span><span class="kw">td</span><span class="dt">&gt;</span>22<span class="dt">&lt;/</span><span class="kw">td</span><span class="dt">&gt;</span></span>
<span id="cb4-13"><a href="" aria-hidden="true" tabindex="-1"></a>    <span class="dt">&lt;/</span><span class="kw">tr</span><span class="dt">&gt;</span></span>
<span id="cb4-14"><a href="" aria-hidden="true" tabindex="-1"></a>    <span class="dt">&lt;</span><span class="kw">tr</span><span class="dt">&gt;</span></span>
<span id="cb4-15"><a href="" aria-hidden="true" tabindex="-1"></a>      <span class="dt">&lt;</span><span class="kw">td</span><span class="dt">&gt;</span>Dennis<span class="dt">&lt;/</span><span class="kw">td</span><span class="dt">&gt;&lt;</span><span class="kw">td</span><span class="dt">&gt;</span>Web accessibility<span class="dt">&lt;/</span><span class="kw">td</span><span class="dt">&gt;&lt;</span><span class="kw">td</span><span class="dt">&gt;</span>45<span class="dt">&lt;/</span><span class="kw">td</span><span class="dt">&gt;</span></span>
<span id="cb4-16"><a href="" aria-hidden="true" tabindex="-1"></a>    <span class="dt">&lt;/</span><span class="kw">tr</span><span class="dt">&gt;</span></span>
<span id="cb4-17"><a href="" aria-hidden="true" tabindex="-1"></a>    <span class="dt">&lt;</span><span class="kw">tr</span><span class="dt">&gt;</span></span>
<span id="cb4-18"><a href="" aria-hidden="true" tabindex="-1"></a>      <span class="dt">&lt;</span><span class="kw">td</span><span class="dt">&gt;</span>Sarah<span class="dt">&lt;/</span><span class="kw">td</span><span class="dt">&gt;&lt;</span><span class="kw">td</span><span class="dt">&gt;</span>JavaScript frameworks<span class="dt">&lt;/</span><span class="kw">td</span><span class="dt">&gt;&lt;</span><span class="kw">td</span><span class="dt">&gt;</span>29<span class="dt">&lt;/</span><span class="kw">td</span><span class="dt">&gt;</span></span>
<span id="cb4-19"><a href="" aria-hidden="true" tabindex="-1"></a>    <span class="dt">&lt;/</span><span class="kw">tr</span><span class="dt">&gt;</span></span>
<span id="cb4-20"><a href="" aria-hidden="true" tabindex="-1"></a>    <span class="dt">&lt;</span><span class="kw">tr</span><span class="dt">&gt;</span></span>
<span id="cb4-21"><a href="" aria-hidden="true" tabindex="-1"></a>      <span class="dt">&lt;</span><span class="kw">td</span><span class="dt">&gt;</span>Karen<span class="dt">&lt;/</span><span class="kw">td</span><span class="dt">&gt;&lt;</span><span class="kw">td</span><span class="dt">&gt;</span>Web performance<span class="dt">&lt;/</span><span class="kw">td</span><span class="dt">&gt;&lt;</span><span class="kw">td</span><span class="dt">&gt;</span>36<span class="dt">&lt;/</span><span class="kw">td</span><span class="dt">&gt;</span></span>
<span id="cb4-22"><a href="" aria-hidden="true" tabindex="-1"></a>    <span class="dt">&lt;/</span><span class="kw">tr</span><span class="dt">&gt;</span></span>
<span id="cb4-23"><a href="" aria-hidden="true" tabindex="-1"></a>  <span class="dt">&lt;/</span><span class="kw">tbody</span><span class="dt">&gt;</span></span>
<span id="cb4-24"><a href="" aria-hidden="true" tabindex="-1"></a><span class="dt">&lt;/</span><span class="kw">table</span><span class="dt">&gt;</span></span></code><button title="コピー" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</section>
<section id="表を抽出-table" class="slide level2">
<h2>表を抽出 | table</h2>
<p>Wikipeidaのページから表を抽出します。</p>
<div class="cell" data-tbl-font-size="80%">
<div class="sourceCode cell-code" id="cb5"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb5-1"><a href="" aria-hidden="true" tabindex="-1"></a>pacman<span class="sc">::</span><span class="fu">p_load</span>(rvest,tidyverse, knitr, kableExtra)</span>
<span id="cb5-2"><a href="" aria-hidden="true" tabindex="-1"></a>url_akb <span class="ot">&lt;-</span> <span class="st">"https://ja.wikipedia.org/wiki/AKB48"</span></span>
<span id="cb5-3"><a href="" aria-hidden="true" tabindex="-1"></a>AKB_table <span class="ot">&lt;-</span> url_akb <span class="sc">|&gt;</span> <span class="fu">read_html</span>() <span class="sc">|&gt;</span> <span class="fu">html_nodes</span>(<span class="st">"table"</span>) <span class="sc">|&gt;</span> <span class="fu">html_table</span>(<span class="at">fill =</span> T)</span>
<span id="cb5-4"><a href="" aria-hidden="true" tabindex="-1"></a>AKB_table[[<span class="dv">9</span>]] <span class="sc">|&gt;</span> <span class="fu">as_tibble</span>() <span class="sc">|&gt;</span><span class="fu">head</span>(<span class="dv">10</span>) <span class="sc">|&gt;</span></span>
<span id="cb5-5"><a href="" aria-hidden="true" tabindex="-1"></a> <span class="fu">kable</span>(<span class="at">format=</span><span class="st">"html"</span>) <span class="sc">|&gt;</span> <span class="fu">kable_styling</span>(<span class="at">font_size =</span> <span class="dv">10</span>)</span></code><button title="コピー" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<table class="table caption-top" data-quarto-postprocess="true" style="font-size: 10px; margin-left: auto; margin-right: auto;">
<thead>
<tr class="header">
<th style="text-align: left;" data-quarto-table-cell-role="th">名前</th>
<th style="text-align: left;" data-quarto-table-cell-role="th">よみ</th>
<th style="text-align: left;" data-quarto-table-cell-role="th">生年月日</th>
<th style="text-align: left;" data-quarto-table-cell-role="th">出身地</th>
<th style="text-align: left;" data-quarto-table-cell-role="th">加入期</th>
<th style="text-align: left;" data-quarto-table-cell-role="th">所属事務所</th>
<th style="text-align: left;" data-quarto-table-cell-role="th">昇格日</th>
<th style="text-align: left;" data-quarto-table-cell-role="th">備考</th>
<th style="text-align: left;" data-quarto-table-cell-role="th">総選挙最高順位</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td style="text-align: left;">岩立沙穂</td>
<td style="text-align: left;">いわたて さほ</td>
<td style="text-align: left;">(1994-10-04) 1994年10月4日（30歳）</td>
<td style="text-align: left;">神奈川県</td>
<td style="text-align: left;">13期</td>
<td style="text-align: left;">TRUSTAR</td>
<td style="text-align: left;">2013年8月24日</td>
<td style="text-align: left;">AKB48最年長元チーム4（'13/'14峯岸・高橋朱里）元チームB（高橋朱里・岩立）元チームB（岩立）キャプテン元チームA（向井地）</td>
<td style="text-align: left;">22位</td>
</tr>
<tr class="even">
<td style="text-align: left;">村山彩希</td>
<td style="text-align: left;">むらやま ゆいり</td>
<td style="text-align: left;">(1997-06-15) 1997年6月15日（27歳）</td>
<td style="text-align: left;">神奈川県</td>
<td style="text-align: left;">13期</td>
<td style="text-align: left;">エイベックス・アスナロ・カンパニー</td>
<td style="text-align: left;">2013年8月24日</td>
<td style="text-align: left;">元チーム4（'13/'14峯岸・高橋朱里・村山・倉野尾）元チーム4（村山）キャプテン</td>
<td style="text-align: left;">-</td>
</tr>
<tr class="odd">
<td style="text-align: left;">込山榛香</td>
<td style="text-align: left;">こみやま はるか</td>
<td style="text-align: left;">(1998-09-12) 1998年9月12日（26歳）</td>
<td style="text-align: left;">千葉県</td>
<td style="text-align: left;">15期</td>
<td style="text-align: left;">ディープスキル</td>
<td style="text-align: left;">2014年4月24日</td>
<td style="text-align: left;">2025年2月卒業予定[237][238]元チーム4（'14峯岸・高橋朱里）元チームK（込山）元チームK（込山）キャプテン元チームA（向井地）</td>
<td style="text-align: left;">21位</td>
</tr>
<tr class="even">
<td style="text-align: left;">福岡聖菜</td>
<td style="text-align: left;">ふくおか せいな</td>
<td style="text-align: left;">(2000-08-01) 2000年8月1日（24歳）</td>
<td style="text-align: left;">神奈川県</td>
<td style="text-align: left;">15期</td>
<td style="text-align: left;">トキエンタテインメント</td>
<td style="text-align: left;">2014年4月24日</td>
<td style="text-align: left;">元チームB（倉持・木﨑・高橋朱里・岩立）元チームA（向井地）</td>
<td style="text-align: left;">31位</td>
</tr>
<tr class="odd">
<td style="text-align: left;">向井地美音</td>
<td style="text-align: left;">むかいち みおん</td>
<td style="text-align: left;">(1998-01-29) 1998年1月29日（26歳）</td>
<td style="text-align: left;">埼玉県</td>
<td style="text-align: left;">15期</td>
<td style="text-align: left;">Mama&amp;Son</td>
<td style="text-align: left;">2014年4月24日</td>
<td style="text-align: left;">元AKB48グループ総監督（3代目）元チーム4（'14峯岸）元チームK（峯岸）元チームA（岡部・向井地）元チームA（向井地）キャプテン</td>
<td style="text-align: left;">13位</td>
</tr>
<tr class="even">
<td style="text-align: left;">小栗有以</td>
<td style="text-align: left;">おぐり ゆい</td>
<td style="text-align: left;">(2001-12-26) 2001年12月26日（22歳）</td>
<td style="text-align: left;">東京都</td>
<td style="text-align: left;">-</td>
<td style="text-align: left;">ゼスト</td>
<td style="text-align: left;">-</td>
<td style="text-align: left;">元チーム8東京都代表元チームA（岡部）兼任元チームB（浅井）兼任元チームB（浅井）</td>
<td style="text-align: left;">25位</td>
</tr>
<tr class="odd">
<td style="text-align: left;">倉野尾成美</td>
<td style="text-align: left;">くらのお なるみ</td>
<td style="text-align: left;">(2000-11-08) 2000年11月8日（24歳）</td>
<td style="text-align: left;">熊本県</td>
<td style="text-align: left;">-</td>
<td style="text-align: left;">DH</td>
<td style="text-align: left;">-</td>
<td style="text-align: left;">AKB48グループ総監督（4代目）元チーム8熊本県代表元チームK（込山）兼任元チーム4（倉野尾）元チーム4（倉野尾）キャプテン</td>
<td style="text-align: left;">30位</td>
</tr>
<tr class="even">
<td style="text-align: left;">坂川陽香</td>
<td style="text-align: left;">さかがわ ひゆか</td>
<td style="text-align: left;">(2006-10-07) 2006年10月7日（18歳）</td>
<td style="text-align: left;">福井県</td>
<td style="text-align: left;">-</td>
<td style="text-align: left;">DH</td>
<td style="text-align: left;">-</td>
<td style="text-align: left;">元チーム8福井県代表（2代目）元チーム4（倉野尾）兼任元チーム4（倉野尾）</td>
<td style="text-align: left;">-</td>
</tr>
<tr class="odd">
<td style="text-align: left;">下尾みう</td>
<td style="text-align: left;">したお みう</td>
<td style="text-align: left;">(2001-04-03) 2001年4月3日（23歳）</td>
<td style="text-align: left;">山口県</td>
<td style="text-align: left;">-</td>
<td style="text-align: left;">Superball</td>
<td style="text-align: left;">-</td>
<td style="text-align: left;">元チーム8山口県代表元チームA（岡部）兼任元チーム4（倉野尾）兼任元チーム4（倉野尾）</td>
<td style="text-align: left;">-</td>
</tr>
<tr class="even">
<td style="text-align: left;">髙橋彩音</td>
<td style="text-align: left;">たかはし あやね</td>
<td style="text-align: left;">(1997-12-30) 1997年12月30日（26歳）</td>
<td style="text-align: left;">埼玉県</td>
<td style="text-align: left;">-</td>
<td style="text-align: left;">アリゲーター[133]</td>
<td style="text-align: left;">-</td>
<td style="text-align: left;">元チーム8埼玉県代表元チーム4（村山）兼任元チームK（田口）兼任元チームK（田口）</td>
<td style="text-align: left;">-</td>
</tr>
</tbody>
</table>


</div>
</div>
</section>
<section id="表を抽出-xpath" class="slide level2">
<h2>表を抽出 | xpath</h2>
<div class="cell">
<div class="sourceCode cell-code" id="cb6"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb6-1"><a href="" aria-hidden="true" tabindex="-1"></a>url <span class="ot">&lt;-</span> <span class="fu">read_html</span>(<span class="st">"HTML/gaisho.html"</span>)</span>
<span id="cb6-2"><a href="" aria-hidden="true" tabindex="-1"></a>url <span class="sc">|&gt;</span><span class="fu">html_node</span>(<span class="at">xpath =</span> <span class="st">'//*[@id="namelist"]'</span>) <span class="sc">|&gt;</span></span>
<span id="cb6-3"><a href="" aria-hidden="true" tabindex="-1"></a>  <span class="fu">html_table</span>(<span class="at">fill =</span> T) <span class="sc">|&gt;</span></span>
<span id="cb6-4"><a href="" aria-hidden="true" tabindex="-1"></a>  <span class="fu">as_tibble</span>() <span class="sc">|&gt;</span> <span class="fu">kable</span>()</span></code><button title="コピー" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<table class="caption-top">
<thead>
<tr class="header">
<th style="text-align: left;">氏名</th>
<th style="text-align: left;">属性</th>
<th style="text-align: right;">年齢</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td style="text-align: left;">Chris</td>
<td style="text-align: left;">HTML tables</td>
<td style="text-align: right;">22</td>
</tr>
<tr class="even">
<td style="text-align: left;">Dennis</td>
<td style="text-align: left;">Web accessibility</td>
<td style="text-align: right;">45</td>
</tr>
<tr class="odd">
<td style="text-align: left;">Sarah</td>
<td style="text-align: left;">JavaScript frameworks</td>
<td style="text-align: right;">29</td>
</tr>
<tr class="even">
<td style="text-align: left;">Karen</td>
<td style="text-align: left;">Web performance</td>
<td style="text-align: right;">36</td>
</tr>
</tbody>
</table>
</div>
</div>
<p>ここで，<code>xpath = '//*[@id="namelist"]'</code>は，<code>id="namelist"</code>という属性を持つ要素を指定しています。</p>
</section></section>
<section>
<section id="intelligence-scanning-of-internet-resources" class="title-slide slide level1 center">
<h1>Intelligence Scanning of Internet Resources</h1>
<!-- ## インターネット資源の知能スキャン -->
</section>
<section id="analytical-procedures" class="slide level2">
<h2>Analytical Procedures</h2>
<ul>
<li>Analytical procedures involve <mark class="mark">the study of plausible relationships between both financial and non-financial data</mark>. <!-- 分析的手続は，財務データと非財務データの両方の間に存在する妥当な関係の研究が含まれる。 --></li>
<li>Before the mid-2000s, sources of such information were spotty, unreliable, and scarce, and that, indeed, was considered a prime reason for markets needing annual, audited financial statements. <!-- 2000年代中期以前は、このような情報ソースは断片的で、信頼性が低く、乏しかったため、市場が監査済み財務諸表を必要とする主な理由と考えられていた。 --></li>
<li>Today, there are numerous social networks, news, and discussion boards that offer both raw and curated, streaming sources of useful business intelligence. <!-- 今日では、有用なビジネスインテリジェンスの生の情報源とキュレーションされたストリーミングソースの両方を提供する多数のソーシャルネットワーク、ニュース、およびディスカッションボードがある。 --></li>
<li>The auditor who does not scan for such client and industry intelligence both increases the cost of auditing, and can be considered negligent in not investigating all available information about the financial health of their client. <!-- このようなクライアントおよび業界のインテリジェンスを調べない監査人は、監査コストを増加させ、クライアントの財務健全性に関する利用可能なすべての情報を調査しないという点で、怠慢とみなされるかもしれない。 --></li>
</ul>
</section>
<section class="slide level2">

<ul>
<li>Though this information is available, the raw information itself may need considerable interpretation and processing before an auditor may rely on it for audit work.</li>
<li><mark class="mark">The most useful information for analytical review may be qualitative and textual</mark>, so unsuitable for the sort of mathematical analysis offered in spreadsheet packages and statistical programs.</li>
<li>Qualitative data may be most useful when it is used to gauge sentiment of customers, investors, partners, employees, and vendors toward the company.</li>
<li>It is only in the past decade that tools have become available to glean such intelligence from Internet streams and databases.</li>
</ul>
<aside class="notes">
<p>このような情報を利用できる一方で，監査作業に頼る前に、生の情報それ自体がかなりの解釈と処理を必要とする場合がある。 分析的レビュー(analytical review)に最も有用な情報が質的かつ文字である可能性もあるため、スプレッドシートパッケージや統計プログラムで提供される数学的分析には適していない場合がある。 質的データは，顧客，投資家，パートナー，従業員，およびベンダーが企業に対してどのような感情を抱いているかを測定するために使用されるときに最も有用である。 この10年間で、インターネットのストリームやデータベースからそのような情報を収集するツールが利用可能となった。</p>
<style type="text/css">
        span.MJX_Assistive_MathML {
          position:absolute!important;
          clip: rect(1px, 1px, 1px, 1px);
          padding: 1px 0 0 0!important;
          border: 0!important;
          height: 1px!important;
          width: 1px!important;
          overflow: hidden!important;
          display:block!important;
      }</style></aside>
</section>
<section class="slide level2">

<ul>
<li>This chapter provides a set of tools that will assist the auditor in interpreting and understanding the relevant qualitative data accessed through the Internet.</li>
<li>I provide algorithms to map qualitative audit intelligence into consumer, investor, and vendor sentiment.</li>
<li>I also suggest useful Internet resources for the audit, and provide algorithms for interpreting the scanned intelligence concerning the audit client, its competitors and the industry.</li>
</ul>
<aside class="notes">
<p>この章では、インターネットを通じで入手した関連する質的データを監査人が解釈し、理解するのを支援する一連のツールを提供する。 本書では、質的監査情報を消費者や投資家、ベンダーの感情(sentiment)に写像するアルゴリズムを提供する。 また、監査のための有用なインターネットリソースを示唆し、監査クライアント、その競争相手、および業界に関するスキャンされた情報を解釈するためのアルゴリズムを提供する。</p>
<style type="text/css">
        span.MJX_Assistive_MathML {
          position:absolute!important;
          clip: rect(1px, 1px, 1px, 1px);
          padding: 1px 0 0 0!important;
          border: 0!important;
          height: 1px!important;
          width: 1px!important;
          overflow: hidden!important;
          display:block!important;
      }</style></aside>
</section>
<section id="sentiment-analysis-with-tidy-data" class="slide level2">
<h2>Sentiment Analysis with Tidy Data</h2>
<ul>
<li>When human readers approach a text, we use our understanding of the emotional intent of words to infer whether a section of text is positive or negative, or perhaps characterized by some other more nuanced emotion like surprise or disgust. <!-- 人間の読者がテキストにアプローチするとき、私たちは単語の感情的な意図を理解して、テキストのセクションがポジティブかネガティブか、または驚きや嫌悪など、もっと微妙な感情に特徴づけられているかどうかを推測する。 --></li>
<li>We can use the tools of text mining to approach the emotional content of text programmatically. <!-- テキストの感情的な内容をプログラムでアプローチするために、テキストマイニングのツールを使用することができる。 --></li>
</ul>
</section>
<section id="tidy-data" class="slide level2">
<h2>Tidy Data</h2>
<ul>
<li><p>We start by representing text in R’s <strong>tidy</strong> structure: <!-- 私たちはRの**整然**(tidy)構造でテキストを表現することから始める： --></p></li>
<li><p><mark class="mark">Each variable is a column</mark>.</p></li>
<li><p><mark class="mark">Each observation is a row</mark>.</p></li>
<li><p><mark class="mark">Each type of observational unit is a table</mark>.</p></li>
</ul>
<!--
- 各変数は列である。
- 各観察は行である。
- 各タイプの観察単位はテーブルである。
 -->
</section>
<section class="slide level2">

<ul>
<li>We thus define the tidy text format as being a table with one-token-per-row.</li>
<li>A token is a meaningful unit of text, such as a word, that we are interested in using for analysis, and tokenization is the process of splitting text into tokens.</li>
<li>This one-token-per-row structure is in contrast to the ways text is often stored in current analyses, perhaps as strings or in a document-term matrix.</li>
</ul>
<aside class="notes">
<p>したがって、整然とした文字列フォーマットを、一行ごとに一つのトークン(one-token-per-row)を持つ表として定義する。 トークンとは、分析に利用することに関心のある、単語のような意味のある文字列の単位である。 トークン化(tokenization)とは、テキストをトークンに分割するプロセスである。 この一行ごとに一つのトークンの構造は、本書が分析の中でしばしば格納していた構造とは対照的で、おそらく文字列や文書用語行列となる。</p>
<style type="text/css">
        span.MJX_Assistive_MathML {
          position:absolute!important;
          clip: rect(1px, 1px, 1px, 1px);
          padding: 1px 0 0 0!important;
          border: 0!important;
          height: 1px!important;
          width: 1px!important;
          overflow: hidden!important;
          display:block!important;
      }</style></aside>
</section>
<section class="slide level2">

<ul>
<li><p>For tidy text mining, the token that is stored in each row is most often a single word, but can also be an n-gram, sentence, or paragraph.</p></li>
<li><p>R’s <code>tidytext</code> package provides functionality to tokenize by commonly used units of text like these and convert to a one-term-per-row format.</p></li>
</ul>
<aside class="notes">
<p>整然なテキストマイニングのために、各行に格納されるトークンは単一の単語だが、n-gram、文、または段落も可能である。 Rのtidytextパッケージは、これらのような一般的に使用されるテキストの単位をトークナイズし、一用語ごとの行形式に変換する機能を提供している。</p>
<style type="text/css">
        span.MJX_Assistive_MathML {
          position:absolute!important;
          clip: rect(1px, 1px, 1px, 1px);
          padding: 1px 0 0 0!important;
          border: 0!important;
          height: 1px!important;
          width: 1px!important;
          overflow: hidden!important;
          display:block!important;
      }</style></aside>
</section>
<section id="sentiment-analysis-with-tidy-data-1" class="slide level2">
<h2>Sentiment Analysis with Tidy Data</h2>
<ul>
<li>One way to analyze the sentiment of a text is to consider <mark class="mark">the text as a combination of its individual words and the sentiment content of the whole text as the sum of the sentiment content of the individual words</mark>.</li>
<li>This is not the only way to approach sentiment analysis, but it is an often-used approach, and an approach that naturally takes advantage of the tidy tool ecosystem.</li>
<li>The <code>tidytext</code> package contains several sentiment lexicons in the sentiments dataset.</li>
</ul>
<aside class="notes">
<p>テキストの感情を分析する一つの方法は、テキストを個々の単語の組み合わせとして考え、全体のテキストの感情内容を個々の単語の感情内容の合計として考えることである。 これが感情分析にアプローチする唯一の方法というわけではないが、よく使用されるアプローチであり、整然なツールエコシステムの利点を自然に活用するアプローチといえる。 tidytextパッケージには，sentimentsデータセットにいくつかの感情辞書が含まれている。</p>
<style type="text/css">
        span.MJX_Assistive_MathML {
          position:absolute!important;
          clip: rect(1px, 1px, 1px, 1px);
          padding: 1px 0 0 0!important;
          border: 0!important;
          height: 1px!important;
          width: 1px!important;
          overflow: hidden!important;
          display:block!important;
      }</style></aside>
</section>
<section id="sentiment" class="slide level2">
<h2>Sentiment</h2>
<p>For example, consider the following code chunk. <!-- たとえば，次のコードチャンクを考えてみよう。 --></p>
<div class="cell">
<div class="sourceCode cell-code" id="cb7"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb7-1"><a href="" aria-hidden="true" tabindex="-1"></a>sentiments</span></code><button title="コピー" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 6,786 × 2
   word        sentiment
   &lt;chr&gt;       &lt;chr&gt;    
 1 2-faces     negative 
 2 abnormal    negative 
 3 abolish     negative 
 4 abominable  negative 
 5 abominably  negative 
 6 abominate   negative 
 7 abomination negative 
 8 abort       negative 
 9 aborted     negative 
10 aborts      negative 
# ℹ 6,776 more rows</code></pre>
</div>
</div>
</section>
<section id="sentiment-dictionary" class="slide level2">
<h2>Sentiment Dictionary</h2>
<p>The three general-purpose lexicons are <!-- 3つの汎用辞書は次のとおりです。 --></p>
<ul>
<li><code>bing</code> from Bing Liu and collaborators at University of Illinois—Chicago, <!-- - bingはBing Liuとイリノイ大学シカゴ校の共同研究者によるもの --></li>
<li><code>AFINN</code> from Finn Årup Nielsen, and <!-- - AFINNはFinn Årup Nielsenによるもの --></li>
<li><code>nrc</code> from Saif Mohammad and Peter Turney. <!-- - nrcはSaif MohammadとPeter Turneyによるもの --></li>
</ul>
</section>
<section class="slide level2">

<ul>
<li>All three of these lexicons are based on unigrams, i.e., single words. <!-- これら3つの辞書はすべて、つまりユニグラム(つまり，単一の単語)で構成されている。 --></li>
<li>These lexicons contain many English words and <mark class="mark">the words are assigned scores for positive/negative sentiment</mark>, and also possibly emotions like joy, anger, sadness, and so forth. <!-- これらの辞書には多くの英単語が含まれており、その単語にはポジティブ／ネガティブな感情のスコアが割り当てられ、また喜び、怒り、悲しみなどの感情も可能性として含まれている。 --></li>
<li>All three were constructed via either crowdsourcing (using, for example, Amazon Mechanical Turk) or by the labor of one of the authors, and were validated using some combination of crowdsourcing again, restaurant or movie reviews, or Twitter data. <!-- これら3つはいずれも、クラウドソーシング（例えば、Amazon Mechanical Turkの使用）または著者の一人の労働によって構築され、クラウドソーシングを再び使用したり、レストランや映画のレビュー、またはTwitterのデータを使用して検証された。 --></li>
</ul>
</section>
<section id="lexicon" class="slide level2">
<h2>lexicon</h2>
<ul>
<li>The <code>nrc</code> lexicon categorizes words in a <strong>binary fashion</strong> (“yes”/“no”) into categories of <mark class="mark">positive, negative, anger, anticipation, disgust, fear, joy, sadness, surprise, and trust</mark>. <!-- nrc語彙集は、ポジティブ、ネガティブ、怒り、期待、嫌悪、恐怖、喜び、悲しみ、驚き、信頼のカテゴリーに「はい」/「いいえ」の二項方式で単語を分類している。 --></li>
<li>The <code>bing</code> lexicon categorizes words in a <strong>binary fashion</strong> into positive and negative categories. <!-- bing語彙集は、ポジティブとネガティブのカテゴリーに単語を二項方式で分類している。 --></li>
<li>The <code>AFINN</code> lexicon assigns words with a score that runs between <span class="math inline">−5</span> and <span class="math inline">5</span>, with negative scores indicating negative sentiment and positive scores indicating positive sentiment. <!-- AFINN語彙集は、−5から5までのスコアを単語に割り当て、ネガティブなスコアはネガティブな感情を、ポジティブなスコアはポジティブな感情を示している。 --></li>
</ul>
</section>
<section id="afinn-dictionary" class="slide level2">
<h2><code>afinn</code> dictionary</h2>
<p>All of this information is tabulated in the sentiments dataset, and <code>tidytext</code> provides a function <code>get_sentiments()</code> to get specific sentiment lexicons without the columns that are not used in that lexicon. <!-- このすべての情報は感情データセットに表形式でまとめられており、tidytextは特定の感情語彙集を、その語彙集で使用されていない列なしで取得するための関数`get_sentiments()`を提供している。 --></p>
<div class="cell">
<div class="sourceCode cell-code" id="cb9"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb9-1"><a href="" aria-hidden="true" tabindex="-1"></a><span class="fu">get_sentiments</span>(<span class="st">"afinn"</span>) <span class="co"># afinn辞書</span></span></code><button title="コピー" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 2,477 × 2
   word       value
   &lt;chr&gt;      &lt;dbl&gt;
 1 abandon       -2
 2 abandoned     -2
 3 abandons      -2
 4 abducted      -2
 5 abduction     -2
 6 abductions    -2
 7 abhor         -3
 8 abhorred      -3
 9 abhorrent     -3
10 abhors        -3
# ℹ 2,467 more rows</code></pre>
</div>
</div>
</section>
<section id="bing-dictionary" class="slide level2">
<h2><code>bing</code> dictionary</h2>
<div class="cell">
<div class="sourceCode cell-code" id="cb11"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb11-1"><a href="" aria-hidden="true" tabindex="-1"></a><span class="fu">get_sentiments</span>(<span class="st">"bing"</span>)  <span class="co"># bing辞書</span></span></code><button title="コピー" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 6,786 × 2
   word        sentiment
   &lt;chr&gt;       &lt;chr&gt;    
 1 2-faces     negative 
 2 abnormal    negative 
 3 abolish     negative 
 4 abominable  negative 
 5 abominably  negative 
 6 abominate   negative 
 7 abomination negative 
 8 abort       negative 
 9 aborted     negative 
10 aborts      negative 
# ℹ 6,776 more rows</code></pre>
</div>
</div>
</section>
<section id="nrc-dictionary" class="slide level2">
<h2><code>nrc</code> dictionary</h2>
<div class="cell">
<div class="sourceCode cell-code" id="cb13"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb13-1"><a href="" aria-hidden="true" tabindex="-1"></a><span class="fu">get_sentiments</span>(<span class="st">"nrc"</span>)   <span class="co"># nrc辞書</span></span></code><button title="コピー" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 13,872 × 2
   word        sentiment
   &lt;chr&gt;       &lt;chr&gt;    
 1 abacus      trust    
 2 abandon     fear     
 3 abandon     negative 
 4 abandon     sadness  
 5 abandoned   anger    
 6 abandoned   fear     
 7 abandoned   negative 
 8 abandoned   sadness  
 9 abandonment anger    
10 abandonment fear     
# ℹ 13,862 more rows</code></pre>
</div>
</div>
</section>
<section id="sentiment-lexison" class="slide level2">
<h2>Sentiment lexison</h2>
<ul>
<li>There are also some domain-specific sentiment lexicons available, constructed to be used with text from a specific content area - e.g., for accounting and finance.</li>
<li>Dictionary-based methods like the ones we are discussing find the total sentiment of a piece of text by adding up the individual sentiment scores for each word in the text.</li>
<li>Not every English word is in the lexicons because many English words are pretty neutral.</li>
</ul>
<aside class="notes">
<p>特定の分野、例えば会計やファイナンスの教科書を使用するために構築された、ドメイン固有の感情語彙集もある。 本書で説明しているような辞書ベースの方法により、テキスト内の各単語の個別の感情スコアを合計することでテキストの総合的な感情が分かる。 多くの英単語がかなり中立的なため、すべての英単語が語彙集に含まれているわけではない。</p>
<style type="text/css">
        span.MJX_Assistive_MathML {
          position:absolute!important;
          clip: rect(1px, 1px, 1px, 1px);
          padding: 1px 0 0 0!important;
          border: 0!important;
          height: 1px!important;
          width: 1px!important;
          overflow: hidden!important;
          display:block!important;
      }</style></aside>
</section>
<section class="slide level2">

<ul>
<li>It is important to keep in mind that these methods do not take into account qualifiers before a word, such as in “no good” or “not true”; a lexicon-based method like this is based on unigrams only.</li>
<li>One last caveat is that the size of the chunk of text that we use to add up unigram sentiment scores can have an effect on results.</li>
<li>A text the size of many paragraphs can often have positive and negative sentiment averaged out to about zero, while sentence-sized or paragraph-sized text often works better.</li>
</ul>
<aside class="notes">
<p>これらの方法は、「no good」や「not true」といった単語の前にある修飾語を考慮に入れないことを念頭に置くことが重要である。 このような語彙集ベースの方法はユニグラム(unigram)のみに基づいている。 最後の注意点として、ユニグラムの感情スコアを合計するために使用するテキストのチャンクのサイズが結果に影響を与える可能性がある。 多くのパラグラフのサイズは、しばしばポジティブとネガティブの感情が平均してゼロになることがありますが、文サイズや段落サイズのテキストの方がうまく機能することがよくあります。</p>
<style type="text/css">
        span.MJX_Assistive_MathML {
          position:absolute!important;
          clip: rect(1px, 1px, 1px, 1px);
          padding: 1px 0 0 0!important;
          border: 0!important;
          height: 1px!important;
          width: 1px!important;
          overflow: hidden!important;
          display:block!important;
      }</style></aside>
</section>
<section id="text-mining" class="slide level2">
<h2>Text mining</h2>
<ul>
<li>With data in a tidy format, <strong>sentiment analysis</strong> can be done as an inner join.</li>
<li>This is another of the great successes of viewing text mining as a tidy data analysis task; much as removing <strong>stop words</strong> is an antijoin operation, performing sentiment analysis is an <mark class="mark">inner join operation</mark>.</li>
<li>Let us look at the words with a joy score from the NRC lexicon.</li>
<li>For this example, we capture an HTML formatted General Motors’ 10-K report for 2017 from SEC’s ECGAR database, demonstrating that HTML documents may be used in the workpapers, as well as those in XBRL format.</li>
</ul>
<aside class="notes">
<p>データが整然データ形式であれば、感情分析は内部結合として実行できる。 これは、テキストマイニングを整然データ分析としてみなすことができる、というの大きな成功の一つである。 ストップワードの削除がアンチジョイン操作であるように、感情分析の実行は内部結合操作である。 NRC辞書からjoyスコアを持つ単語を見てみよう。 この例では、SECのECGARデータベースから2017年のHTMLフォーマットのGeneral Motorsの10-Kレポートをキャプチャし、XBRLフォーマットのものと同様にHTMLドキュメントが法律文書で使用される可能性があることを示している。</p>
<style type="text/css">
        span.MJX_Assistive_MathML {
          position:absolute!important;
          clip: rect(1px, 1px, 1px, 1px);
          padding: 1px 0 0 0!important;
          border: 0!important;
          height: 1px!important;
          width: 1px!important;
          overflow: hidden!important;
          display:block!important;
      }</style></aside>
</section>
<section id="word-cloud-of-sentiment" class="slide level2">
<h2>Word Cloud of Sentiment</h2>
<div class="cell">
<div class="sourceCode cell-code" id="cb15"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb15-1"><a href="" aria-hidden="true" tabindex="-1"></a>txt <span class="ot">&lt;-</span> <span class="fu">read_html</span>(<span class="st">"XBRL/gm201710k.htm"</span>, <span class="at">encoding =</span> <span class="st">"UTF-8"</span>) <span class="sc">|&gt;</span> <span class="fu">html_text</span>()</span>
<span id="cb15-2"><a href="" aria-hidden="true" tabindex="-1"></a>text_stuff <span class="ot">&lt;-</span> txt <span class="sc">|&gt;</span></span>
<span id="cb15-3"><a href="" aria-hidden="true" tabindex="-1"></a>  <span class="fu">tokenize_words</span>() <span class="sc">|&gt;</span> <span class="fu">unlist</span>() <span class="sc">|&gt;</span> <span class="fu">as_tibble</span>()</span>
<span id="cb15-4"><a href="" aria-hidden="true" tabindex="-1"></a><span class="fu">colnames</span>(text_stuff) <span class="ot">&lt;-</span> <span class="st">"word"</span></span>
<span id="cb15-5"><a href="" aria-hidden="true" tabindex="-1"></a>stuff_sentiment <span class="ot">&lt;-</span> text_stuff <span class="sc">|&gt;</span></span>
<span id="cb15-6"><a href="" aria-hidden="true" tabindex="-1"></a>  <span class="fu">inner_join</span>(<span class="fu">get_sentiments</span>(<span class="st">"bing"</span>), <span class="at">by =</span> <span class="st">"word"</span>)</span>
<span id="cb15-7"><a href="" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb15-8"><a href="" aria-hidden="true" tabindex="-1"></a>text_stuff <span class="sc">|&gt;</span></span>
<span id="cb15-9"><a href="" aria-hidden="true" tabindex="-1"></a>  <span class="fu">anti_join</span>(<span class="fu">get_stopwords</span>()) <span class="sc">|&gt;</span></span>
<span id="cb15-10"><a href="" aria-hidden="true" tabindex="-1"></a>  <span class="fu">inner_join</span>(stuff_sentiment) <span class="sc">|&gt;</span></span>
<span id="cb15-11"><a href="" aria-hidden="true" tabindex="-1"></a>  <span class="fu">count</span>(word) <span class="sc">|&gt;</span></span>
<span id="cb15-12"><a href="" aria-hidden="true" tabindex="-1"></a>  <span class="fu">with</span>(<span class="fu">wordcloud</span>(word, <span class="at">colors =</span> <span class="fu">rainbow</span>(<span class="dv">3</span>), <span class="at">rot.per =</span> <span class="fl">0.15</span>, n, <span class="at">max.words =</span> <span class="dv">1000</span>))</span></code><button title="コピー" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>

<!--
txt <- read_html("XBRL/gm201710k.htm", encoding = "UTF-8") |> html_text()
text_stuff <- txt |>
  tokenize_words() |> unlist() |> as_tibble()
colnames(text_stuff) <- "word"
stuff_sentiment <- text_stuff |>
  inner_join(get_sentiments("bing"), by = "word")

text_stuff |>
  anti_join(get_stopwords()) |>
  inner_join(stuff_sentiment) |>
  count(word) |>
  with(wordcloud(word, colors = rainbow(3), rot.per = 0.15, n, max.words = 1000))


 -->
</section>
<section id="word-cloud-of-sentiment-output" class="slide level2 output-location-slide"><h2>Word Cloud of Sentiment</h2><div class="cell output-location-slide">
<div class="cell-output-display">
<div>
<figure>
<p><img data-src="gaisho_2024_07_files/figure-revealjs/wordcloud1-1.png" width="960"></p>
</figure>
</div>
</div>
</div></section><section id="sentiment-analysis-with-tidy-data-2" class="slide level2">
<h2>Sentiment Analysis with Tidy Data</h2>
<div class="cell">
<div class="sourceCode cell-code" id="cb16"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb16-1"><a href="" aria-hidden="true" tabindex="-1"></a>net_sentiment <span class="ot">&lt;-</span> text_stuff <span class="sc">|&gt;</span></span>
<span id="cb16-2"><a href="" aria-hidden="true" tabindex="-1"></a>  <span class="fu">inner_join</span>(<span class="fu">get_sentiments</span>(<span class="st">"bing"</span>), <span class="at">by =</span> <span class="st">"word"</span>) <span class="sc">|&gt;</span></span>
<span id="cb16-3"><a href="" aria-hidden="true" tabindex="-1"></a>  <span class="fu">count</span>(sentiment) <span class="sc">|&gt;</span></span>
<span id="cb16-4"><a href="" aria-hidden="true" tabindex="-1"></a>  <span class="fu">spread</span>(sentiment, n, <span class="at">fill =</span> <span class="dv">0</span>) <span class="sc">|&gt;</span></span>
<span id="cb16-5"><a href="" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(</span>
<span id="cb16-6"><a href="" aria-hidden="true" tabindex="-1"></a>    <span class="at">net_positive =</span> positive <span class="sc">-</span> negative,</span>
<span id="cb16-7"><a href="" aria-hidden="true" tabindex="-1"></a>    <span class="at">proportion_positive =</span> positive<span class="sc">/</span>negative <span class="sc">-</span> <span class="dv">1</span></span>
<span id="cb16-8"><a href="" aria-hidden="true" tabindex="-1"></a>    )</span>
<span id="cb16-9"><a href="" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb16-10"><a href="" aria-hidden="true" tabindex="-1"></a>net_sentiment <span class="sc">|&gt;</span></span>
<span id="cb16-11"><a href="" aria-hidden="true" tabindex="-1"></a>  <span class="fu">kable</span>() <span class="sc">|&gt;</span></span>
<span id="cb16-12"><a href="" aria-hidden="true" tabindex="-1"></a>  <span class="fu">kable_styling</span>(</span>
<span id="cb16-13"><a href="" aria-hidden="true" tabindex="-1"></a>    <span class="at">bootstrap_options =</span> <span class="fu">c</span>(<span class="st">"striped"</span>, <span class="st">"hover"</span>, <span class="st">"condensed"</span>)</span>
<span id="cb16-14"><a href="" aria-hidden="true" tabindex="-1"></a>    )</span></code><button title="コピー" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>

</section>
<section id="sentiment-analysis-with-tidy-data-2-output" class="slide level2 output-location-slide"><h2>Sentiment Analysis with Tidy Data</h2><div class="cell output-location-slide">
<div class="cell-output-display">
<table class="table table-striped table-hover table-condensed caption-top" data-quarto-postprocess="true" style="margin-left: auto; margin-right: auto;">
<thead>
<tr class="header">
<th style="text-align: right;" data-quarto-table-cell-role="th">negative</th>
<th style="text-align: right;" data-quarto-table-cell-role="th">positive</th>
<th style="text-align: right;" data-quarto-table-cell-role="th">net_positive</th>
<th style="text-align: right;" data-quarto-table-cell-role="th">proportion_positive</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td style="text-align: right;">1092</td>
<td style="text-align: right;">1258</td>
<td style="text-align: right;">166</td>
<td style="text-align: right;">0.1520147</td>
</tr>
</tbody>
</table>


</div>
</div></section><section id="text-analysis" class="slide level2">
<h2>text analysis</h2>
<div class="cell">
<div class="sourceCode cell-code" id="cb17"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb17-1"><a href="" aria-hidden="true" tabindex="-1"></a>text_stuff <span class="sc">%&gt;%</span></span>
<span id="cb17-2"><a href="" aria-hidden="true" tabindex="-1"></a>    <span class="fu">anti_join</span>(<span class="fu">get_stopwords</span>()) <span class="sc">%&gt;%</span></span>
<span id="cb17-3"><a href="" aria-hidden="true" tabindex="-1"></a>    <span class="fu">inner_join</span>(stuff_sentiment) <span class="sc">%&gt;%</span></span>
<span id="cb17-4"><a href="" aria-hidden="true" tabindex="-1"></a>    <span class="fu">count</span>(word) <span class="sc">%&gt;%</span></span>
<span id="cb17-5"><a href="" aria-hidden="true" tabindex="-1"></a>    <span class="fu">with</span>(<span class="fu">wordcloud</span>(</span>
<span id="cb17-6"><a href="" aria-hidden="true" tabindex="-1"></a>        word,</span>
<span id="cb17-7"><a href="" aria-hidden="true" tabindex="-1"></a>        <span class="at">colors =</span> <span class="fu">rainbow</span>(<span class="dv">3</span>),</span>
<span id="cb17-8"><a href="" aria-hidden="true" tabindex="-1"></a>        <span class="at">rot.per =</span> <span class="fl">0.15</span>,</span>
<span id="cb17-9"><a href="" aria-hidden="true" tabindex="-1"></a>        n,</span>
<span id="cb17-10"><a href="" aria-hidden="true" tabindex="-1"></a>        <span class="at">max.words =</span> <span class="dv">1000</span>)</span>
<span id="cb17-11"><a href="" aria-hidden="true" tabindex="-1"></a>        )</span></code><button title="コピー" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>

</section><section id="text-analysis-output" class="slide level2 output-location-slide"><h2>text analysis</h2><div class="cell output-location-slide">
<div class="cell-output-display">
<div>
<figure>
<p><img data-src="gaisho_2024_07_files/figure-revealjs/unnamed-chunk-12-1.png" width="960"></p>
</figure>
</div>
</div>
</div></section></section>
<section>
<section id="scanning-of-uncurated-news-sources-from-social-networks" class="title-slide slide level1 center">
<h1>Scanning of Uncurated News Sources from Social Networks</h1>
<!-- ## ソーシャルネットワークからキュレートされていないニュース情報を調べる -->
</section>
<section id="x.com" class="slide level2">
<h2>X.com</h2>
<ul>
<li>X.com (the platform formerly known as Twitter, we will use the terms Twitter/tweets here) is arguably the most important of all the social networks for market analysis. <!-- X.com (以前のTwitterとして知られているプラットフォーム)は、市場分析においておそらく最も重要なソーシャルネットワークである。 --> <!-- - Twitter is arguably the most important of all the social networks for market analysis. --> <!-- Twitterはおそらく全ソーシャルネットワークの中で市場分析とって最も重要なものである。 --></li>
<li>Facebook, MySpace, Instagram, Snapchat, LinkedIn, WeChat, and so forth potentially could offer more useful marketing information, but regulations either prohibit, the distribution of data completely (e.g., LinkedIn) or they significantly limit it to just they people you may know directly (Facebook). <!-- FacebookやMySpace，Instagram，Snapchat，LinkedIn，WeChatなどは、より有用なマーケティング情報を提供する可能性があるが， --> <!-- 規制によってデータの配布が完全に禁止されている（LinkedInなど）か、直接の知人だけのように大幅に制限されている（Facebookなど）。 --></li>
<li>This section shows you how to gain access to Twitter’s API (application programming interface). <!-- この節では、TwitterのAPI（アプリケーションプログラミングインターフェース）にアクセスする方法を説明する。 --></li>
</ul>
</section>
<section class="slide level2">

<ul>
<li>X.com/Twitter has around 260 million daily active users as of 2023, a number that vastly dwarfs any of the finance specific social platforms (e.g., StockTwits) which have usage measured in hundreds of thousands. <!-- Twitterは1日1億3000万人のアクティブユーザーを抱えており、これは数十万人単位で使用されている金融特化型のソーシャルプラットフォーム（StockTwitsなど）よりもはるかに多い。 --></li>
<li>Even though it is not finance specific, the volume of financial information exchanged on Twitter is substantially larger than on bespoke finance platforms. <!-- 金融に特化しているわけではないものの、Twitterで交換される金融情報の量は専門の金融プラットフォームよりもはるかに多い。 --></li>
<li>In addition, Twitter is more likely to report the market, competitor and product specific problems that tend to drive valuations today. <!-- 加えて、Twitterは、今日の評価を左右しそうな市場や競合他社、製品に固有の問題を報告する可能性が高い。 --></li>
</ul>
</section>
<section id="rtweet-package" class="slide level2">
<h2><code>rtweet</code> package</h2>
<ul>
<li>I use the rtweet package here to extract information from Twitter. <!-- 本書では，`rtweet`パッケージを使用して，Twitterから情報を抽出する。 --></li>
<li>The <code>#</code> symbol is used to refer to individuals on Twitter. <!-- `#`記号は、Twitter上の個人を参照するために使用される。 --></li>
<li>A <code>#</code> symbol before a word tells Twitter to “index” all transactions that have this hashtag. <!-- 単語の前に`#`記号があると、Twitterはこのハッシュタグを持つすべてのトランザクションを「インデックス」する。 --></li>
<li>Twitter accumulates all posts that have it and retrieves them more quickly than would search with a query engine. <!-- Twitterはハッシュタグをもつすべての投稿を蓄積し、それらを検索エンジンで検索するよりも迅速に取得する。 --></li>
</ul>
</section>
<section id="twitter" class="slide level2">
<h2>Twitter</h2>
<ul>
<li>The <code>@</code> symbol is used to refer to individuals on Twitter. <!-- `@`記号は、Twitter上の個人を参照するために使用される。 --></li>
<li>It is combined with a username and inserted into tweets to refer to that person or send them a public message. <!-- ユーザ名と組み合わせて、その人を参照したり、公開メッセージを送ったりするためにツイートに挿入される。 --></li>
<li>When <code>@</code> precedes a username, it automatically gets linked to that user’s profile page. <!-- `@`がユーザ名の前にあると、自動的にそのユーザのプロフィールページにリンクされる。 --></li>
<li>Users may be individuals or firms. <!-- ユーザは個人または企業である。 --></li>
</ul>
</section>
<section class="slide level2">

<ul>
<li>It is not necessary to receive a token to use rtweet; only a user account is required. <!-- `rtweet`パッケージを使う際に必要なのはユーザアカウントだけで，トークンを受け取る必要はない。 --></li>
<li>But the OAuth authentication gives access to more functions on Twitter, such as posting. <!-- しかし，OAuth認証を行うと，Twitter上での投稿などの機能にアクセスできるようになる。 --></li>
<li>If you need full access, go to https://developer.twitter.com (Twitter Developer Site) create an app and apply for a consumer key and consumer secret; as the “Callback URL” enter: http://127.0.0.1:1410. <!-- 完全なアクセスが必要な場合は、https://developer.twitter.com（Twitter Developer Site）にアクセスし、アプリを作成し、コンシューマキーとコンシューマシークレットを申請します。 --> <!-- 「コールバックURL」には、http://127.0.0.1:1410を入力する。 --></li>
</ul>
</section>
<section class="slide level2">

<ul>
<li>The authentication process of Twitter involves creating a Twitter app and doing a handshake. <!-- Twitterの認証プロセスは、Twitterアプリを作成し、ハンドシェイクを行うことを含む。 --></li>
<li>You have to handshake every time you want to get data from Twitter with R. <!-- RでTwitterから情報を取得したいときは，毎回ハンドシェイクが必要になる。 --></li>
<li>Since Twitter released the Version 1.1 of their API an OAuth handshake is necessary for every request you do. <!-- TwitterはAPIのバージョン1.1をリリースしたため、リクエストごとにOAuthハンドシェイクが必要になる。 --></li>
</ul>
</section>
<section class="slide level2">

<p>The following steps will get you onto the Twitter API: <!-- 以下の手順でTwitter APIにアクセスできる。 --></p>
<ol type="1">
<li>Create an app at Twitter: Go to apps.twitter.com/ and log in with your Twitter Account. From your Profile picture in the upper right corner, select the drop-down menu and look for “My Applications”. Click on it and then on “Create new application”. As the Callback URL enter * http://127.0.0.1:1410. Click on Create and you will get redirected to a screen with all the OAuth settings of your new App.</li>
<li>Use the <code>setup_twitter_OAuth()</code> function which uses the httr package. Get your api_key and your <code>api_secret</code> as well as your <code>access_token</code> and <code>access_token_secret</code> from your app settings on Twitter (click on the “API key” tab to see them).</li>
</ol>
<aside class="notes">
<p>1 Twitterアプリを作成する：apps.twitter.com/にアクセスし、Twitterアカウントでログインする。 右上隅のプロフィール画像から、ドロップダウンメニューを選択し、「My Applications」を探す。 クリックしてから「Create new application」をクリックする。 コールバックURLとして* http://127.0.0.1:1410.を入力する。 クリックして、新しいアプリのOAuth設定が表示される画面にリダイレクトされる。 2 <code>setup_twitter_OAuth()</code>関数を使用する。httrパッケージを使用する。 Twitterのアプリ設定から<code>api_key</code>、<code>api_secret</code>、<code>access_token</code>、<code>access_token_secret</code>を取得する（これらを表示するには「APIキー」タブをクリックする）。</p>
<style type="text/css">
        span.MJX_Assistive_MathML {
          position:absolute!important;
          clip: rect(1px, 1px, 1px, 1px);
          padding: 1px 0 0 0!important;
          border: 0!important;
          height: 1px!important;
          width: 1px!important;
          overflow: hidden!important;
          display:block!important;
      }</style></aside>
</section>
<section id="example-extracting-tweets-about-r" class="slide level2">
<h2>Example: Extracting Tweets about R</h2>
<p>Here is an example. <!-- これが例である。 --></p>
<div class="cell">
<div class="sourceCode cell-code" id="cb18"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb18-1"><a href="" aria-hidden="true" tabindex="-1"></a><span class="do">## トークンを作成し、環境変数として保存する</span></span>
<span id="cb18-2"><a href="" aria-hidden="true" tabindex="-1"></a><span class="fu">create_token</span>(</span>
<span id="cb18-3"><a href="" aria-hidden="true" tabindex="-1"></a>  <span class="at">app =</span> <span class="st">"Test_of_the_API_platform"</span>, <span class="co"># appの名前</span></span>
<span id="cb18-4"><a href="" aria-hidden="true" tabindex="-1"></a>  <span class="at">consumer_key =</span> <span class="st">'AWsZc3pjFsgAFlBK4OHRlyGtK'</span>, <span class="co"># コンシューマキー</span></span>
<span id="cb18-5"><a href="" aria-hidden="true" tabindex="-1"></a>  <span class="at">consumer_secret =</span> <span class="st">'DTRvorcjSaQQ1goWzynZ2tc226mgRvQ1JPxGur7nQMTesuXw3z'</span>, <span class="co"># シークレットキー</span></span>
<span id="cb18-6"><a href="" aria-hidden="true" tabindex="-1"></a>  <span class="at">access_token =</span> <span class="st">'14122740-FWlOwlo4qvhiy6oTcRypgVaIyvmlg1OZLudAToO6c'</span>, <span class="co"># アクセストークン</span></span>
<span id="cb18-7"><a href="" aria-hidden="true" tabindex="-1"></a>  <span class="at">access_secret =</span> <span class="st">'sYjzQMjFKQFvMVRCU9gYx7bOteiS4XCoLvCgodTJZVm7y'</span> <span class="co"># アクセスシークレット</span></span>
<span id="cb18-8"><a href="" aria-hidden="true" tabindex="-1"></a>  )</span>
<span id="cb18-9"><a href="" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb18-10"><a href="" aria-hidden="true" tabindex="-1"></a><span class="do">## Google Mapsを通じて地理位置データにアクセスするためのGoogle APIキー</span></span>
<span id="cb18-11"><a href="" aria-hidden="true" tabindex="-1"></a>westland_api <span class="ot">&lt;-</span> <span class="st">'AIzaSyCErk3aBmPoG1FAKEqNUz6elhD6ZrR2MQtN7W0'</span></span>
<span id="cb18-12"><a href="" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb18-13"><a href="" aria-hidden="true" tabindex="-1"></a>rt <span class="ot">&lt;-</span> <span class="fu">search_tweets</span>(<span class="st">"#rstats"</span>, <span class="at">n =</span> <span class="dv">18000</span>, <span class="at">include_rts =</span> <span class="cn">FALSE</span>)</span>
<span id="cb18-14"><a href="" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb18-15"><a href="" aria-hidden="true" tabindex="-1"></a><span class="co"># うごかない</span></span>
<span id="cb18-16"><a href="" aria-hidden="true" tabindex="-1"></a>rt <span class="ot">&lt;-</span> <span class="fu">search_tweets</span>(</span>
<span id="cb18-17"><a href="" aria-hidden="true" tabindex="-1"></a>  <span class="st">"#rstats"</span>,</span>
<span id="cb18-18"><a href="" aria-hidden="true" tabindex="-1"></a>  <span class="at">n =</span> <span class="dv">18000</span>,</span>
<span id="cb18-19"><a href="" aria-hidden="true" tabindex="-1"></a>  <span class="at">include_rts =</span> <span class="cn">FALSE</span></span>
<span id="cb18-20"><a href="" aria-hidden="true" tabindex="-1"></a>) <span class="co"># うごかない</span></span></code><button title="コピー" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</section>
<section id="example-extracting-tweets-about-general-motors-and-the-auto-industry" class="slide level2">
<h2>Example: Extracting tweets about General Motors and the Auto Industry</h2>
<p>Query used to select and customize streaming collection method. There are four possible methods.</p>
<ol type="1">
<li>The default, q = ““, returns a small random sample of all publicly available Twitter statuses.</li>
<li>To filter by keyword, provide a comma separated character string with the desired phrase(s) and keyword(s).</li>
<li>Track users by providing a comma separated list of user IDs or screen names.</li>
<li>Use four latitude/longitude bounding box points to stream by geo location.</li>
</ol>
<p>This must be provided via a vector of length 4, e.g., <code>c(-125, 26, -65, 49)</code>.</p>
</section>
<section class="slide level2">

<div class="cell">
<div class="sourceCode cell-code" id="cb19"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb19-1"><a href="" aria-hidden="true" tabindex="-1"></a><span class="fu">stream_tweets</span>(</span>
<span id="cb19-2"><a href="" aria-hidden="true" tabindex="-1"></a>  <span class="at">q =</span> <span class="st">"auto, car, general motors, GM"</span>, <span class="co"># キーワードでフィルタリング</span></span>
<span id="cb19-3"><a href="" aria-hidden="true" tabindex="-1"></a>  <span class="at">timeout =</span> <span class="dv">100</span>,    <span class="do">## the number of seconds that you will access.</span></span>
<span id="cb19-4"><a href="" aria-hidden="true" tabindex="-1"></a>                    <span class="do">## Max 18000 tweets / 15 min</span></span>
<span id="cb19-5"><a href="" aria-hidden="true" tabindex="-1"></a>  <span class="at">parse =</span> <span class="cn">FALSE</span>,    <span class="do">## we'll do this later</span></span>
<span id="cb19-6"><a href="" aria-hidden="true" tabindex="-1"></a>  <span class="at">file_name =</span> <span class="st">"tweetsaboutGM.json"</span></span>
<span id="cb19-7"><a href="" aria-hidden="true" tabindex="-1"></a>) <span class="co"># うごかない</span></span>
<span id="cb19-8"><a href="" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb19-9"><a href="" aria-hidden="true" tabindex="-1"></a><span class="do">## read in the data as a tidy tbl data frame</span></span>
<span id="cb19-10"><a href="" aria-hidden="true" tabindex="-1"></a>djt <span class="ot">&lt;-</span> <span class="fu">parse_stream</span>(<span class="st">"tweetsaboutGM.json"</span>)</span>
<span id="cb19-11"><a href="" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb19-12"><a href="" aria-hidden="true" tabindex="-1"></a>djt <span class="ot">&lt;-</span> djt[,<span class="dv">3</span><span class="sc">:</span><span class="dv">6</span>]  <span class="do">## just a few things we'd like to see</span></span>
<span id="cb19-13"><a href="" aria-hidden="true" tabindex="-1"></a><span class="fu">glimpse</span>(djt)</span>
<span id="cb19-14"><a href="" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb19-15"><a href="" aria-hidden="true" tabindex="-1"></a><span class="co"># To get an idea of what you should be seeing before you actually signup for a Twitter OAuth code,</span></span>
<span id="cb19-16"><a href="" aria-hidden="true" tabindex="-1"></a><span class="co"># you can bring in the dataset *trump_tweet.RData # provided with this workout</span></span></code><button title="コピー" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</section>
<section id="intelligence-scanning-of-curated-news-streams" class="slide level2">
<h2>Intelligence Scanning of Curated News Streams</h2>
<ul>
<li>Curated intelligence sources, such as Google News, MacRumours, and other news feeds, offer prepackaged information that can be. <!-- Google News、MacRumours、その他のニュースフィードなどのキュレーションされた情報ソースは、事前にパッケージ化された情報を提供している。 --></li>
<li>My favorite is Feedly (stylized as feedly), a news aggregator application that compiles news feeds from a variety of online sources for the user to customize and share with others. <!-- 私のお気に入りはFeedly（feedlyとしてスタイライズされている）で，ユーザーがカスタマイズして他のユーザと共有するために、さまざまなオンラインソースからニュースフィードをまとめるニュースアグリゲーターアプリケーションです。 --></li>
<li>Feedly is emblematic of the sort of cloud-based information services that are revolutionizing the audit process. <!-- Feedlyは、監査プロセスを革新しているクラウドベースの情報サービスの代表的なものである。 --></li>
</ul>
</section>
<section class="slide level2">

<ul>
<li>Start by going to <a href="https://developer.feedly.com/">https://developer.feedly.com/</a> and then page to <a href="https://feedly.com/v3/auth/dev">https://feedly.com/v3/auth/dev</a> to sign in, get a user ID and then follow steps to get your access token. <!-- まず、https://developer.feedly.com/にアクセスし、https://feedly.com/v3/auth/devに移動してサインインし、ユーザーIDを取得し、手順にしたがってアクセストークンを取得する。 --></li>
<li>This requires either a “Pro” account or a regular account and you manually requesting OAuth codes. <!-- これには「Pro」アカウントまたは通常のアカウントが必要であり、OAuthコードを手動でリクエストする必要がある。 --></li>
<li>Store it in your <code>~/.Renviron</code> in <code>FEEDLY_ACCESS_TOKEN</code>. <!-- これを`~/.Renviron`に`FEEDLY_ACCESS_TOKEN`として保存する。 --></li>
<li>Feedly will return your access token and refresh token, which looks like the tokens below, and which you can save on your computer, leaving you free to easily access Feedly content. <!-- Feedlyは、以下のようなトークンを返し、コンピュータに保存することができる。 --> <!-- これにより、Feedlyのコンテンツに簡単にアクセスできるようになる。 --></li>
</ul>
</section>
<section class="slide level2">

<div class="cell">
<div class="sourceCode cell-code" id="cb20"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb20-1"><a href="" aria-hidden="true" tabindex="-1"></a>pkgenv <span class="ot">&lt;-</span> <span class="fu">new.env</span>(<span class="at">parent=</span><span class="fu">emptyenv</span>()) <span class="co"># 新しい環境を作成</span></span>
<span id="cb20-2"><a href="" aria-hidden="true" tabindex="-1"></a>pkgenv<span class="sc">$</span>token <span class="ot">&lt;-</span> <span class="fu">Sys.getenv</span>(<span class="st">"FEEDLY_ACCESS_TOKEN"</span>) <span class="co"># 環境変数からトークンを取得</span></span>
<span id="cb20-3"><a href="" aria-hidden="true" tabindex="-1"></a><span class="co">#’ In reality, this is more complex since the non-toy example has to #’ refresh tokens when they expire.</span></span>
<span id="cb20-4"><a href="" aria-hidden="true" tabindex="-1"></a><span class="co"># 実際には、トークンが期限切れになったときにトークンを更新する必要があるため、より複雑になる。</span></span>
<span id="cb20-5"><a href="" aria-hidden="true" tabindex="-1"></a>feedly_token <span class="ot">&lt;-</span> <span class="cf">function</span>() {</span>
<span id="cb20-6"><a href="" aria-hidden="true" tabindex="-1"></a>    <span class="fu">return</span>(.pkgenv<span class="sc">$</span>token)</span>
<span id="cb20-7"><a href="" aria-hidden="true" tabindex="-1"></a>}</span></code><button title="コピー" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</section>
<section class="slide level2">

<ul>
<li><p>For the purposes of this example, consider a “stream” to be all the historical items in a feed. <!-- この例における目的は，「ストリーム」とはフィード内のすべての過去のアイテムを指すものとする。 --></p></li>
<li><p>Maximum “page size” (max number of items returned in a single call) is 1000.</p></li>
<li><p>For simplicity, there is a blanket assumption that if continuation is actually present, we can ask for a large number of items (e.g., 10,000).</p></li>
</ul>
</section>
<section class="slide level2">

<div class="cell">
<div class="sourceCode cell-code" id="cb21"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb21-1"><a href="" aria-hidden="true" tabindex="-1"></a>apple_feed_id <span class="ot">&lt;-</span> <span class="st">"feed/http://feeds.feedburner.com/MacRumors"</span></span>
<span id="cb21-2"><a href="" aria-hidden="true" tabindex="-1"></a><span class="do">## Here is the stream function</span></span>
<span id="cb21-3"><a href="" aria-hidden="true" tabindex="-1"></a><span class="fu">feedly_stream</span>(stream_id,</span>
<span id="cb21-4"><a href="" aria-hidden="true" tabindex="-1"></a><span class="at">ranked =</span> <span class="fu">c</span>(<span class="st">"newest"</span>, <span class="st">"oldest"</span>),</span>
<span id="cb21-5"><a href="" aria-hidden="true" tabindex="-1"></a><span class="at">unread_only =</span> <span class="cn">FALSE</span>,</span>
<span id="cb21-6"><a href="" aria-hidden="true" tabindex="-1"></a><span class="at">count =</span> <span class="dv">1000</span>L,</span>
<span id="cb21-7"><a href="" aria-hidden="true" tabindex="-1"></a><span class="at">continuation =</span> <span class="cn">NULL</span>,</span>
<span id="cb21-8"><a href="" aria-hidden="true" tabindex="-1"></a><span class="at">feedly_token =</span> <span class="fu">feedly_access_token</span>())</span>
<span id="cb21-9"><a href="" aria-hidden="true" tabindex="-1"></a>apple_stream <span class="ot">&lt;-</span> <span class="fu">feedly_stream</span>(apple_feed_id) <span class="fu">glimpse</span>(apple_stream)</span>
<span id="cb21-10"><a href="" aria-hidden="true" tabindex="-1"></a><span class="do">## Here is another function</span></span>
<span id="cb21-11"><a href="" aria-hidden="true" tabindex="-1"></a><span class="fu">feedly_search_contents</span>(query,</span>
<span id="cb21-12"><a href="" aria-hidden="true" tabindex="-1"></a><span class="at">stream_id =</span> <span class="cn">NULL</span>,</span>
<span id="cb21-13"><a href="" aria-hidden="true" tabindex="-1"></a><span class="at">fields =</span> <span class="st">"all"</span>,</span>
<span id="cb21-14"><a href="" aria-hidden="true" tabindex="-1"></a><span class="at">embedded =</span> <span class="cn">NULL</span>,</span>
<span id="cb21-15"><a href="" aria-hidden="true" tabindex="-1"></a><span class="at">engagement =</span> <span class="cn">NULL</span>,</span>
<span id="cb21-16"><a href="" aria-hidden="true" tabindex="-1"></a><span class="at">count =</span> <span class="dv">20</span>L,</span>
<span id="cb21-17"><a href="" aria-hidden="true" tabindex="-1"></a><span class="at">locale =</span> <span class="cn">NULL</span>,</span>
<span id="cb21-18"><a href="" aria-hidden="true" tabindex="-1"></a><span class="at">feedly_token =</span> <span class="fu">feedly_access_token</span>())</span>
<span id="cb21-19"><a href="" aria-hidden="true" tabindex="-1"></a>f_search <span class="ot">&lt;-</span></span>
<span id="cb21-20"><a href="" aria-hidden="true" tabindex="-1"></a><span class="fu">feedly_search_contents</span>(<span class="at">q =</span> <span class="st">"ipod"</span>,</span>
<span id="cb21-21"><a href="" aria-hidden="true" tabindex="-1"></a><span class="fu">glimpse</span>(f_search)</span>
<span id="cb21-22"><a href="" aria-hidden="true" tabindex="-1"></a><span class="co"># preallocate space</span></span>
<span id="cb21-23"><a href="" aria-hidden="true" tabindex="-1"></a>streams <span class="ot">&lt;-</span> <span class="fu">vector</span>(<span class="st">"list"</span>, <span class="dv">10</span>) streams[<span class="dv">1</span>L] <span class="ot">&lt;-</span> <span class="fu">list</span>(apple_stream)</span>
<span id="cb21-24"><a href="" aria-hidden="true" tabindex="-1"></a><span class="co"># catch all of the content</span></span>
<span id="cb21-25"><a href="" aria-hidden="true" tabindex="-1"></a>idx <span class="ot">&lt;-</span> <span class="dv">2</span>L <span class="cf">while</span>(<span class="fu">length</span>(apple_stream<span class="sc">$</span>continuation) <span class="sc">&gt;</span> <span class="dv">0</span>) {</span>
<span id="cb21-26"><a href="" aria-hidden="true" tabindex="-1"></a><span class="fu">cat</span>(<span class="st">"."</span>, <span class="at">sep=</span><span class="st">""</span>) <span class="co"># progress bar, sort of feedly_stream(</span></span>
<span id="cb21-27"><a href="" aria-hidden="true" tabindex="-1"></a>stream_id <span class="ot">=</span> apple_feed_id,</span>
<span id="cb21-28"><a href="" aria-hidden="true" tabindex="-1"></a>ct <span class="ot">=</span> <span class="dv">10000</span>L,</span>
<span id="cb21-29"><a href="" aria-hidden="true" tabindex="-1"></a>continuation <span class="ot">=</span> apple_stream<span class="sc">$</span>continuation</span>
<span id="cb21-30"><a href="" aria-hidden="true" tabindex="-1"></a><span class="er">)</span> <span class="ot">-&gt;</span> rb_stream</span>
<span id="cb21-31"><a href="" aria-hidden="true" tabindex="-1"></a>streams[idx] <span class="ot">&lt;-</span> <span class="fu">list</span>(apple_stream) idx <span class="ot">&lt;-</span> idx <span class="sc">+</span> <span class="dv">1</span>L</span>
<span id="cb21-32"><a href="" aria-hidden="true" tabindex="-1"></a>} <span class="fu">cat</span>(<span class="st">"</span><span class="sc">\n</span><span class="st">"</span>)</span>
<span id="cb21-33"><a href="" aria-hidden="true" tabindex="-1"></a><span class="fu">str</span>(streams, <span class="dv">1</span>) <span class="fu">str</span>(streams[[<span class="dv">1</span>]], <span class="dv">1</span>) <span class="fu">glimpse</span>(streams[[<span class="dv">1</span>]]<span class="sc">$</span>items)</span></code><button title="コピー" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</section>
<section class="slide level2">

<ul>
<li>Feedly curates numerous news and blog outlets, which distribute a broad array of news items from formal press publications that would have a bearing on the conduct of an audit. <!-- Feedlyは、監査の実施に影響を与える可能性のある公式の報道出版物から、多くのニュースやブログのアウトレットをキュレーションし、幅広いニュースアイテムを配信している。 --></li>
<li>I suggest you use the various <code>lubridate</code>, <code>ggplot</code>, and <code>tidyverse</code> tools to analyze and present any insights from this larger dataset. <!-- このような大規模なデータセットからの洞察を分析し、提示するために、`lubridate`、`ggplot`、`tidyverse`のさまざまなツールを使用することをお勧めします。 --></li>
</ul>
</section>
<section class="slide level2">

<ul>
<li>There are many sources of curated news for conducting analytical reviews in an audit, each with its own merits. <!-- 監査における分析的検討のためのキュレーションされたニュースは多く存在し、それぞれに長所がある。 --></li>
<li>The largest consolidator of curated news on the web is arguably Google. <!-- ウェブ上で最も大きなキュレーションされたニュースの集約者は、おそらくGoogleである。 --></li>
<li>The <code>newsAPI</code> package is used to access Google’s News API using R. <!-- `newsAPI`パッケージは、Rを使用してGoogleのニュースAPIにアクセスするために使用される。 --></li>
</ul>
</section>
<section class="slide level2">

<div class="cell">
<div class="sourceCode cell-code" id="cb22"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb22-1"><a href="" aria-hidden="true" tabindex="-1"></a><span class="co"># go to newsapi.org and register to get an API key.</span></span>
<span id="cb22-2"><a href="" aria-hidden="true" tabindex="-1"></a><span class="co"># save the key as an environment variable</span></span>
<span id="cb22-3"><a href="" aria-hidden="true" tabindex="-1"></a><span class="do">## my obscured key</span></span>
<span id="cb22-4"><a href="" aria-hidden="true" tabindex="-1"></a>NEWSAPI_KEY <span class="ot">&lt;-</span> <span class="st">"079ee9e373894dcfb9a062a85c4e1e7e"</span></span>
<span id="cb22-5"><a href="" aria-hidden="true" tabindex="-1"></a><span class="do">## save to .Renviron file</span></span>
<span id="cb22-6"><a href="" aria-hidden="true" tabindex="-1"></a><span class="fu">cat</span>(</span>
<span id="cb22-7"><a href="" aria-hidden="true" tabindex="-1"></a><span class="fu">paste0</span>(<span class="st">"NEWSAPI_KEY="</span>, NEWSAPI_KEY), <span class="at">append =</span> <span class="cn">TRUE</span>,</span>
<span id="cb22-8"><a href="" aria-hidden="true" tabindex="-1"></a><span class="at">fill =</span> <span class="cn">TRUE</span>,</span>
<span id="cb22-9"><a href="" aria-hidden="true" tabindex="-1"></a><span class="at">file =</span> <span class="fu">file.path</span>(<span class="st">"~"</span>, <span class="st">".Renviron"</span>)</span>
<span id="cb22-10"><a href="" aria-hidden="true" tabindex="-1"></a>)</span>
<span id="cb22-11"><a href="" aria-hidden="true" tabindex="-1"></a>src <span class="ot">&lt;-</span> <span class="fu">get_sources</span>(</span>
<span id="cb22-12"><a href="" aria-hidden="true" tabindex="-1"></a>  <span class="at">category =</span> <span class="st">""</span>, <span class="at">language =</span> <span class="st">"en"</span>, <span class="at">country =</span> <span class="st">""</span>,</span>
<span id="cb22-13"><a href="" aria-hidden="true" tabindex="-1"></a>  <span class="at">apiKey =</span> NEWSAPI_KEY, <span class="at">parse =</span> <span class="cn">TRUE</span>)</span>
<span id="cb22-14"><a href="" aria-hidden="true" tabindex="-1"></a><span class="do">## load package</span></span>
<span id="cb22-15"><a href="" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb22-16"><a href="" aria-hidden="true" tabindex="-1"></a>df <span class="ot">&lt;-</span> <span class="fu">lapply</span>(src<span class="sc">$</span>id, get_articles,<span class="at">apiKey=</span>NEWSAPI_KEY)</span>
<span id="cb22-17"><a href="" aria-hidden="true" tabindex="-1"></a><span class="do">## collapse into single data frame</span></span>
<span id="cb22-18"><a href="" aria-hidden="true" tabindex="-1"></a>df <span class="ot">&lt;-</span> <span class="fu">do.call</span>(<span class="st">"rbind"</span>, df)</span></code><button title="コピー" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<!--
## additional functions allow the parsing of streamed news articles
# get_sources(
  #category = "", language = "", country = "", apiKey = NEWSAPI_KEY,
# x <- get_sources(
  #category = "", language = "", country = "", apiKey = NEWSAPI_KEY,
#parse_sources(x)
# y <- get_articles(
      # source, sortBy = "top", apiKey = NEWSAPI_KEY, parse = TRUE)
 #parse_articles(y)
 # source:Name of news source.
 # sortBy: Name of sorting mechanism must be one of
    ## latest, top, or popular. Certain methods only work for certain news sources.
 # apiKey: Character string API token. Default is to grab it from user R environ.
 # parse: Logical indicating whether to parse response object to data frame.
  # where x is a response object from get_sources
 -->
</section>
<section class="slide level2">

<ul>
<li>Feedly is a news aggregator application for various web browsers and mobile devices running “iOS” and “Android”, also available as a cloud-based service.</li>
<li>It compiles news feeds from a variety of online sources for the user to customize and share with others.</li>
<li>Methods are provided to retrieve information about and contents of “Feedly” collections and streams.</li>
</ul>
<aside class="notes">
<p>Feedlyは、さまざまなWebブラウザや「iOS」、「Android」を実行するモバイルデバイス向けのニュースアグリゲータアプリケーションであり、クラウドベースのサービスとしても利用できる。 さまざまなオンライン・ソースからのニュース・フィードを編集し、ユーザーがカスタマイズして他のユーザーと共有できる。 「Feedly」コレクションやストリームに関する情報やコンテンツを取得するためのメソッドが提供されている。</p>
<style type="text/css">
        span.MJX_Assistive_MathML {
          position:absolute!important;
          clip: rect(1px, 1px, 1px, 1px);
          padding: 1px 0 0 0!important;
          border: 0!important;
          height: 1px!important;
          width: 1px!important;
          overflow: hidden!important;
          display:block!important;
      }</style></aside>
</section>
<section class="slide level2">

<ul>
<li>Neither <code>feedly_search()</code> nor <code>feedly_stream()</code> require authentication (i.e., you do not need a developer token) to retrieve the contents of the API call. <!-- `feedly_search()`も`feedly_stream()`も、APIコールの内容を取得するのに認証は不要である (つまり、開発者トークンは不要)。 --></li>
<li>For <code>feedly_stream()</code>, you do need to know the Feedly-structured feed id which is (generally) feed/FEED_URL (e.g., feed / http://feeds.feedburner.com/RBloggers). <!-- `feedly_stream()`については、Feedlyで構造化されたfeed IDが必要であり，(一般的に) feed/FEED_URL (例: feed/http://feeds.feedburner.com/RBloggers) となっている。 --></li>
<li>I have generally found Feedly to be more useful than Google News for business intelligence scanning, because it is less hampered by throttling, and the curation extends to industry specific feeds (rather than Google’s algorithmic guess about the topic). <!-- ビジネス・インテリジェンスのスキャンには、Google NewsよりもFeedlyの方が便利である。というのもFeedlyはスロットリングに邪魔されることが少なく、キュレーションが（トピックに関するGoogleのアルゴリズムによる推測ではなく）産業固有のフィードにまで及ぶからである。- スロットリング（throttling）とは、システムの過負荷や特定利用者による資源の独占を回避するため、一定の制限値を超えた場合に意図的に性能を低下させたり、要求を一時的に拒否したりする制御のこと。- --></li>
</ul>
</section>
<section class="slide level2">

<ul>
<li>In the following example, consider a “stream” to be all the historical items in a feed.</li>
<li>Maximum “page size” (max number of items returned in a single call) is 1000. <!-- 最大「ページサイズ」（1回の呼び出しで返されるアイテムの最大数）は1000である。 --></li>
<li>For simplicity, there is a blanket assumption that if continuation is actually present, we can ask for a large number of items (e.g., 10,000). <!-- 単純化のために，継続が実際に存在する場合，多くのアイテム（例えば，10000個）を要求することができるというblanket assumptionがある。？？ --></li>
</ul>
</section>
<section id="example-extracting-news-about-apple" class="slide level2">
<h2>Example: Extracting News about Apple</h2>
<div class="cell">
<div class="sourceCode cell-code" id="cb23"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb23-1"><a href="" aria-hidden="true" tabindex="-1"></a><span class="fu">read.csv</span>(<span class="fu">system.file</span>(<span class="st">"extdata"</span>,</span>
<span id="cb23-2"><a href="" aria-hidden="true" tabindex="-1"></a>    <span class="st">"feedly_functions.csv"</span>,</span>
<span id="cb23-3"><a href="" aria-hidden="true" tabindex="-1"></a>    <span class="at">package =</span> <span class="st">"auditanalytics"</span>, <span class="at">mustWork =</span> <span class="cn">TRUE</span>)) <span class="sc">|&gt;</span></span>
<span id="cb23-4"><a href="" aria-hidden="true" tabindex="-1"></a>    <span class="fu">kable</span>() <span class="sc">|&gt;</span> <span class="fu">kable_styling</span>(<span class="at">font_size =</span> <span class="dv">12</span>)</span></code><button title="コピー" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<table class="table caption-top" data-quarto-postprocess="true" style="font-size: 12px; margin-left: auto; margin-right: auto;">
<thead>
<tr class="header">
<th style="text-align: left;" data-quarto-table-cell-role="th">Function</th>
<th style="text-align: left;" data-quarto-table-cell-role="th">Action</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td style="text-align: left;">feedly_access_token</td>
<td style="text-align: left;">Retrieve the Feedly Developer Token</td>
</tr>
<tr class="even">
<td style="text-align: left;">feedly_categories</td>
<td style="text-align: left;">Show Feedly Categories</td>
</tr>
<tr class="odd">
<td style="text-align: left;">feedly_collections</td>
<td style="text-align: left;">Retrieve Feedly Connections</td>
</tr>
<tr class="even">
<td style="text-align: left;">feedly_continue</td>
<td style="text-align: left;">Helper function to iterate through a 'feedly_stream()' result...</td>
</tr>
<tr class="odd">
<td style="text-align: left;">feedly_feed_meta</td>
<td style="text-align: left;">Retrieve Metadata for a Feed</td>
</tr>
<tr class="even">
<td style="text-align: left;">feedly_opml</td>
<td style="text-align: left;">Retrieve Your Feedly OPML File</td>
</tr>
<tr class="odd">
<td style="text-align: left;">feedly_profile</td>
<td style="text-align: left;">Retrieve Your Feedly Profile</td>
</tr>
<tr class="even">
<td style="text-align: left;">feedly_search_contents</td>
<td style="text-align: left;">Search content of a stream</td>
</tr>
<tr class="odd">
<td style="text-align: left;">feedly_search_title</td>
<td style="text-align: left;">Find feeds based on title, url or '#topic'</td>
</tr>
<tr class="even">
<td style="text-align: left;">feedly_stream</td>
<td style="text-align: left;">Retrieve contents of a Feedly "stream"</td>
</tr>
<tr class="odd">
<td style="text-align: left;">feedly_subscribe</td>
<td style="text-align: left;">Subscribe to an RSS feed</td>
</tr>
<tr class="even">
<td style="text-align: left;">feedly_subscriptions</td>
<td style="text-align: left;">Retrieve Feedly Subscriptions</td>
</tr>
<tr class="odd">
<td style="text-align: left;">feedly_tags</td>
<td style="text-align: left;">Retrieve List of Tags</td>
</tr>
<tr class="even">
<td style="text-align: left;">global_resource_ids</td>
<td style="text-align: left;">Global Resource Ids</td>
</tr>
<tr class="odd">
<td style="text-align: left;">pipe</td>
<td style="text-align: left;">Pipe operator</td>
</tr>
<tr class="even">
<td style="text-align: left;">render_stream</td>
<td style="text-align: left;">Render a Feedly Stream Data Frame to RMarkdown</td>
</tr>
<tr class="odd">
<td style="text-align: left;">seymour</td>
<td style="text-align: left;">Tools to Work with the 'Feedly' 'API'</td>
</tr>
</tbody>
</table>


</div>
</div>
</section>
<section id="example-feedly" class="slide level2">
<h2>Example: feedly</h2>
<!--
# Find writeups for seymour functions at https://github.com/hrbrmstr/seymour/tree/master/man
## useful functions for extracting news are:
# feedly_search_contents: Search content of a stream
# feedly_search_title: Find feeds based on title, url or ‘#topic’
# feedly_stream: Retrieve contents of a Feedly ‘‘stream’’
# feedly_subscribe: Subscribe to an RSS feed
# feedly_subscriptions: Retrieve Feedly Subscriptions
## Let’s check what is happening at Apple
## (search Google’s "feedburner.com" and then the corporation names to see what is available)
## the following should retreive your Feedly access token, but if not,
## you can log into the site and request the token.
 -->
<div class="cell">
<div class="sourceCode cell-code" id="cb24"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb24-1"><a href="" aria-hidden="true" tabindex="-1"></a>token <span class="ot">&lt;-</span> <span class="fu">feedly_access_token</span>()</span>
<span id="cb24-2"><a href="" aria-hidden="true" tabindex="-1"></a><span class="fu">feedly_search_title</span>(<span class="st">"roland"</span>)</span>
<span id="cb24-3"><a href="" aria-hidden="true" tabindex="-1"></a><span class="co"># prefix the URL with ’feed/’</span></span>
<span id="cb24-4"><a href="" aria-hidden="true" tabindex="-1"></a>music_feed_id <span class="ot">&lt;-</span> <span class="st">"feed/http://feeds.feedburner.com/MusicRadar"</span></span>
<span id="cb24-5"><a href="" aria-hidden="true" tabindex="-1"></a>music_feed_id_2 <span class="ot">&lt;-</span> <span class="st">"feed/http://feeds.feedburner.com/MusicTech"</span></span>
<span id="cb24-6"><a href="" aria-hidden="true" tabindex="-1"></a><span class="do">## Here is the stream function</span></span>
<span id="cb24-7"><a href="" aria-hidden="true" tabindex="-1"></a><span class="fu">feedly_stream</span>(stream_id, <span class="at">unt =</span> <span class="dv">1000</span>L,</span>
<span id="cb24-8"><a href="" aria-hidden="true" tabindex="-1"></a><span class="at">continuation =</span> <span class="cn">NULL</span>,</span>
<span id="cb24-9"><a href="" aria-hidden="true" tabindex="-1"></a><span class="at">feedly_token =</span> <span class="fu">feedly_access_token</span>())</span>
<span id="cb24-10"><a href="" aria-hidden="true" tabindex="-1"></a>music_stream <span class="ot">&lt;-</span> <span class="fu">feedly_stream</span>(music_feed_id_2) <span class="fu">glimpse</span>(music_stream)</span>
<span id="cb24-11"><a href="" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb24-12"><a href="" aria-hidden="true" tabindex="-1"></a><span class="do">## Here is another function</span></span>
<span id="cb24-13"><a href="" aria-hidden="true" tabindex="-1"></a><span class="fu">feedly_search_contents</span>(query,</span>
<span id="cb24-14"><a href="" aria-hidden="true" tabindex="-1"></a>  <span class="at">stream_id =</span> <span class="cn">NULL</span>,</span>
<span id="cb24-15"><a href="" aria-hidden="true" tabindex="-1"></a>  <span class="at">fields =</span> <span class="st">"all"</span>,</span>
<span id="cb24-16"><a href="" aria-hidden="true" tabindex="-1"></a>  <span class="at">embedded =</span> <span class="cn">NULL</span>,</span>
<span id="cb24-17"><a href="" aria-hidden="true" tabindex="-1"></a>  <span class="at">engagement =</span> <span class="cn">NULL</span>,</span>
<span id="cb24-18"><a href="" aria-hidden="true" tabindex="-1"></a>  <span class="at">count =</span> <span class="dv">20</span>L,</span>
<span id="cb24-19"><a href="" aria-hidden="true" tabindex="-1"></a>  <span class="at">locale =</span> <span class="cn">NULL</span>,</span>
<span id="cb24-20"><a href="" aria-hidden="true" tabindex="-1"></a>  <span class="at">feedly_token =</span> <span class="fu">feedly_access_token</span>()</span>
<span id="cb24-21"><a href="" aria-hidden="true" tabindex="-1"></a>  )</span>
<span id="cb24-22"><a href="" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb24-23"><a href="" aria-hidden="true" tabindex="-1"></a>f_search <span class="ot">&lt;-</span> <span class="fu">feedly_search_contents</span>(</span>
<span id="cb24-24"><a href="" aria-hidden="true" tabindex="-1"></a>  <span class="at">q =</span> <span class="st">"ipod"</span>,</span>
<span id="cb24-25"><a href="" aria-hidden="true" tabindex="-1"></a>  <span class="at">stream_id =</span> <span class="st">"music_feed_id"</span>,</span>
<span id="cb24-26"><a href="" aria-hidden="true" tabindex="-1"></a>  <span class="at">fields =</span> <span class="st">"keywords"</span>)</span>
<span id="cb24-27"><a href="" aria-hidden="true" tabindex="-1"></a><span class="fu">glimpse</span>(f_search)</span>
<span id="cb24-28"><a href="" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb24-29"><a href="" aria-hidden="true" tabindex="-1"></a><span class="co"># preallocate space</span></span>
<span id="cb24-30"><a href="" aria-hidden="true" tabindex="-1"></a>streams <span class="ot">&lt;-</span> <span class="fu">vector</span>(<span class="st">"list"</span>, <span class="dv">10</span>)</span>
<span id="cb24-31"><a href="" aria-hidden="true" tabindex="-1"></a>streams[<span class="dv">1</span>L] <span class="ot">&lt;-</span> <span class="fu">list</span>(music_stream)</span>
<span id="cb24-32"><a href="" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb24-33"><a href="" aria-hidden="true" tabindex="-1"></a><span class="co"># catch all of the content</span></span>
<span id="cb24-34"><a href="" aria-hidden="true" tabindex="-1"></a>idx <span class="ot">&lt;-</span> <span class="dv">2</span>L</span>
<span id="cb24-35"><a href="" aria-hidden="true" tabindex="-1"></a><span class="cf">while</span>(<span class="fu">length</span>(music_stream<span class="sc">$</span>continuation) <span class="sc">&gt;</span> <span class="dv">0</span>) {</span>
<span id="cb24-36"><a href="" aria-hidden="true" tabindex="-1"></a>  <span class="fu">cat</span>(<span class="st">"."</span>, <span class="at">sep=</span><span class="st">""</span>) <span class="co"># progress bar, sort of</span></span>
<span id="cb24-37"><a href="" aria-hidden="true" tabindex="-1"></a>  <span class="fu">feedly_stream</span>(</span>
<span id="cb24-38"><a href="" aria-hidden="true" tabindex="-1"></a>    <span class="at">stream_id =</span> music_feed_id,</span>
<span id="cb24-39"><a href="" aria-hidden="true" tabindex="-1"></a>    <span class="at">ct =</span> <span class="dv">10000</span>L,</span>
<span id="cb24-40"><a href="" aria-hidden="true" tabindex="-1"></a>    <span class="at">continuation =</span> music_stream<span class="sc">$</span>continuation</span>
<span id="cb24-41"><a href="" aria-hidden="true" tabindex="-1"></a>  ) <span class="ot">-&gt;</span> rb_stream</span>
<span id="cb24-42"><a href="" aria-hidden="true" tabindex="-1"></a>  streams[idx] <span class="ot">&lt;-</span> <span class="fu">list</span>(music_stream)</span>
<span id="cb24-43"><a href="" aria-hidden="true" tabindex="-1"></a>  idx <span class="ot">&lt;-</span> idx <span class="sc">+</span> <span class="dv">1</span>L</span>
<span id="cb24-44"><a href="" aria-hidden="true" tabindex="-1"></a>}</span>
<span id="cb24-45"><a href="" aria-hidden="true" tabindex="-1"></a><span class="fu">cat</span>(<span class="st">"</span><span class="sc">\n</span><span class="st">"</span>)</span>
<span id="cb24-46"><a href="" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb24-47"><a href="" aria-hidden="true" tabindex="-1"></a><span class="fu">str</span>(streams, <span class="dv">1</span>)</span>
<span id="cb24-48"><a href="" aria-hidden="true" tabindex="-1"></a><span class="fu">str</span>(streams[[<span class="dv">1</span>]], <span class="dv">1</span>)</span>
<span id="cb24-49"><a href="" aria-hidden="true" tabindex="-1"></a><span class="fu">glimpse</span>(streams[[<span class="dv">1</span>]]<span class="sc">$</span>items)</span></code><button title="コピー" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</section>
<section class="slide level2">

<ul>
<li>API datastreams from social networks, blogs, and other Internet resources tend to be best for qualitative intelligence scanning. <!-- APIデータストリームは、ソーシャルネットワーク、ブログ、その他のインターネットリソースからのデータは、質的な情報スキャンに最適である。 --></li>
<li>They can alert the auditor to information that would not appear in financial news or in the accounting statements and transactions. <!-- APIデータストリームは、財務ニュースや会計報告書、取引には現れない情報を監査人に知らせることができる。 --></li>
<li>Such information is an essential part of the analytical review process, but until the advent of Internet accessible resources and automated tools provided by <em>R</em>, has not been accessible to auditors in a cost-effective way. <!-- このような情報は、分析的検討(analytical review process)において不可欠なものだが、インターネットからアクセス可能なリソースやRが提供する自動化ツールが登場するまでは、監査人が費用対効果の高い方法で情報にアクセスすることはできなかった。 --></li>
</ul>
</section></section>
<section>
<section id="accessing-general-web-content-through-web-scraping" class="title-slide slide level1 center">
<h1>Accessing General Web Content through Web Scraping</h1>

</section>
<section id="introduction-to-web-scraping" class="slide level2">
<h2>Introduction to Web Scraping</h2>
<ul>
<li>Where relevant intelligence is not available through APIs, but is presented on websites, it is possible to web scrape data. <!-- APIで利用できなくても、ウェブサイトで情報が提供されている場合、ウェブスクレイピングでデータを取得することができる。 --></li>
<li>This can be difficult and messy, but R provides a number of effective helper tools to scrape and organize data from websites. <!-- この作業は難しく，ごちゃごちゃになることもあるが，Rにはウェブサイトからデータをスクレイピングして整理するための効果的なヘルパーツールがいくつか用意されている。 --></li>
</ul>
</section>
<section class="slide level2">

<ul>
<li>I provide here a brief introduction to the concept and practices of web scraping in R using the <code>rvest</code> package. <!-- ここでは、`rvest`パッケージを使ってRでウェブスクレイピングの概念と実践について簡単に紹介する。 --></li>
<li>Tools like <code>rvest</code> and Beautiful Soup (Python) inject structure into web scraping, which has become important because so few companies are willing to part with their proprietary customer datasets. <!-- `rvest`やPythonの`Beautiful Soup`といったツールは、ウェブスクレイピングに構造を注入するために重要になってきている。というのも、独自の顧客データを手放そうとする企業が少ないためである。 --></li>
</ul>
</section>
<section class="slide level2">

<ul>
<li>They have no choice but to expose some of this proprietary data via the web, though, and this is where auditors have an opportunity to accumulate valuable information germane to audit risk. <!-- しかし、企業はウェブサイトを通じてその独自のデータの一部を公開せざるをえず，これが監査リスクに関連する貴重な情報を蓄積する機会を監査人に与えている。 --></li>
<li>The process of scraping data from the web exemplifies the computer-plus-human model of computing. <!-- ウェブからデータをスクレイピングするプロセスは、コンピューティングのコンピュータ＋人間モデルを体現している。 --></li>
<li>It is also a nice introduction to building custom software for scraping a specific website. <!-- また、特定のウェブサイトをスクレイピングするためのカスタム・ソフトウェアを構築する良い導入でもある。 --></li>
</ul>
</section>
<section id="rvest-basics" class="slide level2">
<h2><code>rvest</code> Basics</h2>
<p>The basic functions in <code>rvest</code> are powerful, and you should try to utilize the following functions when starting out a new web scraping project. <!-- `rvest`の基本関数は強力であり、新しいウェブスクレイピングのプロジェクトを開始する際には、以下の関数を利用することをお勧めする。 --></p>
<ul>
<li><code>html_nodes():</code> identifies HTML wrappers. <!-- - `html_nodes():` HTMLラッパーを識別する。 --></li>
<li><code>html_nodes(".class"):</code> calls node based on css class <!-- - `html_nodes(".class"):`  cssクラスに基づいてノードを呼び出す。 --></li>
<li><code>html_nodes("#id"):</code> calls node based on id <!-- - `html_nodes("#id"):` idに基づいてノードを呼び出す。 --></li>
<li><code>html_nodes(xpath="xpath"):</code> calls node based on xpath <!-- - `html_nodes(xpath="xpath"):` xpathに基づいてノードを呼び出す。 --></li>
</ul>
</section>
<section class="slide level2">

<!-- - `html_attrs():`  identifies attributes (useful for debugging) -->
<ul>
<li><code>html_attrs():</code> 属性を識別する（デバッグに便利）。 <!-- - `html_table():`  turns HTML tables into data frames --></li>
<li><code>html_table():</code> HTMLテーブルをデータフレームに変換する。 <!-- - `html_text():`  strips the HTML tags and extracts only the text --></li>
<li><code>html_text():</code> HTMLタグを剥がし、テキストのみを抽出する。</li>
</ul>
<p><strong>Note on plurals:</strong> html_node() returns metadata; but html_nodes() iterates over the matching nodes. <!-- **複数形についての注意:** `html_node()`はメタデータを返すが、`html_nodes()`は一致するノードを反復処理する。 --> The html_nodes() function turns each HTML tag into a row in an R dataframe. <!-- `html_nodes()`関数は、各HTMLタグをRデータフレームの行に変換する。 --></p>
</section>
<section id="selectorgadget" class="slide level2">
<h2>SelectorGadget</h2>
<ul>
<li><p><code>SelectorGadget</code> is a javascript bookmarklet that allows you to interactively figure out what css selector you need to extract desired components from a page. <!-- SelectorGadgetは、あなたがページから望むコンポーネントを抽出するために必要なcssセレクタを対話的に見つけることができるjavascriptブックマークレットである。 --> <!-- To install it, go to the page: https://cran.r-project.org/web/packages/rvest/vignettes/selectorgadget.html --> <!-- SelectorGadgetをインストールするには，次のウェブサイトにアクセスする。 --> <!-- [https://cran.r-project.org/web/packages/rvest/vignettes/selectorgadget.html](https://cran.r-project.org/web/packages/rvest/vignettes/selectorgadget.html) --></p></li>
<li><p>Install <code>selectorgadget</code> on the Chrome Browser (only at the time of this writing) from <code>https://selectorgadget.com/</code>. <!-- Chromeブラウザにselectorgadgetをインストールするには，（この執筆時点では）[https://selectorgadget.com/](https://selectorgadget.com/)からインストールする。 --> <code>SelectorGadget</code> is an open-source tool that simplifies CSS selector generation and discovery on complicated sites. <!-- SelectorGadgetは、複雑なサイトでのCSSセレクタの生成と発見を簡素化するオープンソースのツールである。 --></p></li>
</ul>
</section>
<section id="how-to-use-selectorgadget" class="slide level2">
<h2>How to use SelectorGadget</h2>
<ul>
<li><p>Install the Chrome Extension or drag the bookmarklet to your bookmark bar, then go to any page and launch it.</p></li>
<li><p>A box will open in the bottom right of the website. <!-- Chrome拡張機能をインストールするか、ブックマークレットをブックマークバーにドラッグして、任意のページに移動してSelectorGadgetを起動させと，ウェブサイトの右下にボックスが開く。 --></p></li>
<li><p>Click on a page element that you would like your selector to match (it will turn green). <!-- あるページの要素をクリックすると、その要素と一致するセレクタが生成される（緑色になる）。 --></p></li>
<li><p><code>SelectorGadget</code> will then generate a minimal CSS selector for that element, and will highlight (yellow) everything that is matched by the selector. <!-- SelectorGadgetは、その要素に対する最小のCSSセレクタを生成し、そのセレクタに一致するすべてのものを黄色くハイライトする。 --></p></li>
<li><p>Now click on a highlighted element to remove it from the selector (red), or click on an unhighlighted element to add it to the selector. <!-- 次に、セレクタからハイライトされた要素を削除するためにクリックする（赤色になる）か、ハイライトされていない要素をクリックしてセレクタに追加する。 --> <!-- - Through this process of selection and rejection, SelectorGadget helps you come up with the perfect CSS selector for your needs. --> <!-- この選択と拒否のプロセスを通じて、SelectorGadgetはあなたのニーズに合った完璧なCSSセレクタを見つけることに役立つ。 --></p></li>
</ul>
</section>
<section id="how-to-use-selectorgadget-2" class="slide level2">
<h2>How to use SelectorGadget 2</h2>
<p>To use it, open the page: <!-- ウェブサイトを開いて使ってみよう。 --></p>
<ol type="1">
<li>Click on the element you want to select. <!-- 1. 選択したい要素をクリックする。 --> <code>Selectorgadget</code> will make a first guess at what css selector you want. <!-- Selectorgadgetは、あなたが望むcssセレクタを最初に推測する。 --> It is likely to be bad since it only has one example to learn from, but it is a start. <!-- それは1つの例しか学習していないのでおそらく悪いものになるが、最初だけである。 --> Elements that match the selector will be highlighted in yellow. <!-- セレクタに一致する要素は黄色でハイライトされる。 --></li>
<li>Click on elements that should not be selected. They will turn red. <!-- 3. 選択されてはいけない要素をクリックすると赤くなる。 --> Click on elements that should be selected. They will turn green. <!-- 選択されるべき要素をクリックすると，緑色になる。 --></li>
<li>Iterate until only the elements you want are selected. <!-- 3. 望む要素だけが選択されるまで繰り返す。 --> Selectorgadget is not perfect and sometimes will not be able to find a useful css selector. Sometimes starting from a different element helps. <!-- Selectorgadgetは完璧ではなく、時々有用なcssセレクタを見つけることができないことがあるが，ときおり異なる要素から始めることが役立つことがある。 --></li>
</ol>
</section>
<section id="how-to-use-selectorgadget-3" class="slide level2">
<h2>How to use SelectorGadget 3</h2>
<!-- ## 他の重要な関数 -->
<ol type="1">
<li>If you prefer, you can use xpath selectors instead of <code>css: html_nodes(doc, xpath = "//table//td")</code>. <!-- 1. 望むなら、cssの代わりにxpathセレクタを使うこともできる: `html_nodes(doc, xpath = "//table//td"))`. --></li>
<li>Extract the tag names with <code>html_tag()</code>, text with <code>html_text()</code>, a single attribute with <code>html_attr()</code> or all attributes with <code>html_attrs()</code>. <!-- 1. `html_tag()`でタグ名を、`html_text()`でテキストを、`html_attr()`で単一の属性を、`html_attrs()`で全ての属性を抽出する。 --></li>
<li>Detect and repair text encoding problems with guess_encoding() and repair_encoding(). <!-- 3. `guess_encoding()` および`repair_encoding()`で、テキスト・エンコーディングの問題を検出して修復する。 --></li>
<li>Navigate around a website as if you are in a browser with <code>html_session()</code>, <code>jump_to()</code>, <code>follow_link()</code>, <code>back()</code>, and <code>forward()</code>. Extract, modify, and submit forms with <code>html_form()</code>, <code>set_values()</code>, and <code>submit_form()</code>. <!-- 1. `html_session()`、`jump_to()`、`follow_link()`，`back()`， `forward()`を使って、あたかもウェブブラウザの中にいるかのようにウェブサイトを移動し，`html_form()`、`set_values()`、`submit_form()`を使用して、フォームの抽出、修正、送信を行う。 --></li>
</ol>
</section>
<section id="simple-sentiment-analysis" class="slide level2">
<h2>Simple Sentiment Analysis</h2>
<!-- ## シンプルな感情分析 -->
<ul>
<li>Here is an example of a simple sentiment analysis for customers’ comments on restaurants in Hanoi Vietnam. <!-- 以下は、ベトナムのハノイのレストランに関する顧客のコメントに対するシンプルな感情分析の例である。 --></li>
<li>Start by pointing your browser to https://www.tripadvisor.com and searching for “Asian” cuisine in “Hanoi”. <!-- - (as homework, consider other cities or services based on specific audit needs). --> <!-- まず、ウェブブラウザで[https://www.tripadvisor.com](https://www.tripadvisor.com)を訪れ、"Hanoi"の"Asian"料理を検索する（宿題として、特定の監査ニーズ(audit needs)に基づいて他の都市やサービスを考えてみよう）。 --></li>
<li>Click on the “Asian” menu, which brings you to web page. <!-- https://www.tripadvisor.com/Restaurants-g293924-Hanoi.html. --> <!-- "Asian"メニューをクリックすると、[https://www.tripadvisor.com/Restaurants-g293924-Hanoi.html](https://www.tripadvisor.com/Restaurants-g293924-Hanoi.html)というウェブページに移動する。 --></li>
<li>Turn on <code>selectorgadget</code> in Chrome browser and highlight all of the reviews. <!-- Chromeブラウザでselectorgadgetをオンにして、すべてのレビューをハイライトしよう。 --></li>
</ul>
</section>
<section id="selectorgadget-1" class="slide level2">
<h2>selectorgadget</h2>
<ul>
<li>In the menu at the bottom of your screen, this will give you an index “.is-9” which is the designator for the CSS code that you have outlined (you can verify this in Chrome by clicking the three dot menu at the upper right-hand corner of the screen,</li>
<li>clicking “More Tools” = “Developer Tools” and</li>
<li>checking the webpage HTML; or right-click and inspect for a quick look) <!-- 画面下部のメニューに".is-9 "というインデックスが表示される。 --> <!-- これは、アウトライン化したCSSコードを示している（Chromeでは、画面右上の3つのドットメニューをクリックし、"その他のツール"="デベロッパーツール "をクリックし、ウェブペ
ージのHTMLを確認することで確認できる。） --></li>
</ul>
</section>
<section id="example-trip-advisor-reviews" class="slide level2">
<h2>Example: Trip Advisor Reviews</h2>
<div class="cell">
<div class="sourceCode cell-code" id="cb25"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb25-1"><a href="" aria-hidden="true" tabindex="-1"></a>url <span class="ot">&lt;-</span> <span class="st">"HTML/hanoi.html"</span> <span class="co"># htmlファイルの場所</span></span>
<span id="cb25-2"><a href="" aria-hidden="true" tabindex="-1"></a>reviews <span class="ot">&lt;-</span> url <span class="sc">|&gt;</span> <span class="fu">read_html</span>() <span class="sc">|&gt;</span> <span class="co"># rvest</span></span>
<span id="cb25-3"><a href="" aria-hidden="true" tabindex="-1"></a>    <span class="fu">html_nodes</span>(<span class="st">"._T"</span>) <span class="co"># selectorgadget</span></span>
<span id="cb25-4"><a href="" aria-hidden="true" tabindex="-1"></a><span class="do">## Pull the text out of the reviews</span></span>
<span id="cb25-5"><a href="" aria-hidden="true" tabindex="-1"></a>quote <span class="ot">&lt;-</span> reviews <span class="sc">|&gt;</span>  <span class="fu">html_text</span>()</span>
<span id="cb25-6"><a href="" aria-hidden="true" tabindex="-1"></a><span class="do">## Turn the character string "quote" into a data.frame and View</span></span>
<span id="cb25-7"><a href="" aria-hidden="true" tabindex="-1"></a><span class="do">## data.frame(quote, stringsAsFactors = FALSE) |&gt; View() # 中身チェック</span></span>
<span id="cb25-8"><a href="" aria-hidden="true" tabindex="-1"></a>pal2 <span class="ot">&lt;-</span> <span class="fu">brewer.pal</span>(<span class="dv">8</span>,<span class="st">"Dark2"</span>) <span class="do">## from RColorBrewer</span></span>
<span id="cb25-9"><a href="" aria-hidden="true" tabindex="-1"></a><span class="fu">wordcloud</span>(quote, <span class="at">colors =</span> pal2)</span></code><button title="コピー" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>

<ul>
<li>In TripAdvisor, you can use the same methods, in various geographical regions, for: Hotels, Things to do, Restaurants, Flights, Vacation Rentals,Cruises and other things. <!-- TripAdvisorでは、ホテル、アクティビティ、レストラン、フライト、バケーションレンタル、クルーズなど、さまざまな地理的地域で同じ方法を使用できる。 --></li>
<li>Similar methods work for other review and aggregation sites. <!-- 他のレビューや集計サイトでも同様の方法が使える。 --></li>
</ul>
</section>
<section id="example-trip-advisor-reviews-output" class="slide level2 output-location-slide"><h2>Example: Trip Advisor Reviews</h2><div class="cell output-location-slide">
<div class="cell-output-display">
<div>
<figure>
<p><img data-src="gaisho_2024_07_files/figure-revealjs/unnamed-chunk-17-1.png" width="960"></p>
</figure>
</div>
</div>
</div></section><section id="example-movie-reviews" class="slide level2">
<h2>Example: Movie Reviews</h2>
<ul>
<li>The next example scrapes information about “The Lego Movie” from IMDB. <!-- 次の例は，IMDBから「レゴ・ムービー」に関する情報をスクレイピングする。 --></li>
<li>We start by downloading and parsing the file with <code>html()</code>. <!-- まず、`html()`を使ってファイルをダウンロードして解析する。 --></li>
<li>To extract the rating, we start with <code>Selectorgadget</code> to figure out which css selector matches the data we want. <!-- 評価を抽出するためには、Selectorgadgetを使って、どのcssセレクタが欲しいデータと一致しているのかを探す。 --></li>
<li>We use <code>html_node()</code> to find the first node that matches that selector, extract its contents with <code>html_text()</code>, and convert it to numeric with <code>as.numeric()</code>. <!-- `html_node()`関数を用いて、そのセレクタに一致する最初のノードを見つけ、`html_text()`でその内容を抽出し、`as.numeric()`で数値に変換する。 --></li>
</ul>
</section>
<section id="example-tabular-data" class="slide level2">
<h2>Example: Tabular Data</h2>
<ul>
<li>Some websites publish their data in an <strong>easy-to-read table</strong> without offering the option to download the data. <!-- いくつかのウェブサイトは、データをダウンロードするオプションを提供せずに、読みやすい表形式で公開されている。 --></li>
<li>Package <code>rvest</code> uses <code>html_table()</code> for tabular data. <!-- `rvest`パッケージは，表形式のデータに対して`html_table()`を使う。 --></li>
<li>Using the functions listed above, isolate the table on the page. Then pass the HTML table to <code>html_table()</code>. <!-- 上記の関数を使って、ページ上の表を抽出し，次にHTMLテーブルを`html_table()`に渡す。 --></li>
<li>In the following case, you can go to https://www.nis.gov.kh/cpi/ and inspect the html. <!-- 次の例では、[https://www.nis.gov.kh/cpi/](https://www.nis.gov.kh/cpi/)にアクセスして、htmlを調査することができる。 --></li>
</ul>
</section>
<section class="slide level2">

<div class="cell">
<details class="code-fold">
<summary>コード</summary>
<div class="sourceCode cell-code" id="cb26"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb26-1"><a href="" aria-hidden="true" tabindex="-1"></a>accounts <span class="ot">&lt;-</span> <span class="fu">read_html</span>(<span class="st">"https://www.nis.gov.kh/cpi/Apr14.html"</span>)</span>
<span id="cb26-2"><a href="" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb26-3"><a href="" aria-hidden="true" tabindex="-1"></a>table <span class="ot">&lt;-</span> accounts <span class="sc">%&gt;%</span></span>
<span id="cb26-4"><a href="" aria-hidden="true" tabindex="-1"></a>  <span class="fu">html_nodes</span>(<span class="st">"table"</span>) <span class="sc">%&gt;%</span></span>
<span id="cb26-5"><a href="" aria-hidden="true" tabindex="-1"></a>  <span class="fu">html_table</span>(<span class="at">header=</span>T)</span>
<span id="cb26-6"><a href="" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb26-7"><a href="" aria-hidden="true" tabindex="-1"></a><span class="co"># 表を整理する</span></span>
<span id="cb26-8"><a href="" aria-hidden="true" tabindex="-1"></a><span class="co"># 1番目のテーブルを表示</span></span>
<span id="cb26-9"><a href="" aria-hidden="true" tabindex="-1"></a>dict <span class="ot">&lt;-</span> table[[<span class="dv">1</span>]][,<span class="dv">1</span><span class="sc">:</span><span class="dv">2</span>] <span class="co"># 表1の1〜2列目を抽出</span></span>
<span id="cb26-10"><a href="" aria-hidden="true" tabindex="-1"></a>accounts_df <span class="ot">&lt;-</span> table[[<span class="dv">1</span>]][<span class="dv">6</span><span class="sc">:</span><span class="dv">18</span>,<span class="sc">-</span><span class="dv">1</span>] <span class="co"># 表1の6〜18行目を抽出</span></span>
<span id="cb26-11"><a href="" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb26-12"><a href="" aria-hidden="true" tabindex="-1"></a><span class="co"># 列名を指定</span></span>
<span id="cb26-13"><a href="" aria-hidden="true" tabindex="-1"></a>names <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="st">'id'</span>, <span class="st">'weight.pct'</span>, <span class="st">'jan.2013'</span>, <span class="st">'dec.2013'</span>, <span class="st">'jan.2014'</span>, <span class="st">'mo.pctch'</span>, <span class="st">'yr.pctch'</span>, <span class="st">'mo.cont'</span>, <span class="st">'yr.cont'</span>)</span>
<span id="cb26-14"><a href="" aria-hidden="true" tabindex="-1"></a><span class="fu">colnames</span>(accounts_df) <span class="ot">&lt;-</span> names <span class="co"># データフレームの列名を変更</span></span>
<span id="cb26-15"><a href="" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb26-16"><a href="" aria-hidden="true" tabindex="-1"></a><span class="fu">glimpse</span>(accounts_df) <span class="co"># データの確認</span></span></code><button title="コピー" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output cell-output-stdout">
<pre><code>Rows: 13
Columns: 9
$ id         &lt;chr&gt; "All ITEMS&nbsp; (CPI TOTAL)", "FOOD AND    NON-ALCOHOLIC BEVERA…
$ weight.pct &lt;chr&gt; "100.000", "44.775", "1.625", "3.036", "17.084", "2.743", "…
$ jan.2013   &lt;chr&gt; "150.2", "170.4", "127.9", "125.8", "127.8", "130.5", "116.…
$ dec.2013   &lt;chr&gt; "156.8", "178.7", "136.0", "130.1", "131.1", "141.3", "127.…
$ jan.2014   &lt;chr&gt; "157.7", "180.0", "136.9", "130.4", "131.5", "141.9", "127.…
$ mo.pctch   &lt;chr&gt; "0.5", "0.7", "0.6", "0.2", "0.3", "0.4", "0.3", "0.1", "-0…
$ yr.pctch   &lt;chr&gt; "4.9", "5.6", "7.1", "3.6", "2.9", "8.7", "9.2", "1.2", "-2…
$ mo.cont    &lt;chr&gt; "0.5", "0.4", "0.0", "0.0", "0.0", "0.0", "0.0", "0.0", "0.…
$ yr.cont    &lt;chr&gt; "4.9", "2.9", "0.1", "0.1", "0.4", "0.2", "0.4", "0.1", "0.…</code></pre>
</div>
</div>
</section>
<section id="example-xpaths" class="slide level2">
<h2>Example: XPaths</h2>
<ul>
<li><code>Xpaths</code> are content hierarchies in a website. <!-- Xpathsはウェブサイトのコンテンツ階層である。 --></li>
<li>Sometimes you can get more comprehensive retrieval with an <code>xpath</code>. <!-- xPathを使うと、より包括的な取得ができることがある。 --></li>
<li>You can get the <code>xpath</code> that includes some content with the Chrome xPath Finder extension (it is like <code>SelectorGadget</code> but for xpaths) <!-- Chrome xPath Finder拡張機能を使うと、xPathを取得できる（これはSelectorGadgetのようなものだが、xPath用である）。 --></li>
</ul>
</section>
<section id="example-extracting-data-from-wikipedia" class="slide level2">
<h2>Example: Extracting Data from Wikipedia</h2>
<div class="cell">
<div class="sourceCode cell-code" id="cb28"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb28-1"><a href="" aria-hidden="true" tabindex="-1"></a>h <span class="ot">&lt;-</span> <span class="fu">read_html</span>(<span class="st">"https://en.wikipedia.org/wiki/Current_members_of_the_United_States_House_of_Representatives"</span>)</span>
<span id="cb28-2"><a href="" aria-hidden="true" tabindex="-1"></a>reps <span class="ot">&lt;-</span> h <span class="sc">|&gt;</span></span>
<span id="cb28-3"><a href="" aria-hidden="true" tabindex="-1"></a>    <span class="fu">html_node</span>(<span class="at">xpath =</span> <span class="st">'//*[@id="votingmembers"]'</span>) <span class="sc">|&gt;</span></span>
<span id="cb28-4"><a href="" aria-hidden="true" tabindex="-1"></a>    <span class="fu">html_table</span>(<span class="at">fill =</span> T)</span>
<span id="cb28-5"><a href="" aria-hidden="true" tabindex="-1"></a>reps[, <span class="fu">c</span>(<span class="dv">1</span><span class="sc">:</span><span class="dv">2</span>, <span class="dv">4</span><span class="sc">:</span><span class="dv">9</span>)] <span class="sc">|&gt;</span> <span class="fu">as_tibble</span>() <span class="sc">|&gt;</span></span>
<span id="cb28-6"><a href="" aria-hidden="true" tabindex="-1"></a>  <span class="fu">head</span>(<span class="dv">10</span>) <span class="sc">|&gt;</span> <span class="fu">kable</span>() <span class="sc">|&gt;</span> <span class="fu">kable_styling</span>(<span class="at">font_size =</span> <span class="dv">12</span>)</span></code><button title="コピー" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>

</section>
<section id="example-extracting-data-from-wikipedia-output" class="slide level2 output-location-slide"><h2>Example: Extracting Data from Wikipedia</h2><div class="cell output-location-slide">
<div class="cell-output-display">
<table class="table caption-top" data-quarto-postprocess="true" style="font-size: 12px; margin-left: auto; margin-right: auto;">
<thead>
<tr class="header">
<th style="text-align: left;" data-quarto-table-cell-role="th">District</th>
<th style="text-align: left;" data-quarto-table-cell-role="th">Member</th>
<th style="text-align: left;" data-quarto-table-cell-role="th">Party</th>
<th style="text-align: left;" data-quarto-table-cell-role="th">Born[5]</th>
<th style="text-align: left;" data-quarto-table-cell-role="th">Prior experience</th>
<th style="text-align: left;" data-quarto-table-cell-role="th">Education</th>
<th style="text-align: left;" data-quarto-table-cell-role="th">Assumed office</th>
<th style="text-align: left;" data-quarto-table-cell-role="th">Residence</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td style="text-align: left;">Alabama&nbsp;1</td>
<td style="text-align: left;">Jerry Carl</td>
<td style="text-align: left;">Republican</td>
<td style="text-align: left;">(1958-06-17) June 17, 1958 (age&nbsp;66)</td>
<td style="text-align: left;">Mobile County Commission</td>
<td style="text-align: left;">Florida Gateway College</td>
<td style="text-align: left;">2021</td>
<td style="text-align: left;">Mobile</td>
</tr>
<tr class="even">
<td style="text-align: left;">Alabama&nbsp;2</td>
<td style="text-align: left;">Barry Moore</td>
<td style="text-align: left;">Republican</td>
<td style="text-align: left;">(1966-09-26) September 26, 1966 (age&nbsp;58)</td>
<td style="text-align: left;">Alabama House of Representatives</td>
<td style="text-align: left;">Enterprise State Community College (AS)Auburn University (BS)</td>
<td style="text-align: left;">2021</td>
<td style="text-align: left;">Enterprise</td>
</tr>
<tr class="odd">
<td style="text-align: left;">Alabama&nbsp;3</td>
<td style="text-align: left;">Mike Rogers</td>
<td style="text-align: left;">Republican</td>
<td style="text-align: left;">(1958-07-16) July 16, 1958 (age&nbsp;66)</td>
<td style="text-align: left;">Calhoun County CommissionerAlabama House of Representatives</td>
<td style="text-align: left;">Jacksonville State University (BA, MPA)Birmingham School of Law (JD)</td>
<td style="text-align: left;">2003</td>
<td style="text-align: left;">Weaver</td>
</tr>
<tr class="even">
<td style="text-align: left;">Alabama&nbsp;4</td>
<td style="text-align: left;">Robert Aderholt</td>
<td style="text-align: left;">Republican</td>
<td style="text-align: left;">(1965-07-22) July 22, 1965 (age&nbsp;59)</td>
<td style="text-align: left;">Haleyville Municipal Judge</td>
<td style="text-align: left;">University of North AlabamaBirmingham–Southern College (BA)Samford University (JD)</td>
<td style="text-align: left;">1997</td>
<td style="text-align: left;">Haleyville</td>
</tr>
<tr class="odd">
<td style="text-align: left;">Alabama&nbsp;5</td>
<td style="text-align: left;">Dale Strong</td>
<td style="text-align: left;">Republican</td>
<td style="text-align: left;">(1970-05-08) May 8, 1970 (age&nbsp;54)</td>
<td style="text-align: left;">Madison County Commission Chairman</td>
<td style="text-align: left;">Athens State University (BA)</td>
<td style="text-align: left;">2023</td>
<td style="text-align: left;">Huntsville</td>
</tr>
<tr class="even">
<td style="text-align: left;">Alabama&nbsp;6</td>
<td style="text-align: left;">Gary Palmer</td>
<td style="text-align: left;">Republican</td>
<td style="text-align: left;">(1954-05-14) May 14, 1954 (age&nbsp;70)</td>
<td style="text-align: left;">Policy analyst</td>
<td style="text-align: left;">University of Alabama (BS)</td>
<td style="text-align: left;">2015</td>
<td style="text-align: left;">Hoover</td>
</tr>
<tr class="odd">
<td style="text-align: left;">Alabama&nbsp;7</td>
<td style="text-align: left;">Terri Sewell</td>
<td style="text-align: left;">Democratic</td>
<td style="text-align: left;">(1965-01-01) January 1, 1965 (age&nbsp;59)</td>
<td style="text-align: left;">Attorney</td>
<td style="text-align: left;">Princeton University (BA)St Hilda's College, Oxford (MA)Harvard University (JD)</td>
<td style="text-align: left;">2011</td>
<td style="text-align: left;">Birmingham</td>
</tr>
<tr class="even">
<td style="text-align: left;">Alaska&nbsp;at-large</td>
<td style="text-align: left;">Mary Peltola</td>
<td style="text-align: left;">Democratic</td>
<td style="text-align: left;">(1973-08-31) August 31, 1973 (age&nbsp;51)</td>
<td style="text-align: left;">Alaska House of Representatives</td>
<td style="text-align: left;">University of Northern ColoradoUniversity of Alaska AnchorageUniversity of Alaska SoutheastUniversity of Alaska Fairbanks</td>
<td style="text-align: left;">2022 (special)</td>
<td style="text-align: left;">Bethel</td>
</tr>
<tr class="odd">
<td style="text-align: left;">Arizona&nbsp;1</td>
<td style="text-align: left;">David Schweikert</td>
<td style="text-align: left;">Republican</td>
<td style="text-align: left;">(1962-03-03) March 3, 1962 (age&nbsp;62)</td>
<td style="text-align: left;">Arizona House of RepresentativesArizona Board of EducationArizona Board of EqualizationMaricopa County Treasurer</td>
<td style="text-align: left;">Arizona State University, Tempe (BS, MBA)</td>
<td style="text-align: left;">2011</td>
<td style="text-align: left;">Fountain Hills[6]</td>
</tr>
<tr class="even">
<td style="text-align: left;">Arizona&nbsp;2</td>
<td style="text-align: left;">Eli Crane</td>
<td style="text-align: left;">Republican</td>
<td style="text-align: left;">(1980-01-03) January 3, 1980 (age&nbsp;44)</td>
<td style="text-align: left;">U.S. NavyBusinessman</td>
<td style="text-align: left;">Arizona Western CollegeUniversity of Arizona</td>
<td style="text-align: left;">2023</td>
<td style="text-align: left;">Oro Valley</td>
</tr>
</tbody>
</table>


</div>
</div></section><section id="example-extracting-intelligence-from-product-user-forums" class="slide level2">
<h2>Example: Extracting Intelligence from Product User Forums</h2>
<ul>
<li>Product user forums are excellent sources of informed consumer and retailer information. <!-- 製品ユーザーフォーラムは、情報に詳しい消費者や小売業者の情報源として優れている。 --></li>
<li>This example provides a number of methods that can be used for general web scraping. <!-- この例は、一般的なウェブスクレイピングに使用できるいくつかの方法を提供する。 --></li>
<li>Applying this to our goal of web scraping for intelligence on Roland’s products, we can glean consumer sentiment on Roland’s pianos as conveyed by discussions on the Piano World Forum website and display it with <code>wordcloud</code>. <!-- ローランドの製品に関する情報をウェブスクレイピングする，という目標を設定し、Piano World Forumのウェブサイトでの議論からローランドのピアノに対する消費者の感情を把握し、 --> <!-- `wordcloud`で表示することができる。 --></li>
</ul>
</section>
<section id="word-cloud-of-roland-piano-reviews" class="slide level2">
<h2>Word Cloud of Roland Piano Reviews</h2>
<div class="cell">
<details class="code-fold">
<summary>コード</summary>
<div class="sourceCode cell-code" id="cb29"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb29-1"><a href="" aria-hidden="true" tabindex="-1"></a>handle <span class="ot">&lt;-</span> <span class="fu">handle</span>(<span class="st">"http://forum.pianoworld.com//"</span>) <span class="co"># handle to the website</span></span>
<span id="cb29-2"><a href="" aria-hidden="true" tabindex="-1"></a><span class="co"># path to the login page</span></span>
<span id="cb29-3"><a href="" aria-hidden="true" tabindex="-1"></a>path <span class="ot">&lt;-</span> <span class="st">"ubbthreads.php/ubb/login.html?ocu=http%3A%2F%2Fforum.pianoworld.com%2F"</span></span>
<span id="cb29-4"><a href="" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb29-5"><a href="" aria-hidden="true" tabindex="-1"></a><span class="co"># fields found in the login form.</span></span>
<span id="cb29-6"><a href="" aria-hidden="true" tabindex="-1"></a>login <span class="ot">&lt;-</span> <span class="fu">list</span>(</span>
<span id="cb29-7"><a href="" aria-hidden="true" tabindex="-1"></a>  <span class="at">amember_login =</span> <span class="st">"westland"</span>, <span class="co"># ユーザーネーム</span></span>
<span id="cb29-8"><a href="" aria-hidden="true" tabindex="-1"></a>  <span class="at">amember_pass  =</span> <span class="st">"powerpcc"</span>, <span class="co"># パスワード</span></span>
<span id="cb29-9"><a href="" aria-hidden="true" tabindex="-1"></a>  <span class="at">amember_redirect_url =</span> <span class="st">"http://forum.pianoworld.com//ubbthreads.php/forum_summary.html"</span></span>
<span id="cb29-10"><a href="" aria-hidden="true" tabindex="-1"></a>  )</span>
<span id="cb29-11"><a href="" aria-hidden="true" tabindex="-1"></a>response <span class="ot">&lt;-</span> <span class="fu">POST</span>(<span class="at">handle =</span> handle, <span class="at">path =</span> path, <span class="at">body =</span> login)</span>
<span id="cb29-12"><a href="" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb29-13"><a href="" aria-hidden="true" tabindex="-1"></a><span class="co"># Copy the URL of the page you are scraping</span></span>
<span id="cb29-14"><a href="" aria-hidden="true" tabindex="-1"></a>url <span class="ot">&lt;-</span> <span class="st">"http://forum.pianoworld.com/"</span></span>
<span id="cb29-15"><a href="" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb29-16"><a href="" aria-hidden="true" tabindex="-1"></a><span class="co"># Extract the reviews in the CSS selector</span></span>
<span id="cb29-17"><a href="" aria-hidden="true" tabindex="-1"></a>reviews <span class="ot">&lt;-</span> url <span class="sc">%&gt;%</span></span>
<span id="cb29-18"><a href="" aria-hidden="true" tabindex="-1"></a>           <span class="fu">read_html</span>() <span class="sc">%&gt;%</span></span>
<span id="cb29-19"><a href="" aria-hidden="true" tabindex="-1"></a>           <span class="fu">html_nodes</span>(<span class="st">"#cat2 div"</span>)</span>
<span id="cb29-20"><a href="" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb29-21"><a href="" aria-hidden="true" tabindex="-1"></a><span class="co"># Pull the selected text out of the reviews</span></span>
<span id="cb29-22"><a href="" aria-hidden="true" tabindex="-1"></a>quote <span class="ot">&lt;-</span> reviews <span class="sc">%&gt;%</span></span>
<span id="cb29-23"><a href="" aria-hidden="true" tabindex="-1"></a>                  <span class="fu">html_text</span>() <span class="sc">%&gt;%</span></span>
<span id="cb29-24"><a href="" aria-hidden="true" tabindex="-1"></a>                   <span class="fu">as_tibble</span>() <span class="co"># as_tibble()に変更</span></span>
<span id="cb29-25"><a href="" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb29-26"><a href="" aria-hidden="true" tabindex="-1"></a>quote <span class="ot">&lt;-</span>  <span class="fu">filter</span>(quote[<span class="fu">str_detect</span>(quote, <span class="st">"Roland"</span>)])</span>
<span id="cb29-27"><a href="" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb29-28"><a href="" aria-hidden="true" tabindex="-1"></a>pal2 <span class="ot">&lt;-</span> <span class="fu">brewer.pal</span>(<span class="dv">8</span>,<span class="st">"Dark2"</span>) <span class="co"># from RColorBrewer</span></span>
<span id="cb29-29"><a href="" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb29-30"><a href="" aria-hidden="true" tabindex="-1"></a><span class="fu">wordcloud</span>(<span class="fu">unlist</span>(quote), <span class="at">colors=</span>pal2)</span></code><button title="コピー" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>

</div>
<img data-src="gaisho_2024_07_files/figure-revealjs/pianoworld-1.png" width="960" class="r-stretch"></section>
<section id="final-comments" class="slide level2">
<h2>Final Comments</h2>
<ul>
<li>The previous algorithms and examples should give the reader an overview of some of the tools available to assist with analytical review. <!-- 前述のアルゴリズムと例は、読者に分析検討(analytical review)を支援するためのいくつかのツールの概要を提供するはずである。 --> <!-- - This is, of course, not a complete list of tools, or of opportunities. --> <!-- もちろん，これは完全なツールのリストでも機会のリストでもない。 --></li>
<li>Much of the code in this chapter draws from <mark class="mark">dynamic and continually updated databases, streams, and standards</mark>. <!-- この章の多くのコードは、動的で絶えず更新されるデータベースやデータ流(stream)、およびスタンダードから引用されている。 --></li>
<li>New tools and repositories are constantly coming online, particularly in accounting and finance, where the market is large and rich. <!-- 特に会計と金融の分野では、市場が大きく豊かであるため、新しいツールやリポジトリが絶えずオンラインで登場している。 --></li>
<li>New packages are often introduced on <strong>GitHub</strong> rather than the official <mark class="mark">Comprehensive R Archive Network (CRAN)</mark> repositories, and auditors should always be on the lookout for new offerings. <!-- 新しいパッケージは、公式のComprehensive R Archive Network (CRAN)リポジトリではなく、GitHubでよく紹介される。 --> <!-- 監査人は常に新しいパッケージを探すことが望ましい。 --></li>
</ul>
</section>
<section id="conclusion" class="slide level2">
<h2>Conclusion</h2>
<ul>
<li>This chapter provides a start, but there are many opportunities for an ambitious auditor to develop new methodologies for plumbing Internet resources. <!-- 本章はスタート地点を提供するが、野心的な監査人には、インターネットリソースを探るための新しい方法論を開発するための多くの機会がある。 --> <!-- - This will require a level of patience and curiosity that exceeds merely writing code.  --> <!-- これにはコードを書くこと以上の忍耐と好奇心が必要である。 --></li>
<li>As I mentioned in the preface, the R language is not a typical language with a single core of developers and guidelines; rather it is a <mark class="mark">sharing platform for a wide range of data analytic functions - features which make it useful, dynamic, and sometimes messy</mark>. <!-- 前書きで述べたように、R言語は、単一の開発者のコアとガイドラインを持つ典型的な言語ではなく、幅広いデータ解析機能を共有するプラットフォームであり、それが有用で，動的で、時には混沌としている特徴を持っている。 --></li>
<li>The effort put into familiarizing oneself with the R ecosystem will pay off many times over in access to the latest, <strong>most sophisticated algorithms</strong> that exist anywhere in industry. <!-- Rエコシステムに精通するための努力は、業界のどこにも存在する最新で最も洗練されたアルゴリズムに何度もアクセスすることで多くの利益をもたらすだろう。 --> <!-- - Because of its unique character, you can be assured that R’s packages will always be at the forefront of financial analysis and analytical review, now and in the future. --> <!-- その独特な性格のために、Rのパッケージは、今後も将来も常に金融分析と分析検討の最前線にあることを保証される。 --></li>
</ul>

</section></section>
    </div>
  <div class="quarto-auto-generated-content" style="display: none;">
<p><img src="img/kobe_logo.png" class="slide-logo"></p>
<div class="footer footer-default">
<p>Kobe University, Business Administration</p>
</div>
</div></div>

  <script>window.backupDefine = window.define; window.define = undefined;</script>
  <script src="gaisho_2024_07_files/libs/revealjs/dist/reveal.js"></script>
  <!-- reveal.js plugins -->
  <script src="gaisho_2024_07_files/libs/revealjs/plugin/quarto-line-highlight/line-highlight.js"></script>
  <script src="gaisho_2024_07_files/libs/revealjs/plugin/pdf-export/pdfexport.js"></script>
  <script src="gaisho_2024_07_files/libs/revealjs/plugin/reveal-menu/menu.js"></script>
  <script src="gaisho_2024_07_files/libs/revealjs/plugin/reveal-menu/quarto-menu.js"></script>
  <script src="gaisho_2024_07_files/libs/revealjs/plugin/reveal-chalkboard/plugin.js"></script>
  <script src="gaisho_2024_07_files/libs/revealjs/plugin/quarto-support/support.js"></script>
  

  <script src="gaisho_2024_07_files/libs/revealjs/plugin/notes/notes.js"></script>
  <script src="gaisho_2024_07_files/libs/revealjs/plugin/search/search.js"></script>
  <script src="gaisho_2024_07_files/libs/revealjs/plugin/zoom/zoom.js"></script>
  <script>window.define = window.backupDefine; window.backupDefine = undefined;</script>

  <script>

      // Full list of configuration options available at:
      // https://revealjs.com/config/
      Reveal.initialize({
'controlsAuto': true,
'previewLinksAuto': false,
'pdfSeparateFragments': false,
'autoAnimateEasing': "ease",
'autoAnimateDuration': 1,
'autoAnimateUnmatched': true,
'jumpToSlide': true,
'menu': {"side":"left","useTextContentForMissingTitles":true,"markers":false,"loadIcons":false,"custom":[{"title":"Tools","icon":"<i class=\"fas fa-gear\"></i>","content":"<ul class=\"slide-menu-items\">\n<li class=\"slide-tool-item active\" data-item=\"0\"><a href=\"#\" onclick=\"RevealMenuToolHandlers.fullscreen(event)\"><kbd>f</kbd> Fullscreen</a></li>\n<li class=\"slide-tool-item\" data-item=\"1\"><a href=\"#\" onclick=\"RevealMenuToolHandlers.speakerMode(event)\"><kbd>s</kbd> Speaker View</a></li>\n<li class=\"slide-tool-item\" data-item=\"2\"><a href=\"#\" onclick=\"RevealMenuToolHandlers.overview(event)\"><kbd>o</kbd> Slide Overview</a></li>\n<li class=\"slide-tool-item\" data-item=\"3\"><a href=\"#\" onclick=\"RevealMenuToolHandlers.togglePdfExport(event)\"><kbd>e</kbd> PDF Export Mode</a></li>\n<li class=\"slide-tool-item\" data-item=\"4\"><a href=\"#\" onclick=\"RevealMenuToolHandlers.toggleScrollView(event)\"><kbd>r</kbd> Scroll View Mode</a></li>\n<li class=\"slide-tool-item\" data-item=\"5\"><a href=\"#\" onclick=\"RevealMenuToolHandlers.toggleChalkboard(event)\"><kbd>b</kbd> Toggle Chalkboard</a></li>\n<li class=\"slide-tool-item\" data-item=\"6\"><a href=\"#\" onclick=\"RevealMenuToolHandlers.toggleNotesCanvas(event)\"><kbd>c</kbd> Toggle Notes Canvas</a></li>\n<li class=\"slide-tool-item\" data-item=\"7\"><a href=\"#\" onclick=\"RevealMenuToolHandlers.downloadDrawings(event)\"><kbd>d</kbd> Download Drawings</a></li>\n<li class=\"slide-tool-item\" data-item=\"8\"><a href=\"#\" onclick=\"RevealMenuToolHandlers.keyboardHelp(event)\"><kbd>?</kbd> Keyboard Help</a></li>\n</ul>"}],"openButton":true},
'chalkboard': {"buttons":true},
'smaller': false,
 
        // Display controls in the bottom right corner
        controls: false,

        // Help the user learn the controls by providing hints, for example by
        // bouncing the down arrow when they first encounter a vertical slide
        controlsTutorial: false,

        // Determines where controls appear, "edges" or "bottom-right"
        controlsLayout: 'edges',

        // Visibility rule for backwards navigation arrows; "faded", "hidden"
        // or "visible"
        controlsBackArrows: 'faded',

        // Display a presentation progress bar
        progress: true,

        // Display the page number of the current slide
        slideNumber: 'c/t',

        // 'all', 'print', or 'speaker'
        showSlideNumber: 'all',

        // Add the current slide number to the URL hash so that reloading the
        // page/copying the URL will return you to the same slide
        hash: true,

        // Start with 1 for the hash rather than 0
        hashOneBasedIndex: false,

        // Flags if we should monitor the hash and change slides accordingly
        respondToHashChanges: true,

        // Push each slide change to the browser history
        history: true,

        // Enable keyboard shortcuts for navigation
        keyboard: true,

        // Enable the slide overview mode
        overview: true,

        // Disables the default reveal.js slide layout (scaling and centering)
        // so that you can use custom CSS layout
        disableLayout: false,

        // Vertical centering of slides
        center: false,

        // Enables touch navigation on devices with touch input
        touch: true,

        // Loop the presentation
        loop: false,

        // Change the presentation direction to be RTL
        rtl: false,

        // see https://revealjs.com/vertical-slides/#navigation-mode
        navigationMode: 'linear',

        // Randomizes the order of slides each time the presentation loads
        shuffle: false,

        // Turns fragments on and off globally
        fragments: true,

        // Flags whether to include the current fragment in the URL,
        // so that reloading brings you to the same fragment position
        fragmentInURL: false,

        // Flags if the presentation is running in an embedded mode,
        // i.e. contained within a limited portion of the screen
        embedded: false,

        // Flags if we should show a help overlay when the questionmark
        // key is pressed
        help: true,

        // Flags if it should be possible to pause the presentation (blackout)
        pause: true,

        // Flags if speaker notes should be visible to all viewers
        showNotes: false,

        // Global override for autoplaying embedded media (null/true/false)
        autoPlayMedia: null,

        // Global override for preloading lazy-loaded iframes (null/true/false)
        preloadIframes: null,

        // Number of milliseconds between automatically proceeding to the
        // next slide, disabled when set to 0, this value can be overwritten
        // by using a data-autoslide attribute on your slides
        autoSlide: 0,

        // Stop auto-sliding after user input
        autoSlideStoppable: true,

        // Use this method for navigation when auto-sliding
        autoSlideMethod: null,

        // Specify the average time in seconds that you think you will spend
        // presenting each slide. This is used to show a pacing timer in the
        // speaker view
        defaultTiming: null,

        // Enable slide navigation via mouse wheel
        mouseWheel: false,

        // The display mode that will be used to show slides
        display: 'block',

        // Hide cursor if inactive
        hideInactiveCursor: true,

        // Time before the cursor is hidden (in ms)
        hideCursorTime: 5000,

        // Opens links in an iframe preview overlay
        previewLinks: false,

        // Transition style (none/fade/slide/convex/concave/zoom)
        transition: 'slide',

        // Transition speed (default/fast/slow)
        transitionSpeed: 'default',

        // Transition style for full page slide backgrounds
        // (none/fade/slide/convex/concave/zoom)
        backgroundTransition: 'none',

        // Number of slides away from the current that are visible
        viewDistance: 3,

        // Number of slides away from the current that are visible on mobile
        // devices. It is advisable to set this to a lower number than
        // viewDistance in order to save resources.
        mobileViewDistance: 2,

        // The "normal" size of the presentation, aspect ratio will be preserved
        // when the presentation is scaled to fit different resolutions. Can be
        // specified using percentage units.
        width: 1300,

        height: 700,

        // Factor of the display size that should remain empty around the content
        margin: 0.1,

        // reveal.js plugins
        plugins: [QuartoLineHighlight, PdfExport, RevealMenu, RevealChalkboard, QuartoSupport,

          RevealNotes,
          RevealSearch,
          RevealZoom
        ]
      });
    </script>
    
    <script>
      // htmlwidgets need to know to resize themselves when slides are shown/hidden.
      // Fire the "slideenter" event (handled by htmlwidgets.js) when the current
      // slide changes (different for each slide format).
      (function () {
        // dispatch for htmlwidgets
        function fireSlideEnter() {
          const event = window.document.createEvent("Event");
          event.initEvent("slideenter", true, true);
          window.document.dispatchEvent(event);
        }

        function fireSlideChanged(previousSlide, currentSlide) {
          fireSlideEnter();

          // dispatch for shiny
          if (window.jQuery) {
            if (previousSlide) {
              window.jQuery(previousSlide).trigger("hidden");
            }
            if (currentSlide) {
              window.jQuery(currentSlide).trigger("shown");
            }
          }
        }

        // hookup for slidy
        if (window.w3c_slidy) {
          window.w3c_slidy.add_observer(function (slide_num) {
            // slide_num starts at position 1
            fireSlideChanged(null, w3c_slidy.slides[slide_num - 1]);
          });
        }

      })();
    </script>

    <script id="quarto-html-after-body" type="application/javascript">
    window.document.addEventListener("DOMContentLoaded", function (event) {
      const toggleBodyColorMode = (bsSheetEl) => {
        const mode = bsSheetEl.getAttribute("data-mode");
        const bodyEl = window.document.querySelector("body");
        if (mode === "dark") {
          bodyEl.classList.add("quarto-dark");
          bodyEl.classList.remove("quarto-light");
        } else {
          bodyEl.classList.add("quarto-light");
          bodyEl.classList.remove("quarto-dark");
        }
      }
      const toggleBodyColorPrimary = () => {
        const bsSheetEl = window.document.querySelector("link#quarto-bootstrap");
        if (bsSheetEl) {
          toggleBodyColorMode(bsSheetEl);
        }
      }
      toggleBodyColorPrimary();  
      const tabsets =  window.document.querySelectorAll(".panel-tabset-tabby")
      tabsets.forEach(function(tabset) {
        const tabby = new Tabby('#' + tabset.id);
      });
      const isCodeAnnotation = (el) => {
        for (const clz of el.classList) {
          if (clz.startsWith('code-annotation-')) {                     
            return true;
          }
        }
        return false;
      }
      const onCopySuccess = function(e) {
        // button target
        const button = e.trigger;
        // don't keep focus
        button.blur();
        // flash "checked"
        button.classList.add('code-copy-button-checked');
        var currentTitle = button.getAttribute("title");
        button.setAttribute("title", "コピーしました");
        let tooltip;
        if (window.bootstrap) {
          button.setAttribute("data-bs-toggle", "tooltip");
          button.setAttribute("data-bs-placement", "left");
          button.setAttribute("data-bs-title", "コピーしました");
          tooltip = new bootstrap.Tooltip(button, 
            { trigger: "manual", 
              customClass: "code-copy-button-tooltip",
              offset: [0, -8]});
          tooltip.show();    
        }
        setTimeout(function() {
          if (tooltip) {
            tooltip.hide();
            button.removeAttribute("data-bs-title");
            button.removeAttribute("data-bs-toggle");
            button.removeAttribute("data-bs-placement");
          }
          button.setAttribute("title", currentTitle);
          button.classList.remove('code-copy-button-checked');
        }, 1000);
        // clear code selection
        e.clearSelection();
      }
      const getTextToCopy = function(trigger) {
          const codeEl = trigger.previousElementSibling.cloneNode(true);
          for (const childEl of codeEl.children) {
            if (isCodeAnnotation(childEl)) {
              childEl.remove();
            }
          }
          return codeEl.innerText;
      }
      const clipboard = new window.ClipboardJS('.code-copy-button:not([data-in-quarto-modal])', {
        text: getTextToCopy
      });
      clipboard.on('success', onCopySuccess);
      if (window.document.getElementById('quarto-embedded-source-code-modal')) {
        // For code content inside modals, clipBoardJS needs to be initialized with a container option
        // TODO: Check when it could be a function (https://github.com/zenorocha/clipboard.js/issues/860)
        const clipboardModal = new window.ClipboardJS('.code-copy-button[data-in-quarto-modal]', {
          text: getTextToCopy,
          container: window.document.getElementById('quarto-embedded-source-code-modal')
        });
        clipboardModal.on('success', onCopySuccess);
      }
        var localhostRegex = new RegExp(/^(?:http|https):\/\/localhost\:?[0-9]*\//);
        var mailtoRegex = new RegExp(/^mailto:/);
          var filterRegex = new RegExp('/' + window.location.host + '/');
        var isInternal = (href) => {
            return filterRegex.test(href) || localhostRegex.test(href) || mailtoRegex.test(href);
        }
        // Inspect non-navigation links and adorn them if external
     	var links = window.document.querySelectorAll('a[href]:not(.nav-link):not(.navbar-brand):not(.toc-action):not(.sidebar-link):not(.sidebar-item-toggle):not(.pagination-link):not(.no-external):not([aria-hidden]):not(.dropdown-item):not(.quarto-navigation-tool):not(.about-link)');
        for (var i=0; i<links.length; i++) {
          const link = links[i];
          if (!isInternal(link.href)) {
            // undo the damage that might have been done by quarto-nav.js in the case of
            // links that we want to consider external
            if (link.dataset.originalHref !== undefined) {
              link.href = link.dataset.originalHref;
            }
          }
        }
      function tippyHover(el, contentFn, onTriggerFn, onUntriggerFn) {
        const config = {
          allowHTML: true,
          maxWidth: 500,
          delay: 100,
          arrow: false,
          appendTo: function(el) {
              return el.closest('section.slide') || el.parentElement;
          },
          interactive: true,
          interactiveBorder: 10,
          theme: 'light-border',
          placement: 'bottom-start',
        };
        if (contentFn) {
          config.content = contentFn;
        }
        if (onTriggerFn) {
          config.onTrigger = onTriggerFn;
        }
        if (onUntriggerFn) {
          config.onUntrigger = onUntriggerFn;
        }
          config['offset'] = [0,0];
          config['maxWidth'] = 700;
        window.tippy(el, config); 
      }
      const noterefs = window.document.querySelectorAll('a[role="doc-noteref"]');
      for (var i=0; i<noterefs.length; i++) {
        const ref = noterefs[i];
        tippyHover(ref, function() {
          // use id or data attribute instead here
          let href = ref.getAttribute('data-footnote-href') || ref.getAttribute('href');
          try { href = new URL(href).hash; } catch {}
          const id = href.replace(/^#\/?/, "");
          const note = window.document.getElementById(id);
          if (note) {
            return note.innerHTML;
          } else {
            return "";
          }
        });
      }
      const findCites = (el) => {
        const parentEl = el.parentElement;
        if (parentEl) {
          const cites = parentEl.dataset.cites;
          if (cites) {
            return {
              el,
              cites: cites.split(' ')
            };
          } else {
            return findCites(el.parentElement)
          }
        } else {
          return undefined;
        }
      };
      var bibliorefs = window.document.querySelectorAll('a[role="doc-biblioref"]');
      for (var i=0; i<bibliorefs.length; i++) {
        const ref = bibliorefs[i];
        const citeInfo = findCites(ref);
        if (citeInfo) {
          tippyHover(citeInfo.el, function() {
            var popup = window.document.createElement('div');
            citeInfo.cites.forEach(function(cite) {
              var citeDiv = window.document.createElement('div');
              citeDiv.classList.add('hanging-indent');
              citeDiv.classList.add('csl-entry');
              var biblioDiv = window.document.getElementById('ref-' + cite);
              if (biblioDiv) {
                citeDiv.innerHTML = biblioDiv.innerHTML;
              }
              popup.appendChild(citeDiv);
            });
            return popup.innerHTML;
          });
        }
      }
    });
    </script>
    

</body></html>